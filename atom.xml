<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>èŒƒå­ç¦çš„åšå®¢</title>
  
  
  <link href="https://www.robotsfan.com/atom.xml" rel="self"/>
  
  <link href="https://www.robotsfan.com/"/>
  <updated>2024-07-19T03:48:56.032Z</updated>
  <id>https://www.robotsfan.com/</id>
  
  <author>
    <name>Ziqi Fan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>AMPè®ºæ–‡è§£æ</title>
    <link href="https://www.robotsfan.com/posts/1742892a.html"/>
    <id>https://www.robotsfan.com/posts/1742892a.html</id>
    <published>2024-07-19T04:00:00.000Z</published>
    <updated>2024-07-19T03:48:56.032Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="AMPè®ºæ–‡è§£æ"><a href="#AMPè®ºæ–‡è§£æ" class="headerlink" title="AMPè®ºæ–‡è§£æ"></a>AMPè®ºæ–‡è§£æ</h1><p>AMP: Adversarial Motion Priors for Stylized Physics-Based Character Control</p><h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p>å…ˆä»ä»æ¨¡ä»¿å­¦ä¹ IL(Imitation Learning)è¯´èµ·ã€‚æ­£å¸¸çš„å¼ºåŒ–å­¦ä¹ RL(Reinforcement Learning)è¿‡ç¨‹æ˜¯â€ç¯å¢ƒäº’åŠ¨+æœ€å¤§åŒ–è®¤ä¸ºäººä¸ºè®¾è®¡çš„å¥–åŠ±å‡½æ•°=æœ€ä¼˜Actorâ€</p><p>é€†å¼ºåŒ–å­¦ä¹ IRL(Inverse Reinforcement Learning)åˆ™æ²¡æœ‰å¥–åŠ±ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯â€ç¯å¢ƒäº’åŠ¨+æœ€å¤§åŒ–ä»ä¸“å®¶æ•°æ®å­¦åˆ°çš„å¥–åŠ±å‡½æ•°=æœ€ä¼˜Actorâ€<br>GAIL(Generative Adversarial Imitation Learning)æ˜¯ä½¿ç”¨GAN(Generative Adversarial Network)çš„IRLï¼Œå³è®­ç»ƒä¸€ä¸ªç”Ÿæˆå™¨ $G$ ï¼Œå®ƒä»ä¸€ä¸ªæ™®é€šçš„åˆ†å¸ƒé€æ¸ç”Ÿæˆä¸ç°æœ‰æ•°æ®åˆ†å¸ƒç›¸ä¼¼çš„åˆ†å¸ƒã€‚GAILçš„æ•°æ®é›†(å‚è€ƒè¿åŠ¨)æ˜¯ $\{(s,a)\}$ ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ Actor èƒ½å¤Ÿæ¨¡ä»¿ä¸“å®¶ï¼Œå³ Actor äº§ç”Ÿçš„è½¨è¿¹ï¼ˆçš„åˆ†å¸ƒï¼‰ä¸ä¸“å®¶äº§ç”Ÿçš„è½¨è¿¹ï¼ˆçš„åˆ†å¸ƒï¼‰ç›¸ä¼¼ã€‚GANä¸­çš„ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨è¿™é‡Œä¸å†èµ˜è¿°ã€‚rewardæ˜¯é¼“åŠ±policyçš„è¡Œä¸ºå’Œæ•°æ®é›†é‡Œé¢çš„ $(ğ‘ ,ğ‘)$ å¯¹å°½å¯èƒ½åƒã€‚</p><h2 id="AMPç›®æ ‡"><a href="#AMPç›®æ ‡" class="headerlink" title="AMPç›®æ ‡"></a>AMPç›®æ ‡</h2><p>æœ¬æ–‡çš„ç›®æ ‡æ˜¯è®­ç»ƒä¸€ä¸ªagentï¼Œè®©å…¶å®ŒæˆæŸä¸ªç›®æ ‡(Goal)ï¼ŒåŒæ—¶ä¿æŒæŸç§é£æ ¼(Style)ï¼Œå…¶ä¸­é£æ ¼ç”±expert datasetæˆ–è€…demonstration datasetæä¾›ã€‚æœ¬æ–‡æ··åˆäº†ç›®æ ‡å®ç°å’Œæ¨¡ä»¿å­¦ä¹ ï¼Œå…¶ä¸­æ¨¡ä»¿å­¦ä¹ ä½¿ç”¨å¯¹æŠ—æ€§æ–¹å¼å­¦ä¹ å¯¹ç»™å®šé£æ ¼çš„éµå®ˆï¼ŒAMPä¸­çš„A(Adversarial)å°±æ˜¯å¯¹æŠ—æ€§ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/Pasted%20image%2020240719001013.png" alt="Pasted image 20240719001013" style="zoom: 50%;"></p><p>å¥–åŠ±å‡½æ•°ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€éƒ¨åˆ†æ˜¯ç›®æ ‡å¥–åŠ± $r_t^G$ ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯é£æ ¼å¥–åŠ± $r_t^S$ ï¼Œé€šè¿‡è®¡ç®—ä¸¤è€…çš„åŠ æƒå’Œå¾—åˆ°æ€»å¥–åŠ±ï¼š</p><script type="math/tex; mode=display">r(s_t,a_t,s_{t+1},g)=w^Gr^G(s_t,a_t,s_{t+1},g)+w^Sr^S(s_t,s_{t+1})</script><h2 id="ç›®æ ‡å¥–åŠ±"><a href="#ç›®æ ‡å¥–åŠ±" class="headerlink" title="ç›®æ ‡å¥–åŠ±"></a>ç›®æ ‡å¥–åŠ±</h2><p>agentå¯ä»¥æ˜¯äººå½¢æœºå™¨äººï¼Œä¹Ÿå¯ä»¥æ˜¯å››è¶³æœºå™¨äººæˆ–è€…éœ¸ç‹é¾™ã€‚ç›®æ ‡å¥–åŠ±å‡½æ•° $r_t^G$ æè¿°åˆ°è¾¾ç›®æ ‡çš„ç¨‹åº¦ï¼Œå…¶æ ¹æ®ç›®æ ‡æ¥è®¾è®¡ï¼Œå¦‚æ¥è¿‘æŸä¸ªç›®æ ‡ç‚¹æˆ–å‡»æ‰“ä¸€ä¸ªç‰©ä½“ï¼Œè¿™éƒ¨åˆ†å†…å®¹åœ¨é™„å½•ä¸­æœ‰è¯¦ç»†ä»‹ç»ã€‚ä½œè€…é’ˆå¯¹ä¸é€šçš„ç›®æ ‡è®¾è®¡äº†å¾ˆå¤šå¥–åŠ±å¡‘é€ ï¼Œæ¯”å¦‚å‡»æ‰“ç›®æ ‡ç‰©ä½“çš„ä»»åŠ¡ï¼Œå¦‚æœç¦»ç›®æ ‡å¾ˆè¿œåˆ™è·‘è¿‡å»ï¼Œå¦‚æœç¦»ç›®æ ‡å¾ˆè¿‘åˆ™åˆ‡æ¢åˆ°è¡Œèµ°ï¼Œå¦‚æœä¸ç›®æ ‡è¶³å¤Ÿè¿‘åˆ™å‡»æ‰“ç›®æ ‡ã€‚agentè§‚æµ‹ç¯å¢ƒå¾—åˆ°stateï¼Œç”Ÿæˆactionæ¥å®ç°ç›®æ ‡ã€‚è¿™é‡Œçš„ä»»åŠ¡è®¾è®¡æ˜¯ç»å…¸çš„ç­–ç•¥æ¢¯åº¦æ–¹æ³•RLã€‚</p><h2 id="é£æ ¼å¥–åŠ±"><a href="#é£æ ¼å¥–åŠ±" class="headerlink" title="é£æ ¼å¥–åŠ±"></a>é£æ ¼å¥–åŠ±</h2><p>æ•°æ®é›†å¯ä»¥æ˜¯åŠ¨æ•æ•°æ®ï¼Œä¹Ÿå¯ä»¥ä»å·²ç»å­¦ä¼šçš„Policyä¸­å¾—åˆ°ã€‚æ•°æ®é›†åªæä¾›è¿åŠ¨çš„é£æ ¼ï¼Œè€Œä¸æä¾›å¦‚ä½•å®ç°ç›®æ ‡ã€‚é£æ ¼å¥–åŠ± $r_t^S$ æè¿°éµå®ˆæ•°æ®é›†ä¸­é£æ ¼çš„ç¨‹åº¦ï¼Œç”±è¿åŠ¨å…ˆéªŒ(Motion Prior)è¿›è¡Œåˆ¤æ–­ï¼Œè¿åŠ¨å…ˆéªŒç”±GANè®­ç»ƒå¾—åˆ°ï¼Œç»å…¸çš„GAN Lossä¸ºï¼š</p><script type="math/tex; mode=display">\arg\min_{D}\:-\mathbb{E}_{d^{M}(\mathrm{s,a})}\left[\log\left(D(\mathrm{s,a})\right)\right]-\mathbb{E}_{d^{\pi}(\mathrm{s,a})}\left[\log\left(1-D(\mathrm{s,a})\right)\right]</script><p>è¿™é‡Œé¦–å…ˆç®€å•ä»‹ç»ä¸€ä¸‹æ ‡å‡†çš„GAN(Generative Adversarial Network)ï¼Œå°±æ˜¯è¦è®­ç»ƒä¸€ä¸ªç”Ÿæˆå™¨å’Œä¸€ä¸ªé‰´åˆ«å™¨ã€‚ç”Ÿæˆå™¨æ¥æ”¶éšæœºå™ªå£°ä½œä¸ºè¾“å…¥ï¼Œä»ä¸€ä¸ªæ™®é€šçš„åˆ†å¸ƒé€æ¸ç”Ÿæˆä¸æ•°æ®é›†åˆ†å¸ƒç›¸ä¼¼çš„åˆ†å¸ƒã€‚é‰´åˆ«å™¨çš„ä»»åŠ¡æ˜¯éœ€è¦åŒºåˆ†æ•°æ®é›†ä¸­å·²æœ‰çš„ $(ğ‘ ,a)$ å’Œç”Ÿæˆå™¨äº§ç”Ÿçš„ $(ğ‘ ,a)$ ï¼Œæœ€åçš„ç›®æ ‡æ˜¯æ¬ºéª—é‰´åˆ«å™¨ï¼šç”Ÿæˆå™¨äº§ç”Ÿçš„æ•°æ®æ¥è‡ªæ•°æ®é›†ã€‚</p><p>æœ¬æ–‡ä¸­ä½¿ç”¨çš„GANä¸ä¼ ç»ŸGANæœ‰ä¸€äº›æ”¹åŠ¨ã€‚é¦–å…ˆå¯¹äºAgentï¼ŒåŸºäºå½“å‰çŠ¶æ€ $s$ ï¼Œé‡‡å–åŠ¨ä½œ $a$ ï¼Œå¾—åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€ $sâ€™$ ã€‚ä½†æ˜¯æ•°æ®é›†ä¸­åªæœ‰è¿ç»­çš„çŠ¶æ€ $s_i$ è€Œå¹¶æ²¡æœ‰å¯¹åº”çš„ $a_i$ ï¼Œæ‰€ä»¥åªä½¿ç”¨ä¸Šè¿°ä¸‰ä¸ªå‚æ•°ä¸­çš„ $s$ å’Œ $sâ€™$ æ¥æè¿°ä¸€æ¬¡Transitionï¼Œæ•…GANçš„çŠ¶æ€å¯¹å˜ä¸º $(ğ‘ ,sâ€™)$ ã€‚é™¤æ­¤ä¹‹å¤–ä¸ç»å…¸GANä¸åŒçš„æ˜¯ï¼Œæœ¬æ–‡ä¸­çš„ç”Ÿæˆå™¨å…¶å®å°±æ˜¯Policyï¼Œè¾“å‡ºä¹Ÿæ˜¯ $(ğ‘ ,sâ€™)$ ï¼Œæ‰€ä»¥é‰´åˆ«å™¨çš„ä»»åŠ¡å°±å˜æˆäº†åŒºåˆ†æ•°æ®é›†ä¸­å·²æœ‰çš„ $(ğ‘ ,sâ€™)$ å’ŒPolicyäº§ç”Ÿçš„ $(ğ‘ ,sâ€™)$ ï¼Œæœ€åçš„ç›®æ ‡åŒæ ·æ˜¯æ¬ºéª—é‰´åˆ«å™¨ï¼šPolicyäº§ç”Ÿçš„çœŸå®æ•°æ®æ¥è‡ªæ•°æ®é›†ã€‚è¿™é‡Œçš„é‰´åˆ«å™¨å®é™…ä¸Šå°±æ˜¯è¿åŠ¨å…ˆéªŒã€‚</p><p>æœ¬æ–‡ä½¿ç”¨çš„Lossä¹Ÿä¸ç»å…¸GANä¸åŒï¼Œä½¿ç”¨äº†æœ€å°äºŒä¹˜é‰´åˆ«å™¨(Least-Squares Discriminator)ï¼Œä½¿ç”¨å¹³æ–¹æŸå¤±ï¼Œè¿™æ ·å¯ä»¥è·å¾—æ›´å¥½çš„æ¢¯åº¦ï¼š</p><script type="math/tex; mode=display">\underset{D}{\operatorname*{\arg\min}}\:\mathbb{E}_{d^{M}(s,s^{\prime})}\left[\left(D(s,s^{\prime})-1\right)^{2}\right]+\mathbb{E}_{d^{\pi}(s,s^{\prime})}\left[\left(D(s,s^{\prime})+1\right)^{2}\right]</script><p>ä¸Šè¿°å…¬å¼çš„æ„æ€å°±æ˜¯ï¼šå¦‚æœæ•°æ®æ¥è‡ªçœŸå®æ•°æ® $M$ ï¼Œ $D(s,s^{\prime})$ ä¼šæ¥è¿‘1ï¼›å¦‚æœæ•°æ®æ¥è‡ªPolicy $\Pi$ ï¼Œ $D(s,s^{\prime})$ ä¼šæ¥è¿‘-1ã€‚</p><p>ä½¿ç”¨é‰´åˆ«å™¨çš„è¾“å‡ºæ¥è®¾è®¡é£æ ¼å¥–åŠ±å‡½æ•°ï¼š</p><script type="math/tex; mode=display">r(s_t,s_{t+1})=\max\left[0,1-0.25{\left(D(s_t,s_{t+1})-1\right)}^2\right]</script><p>å¯ä»¥çœ‹å‡ºï¼Œé£æ ¼å¥–åŠ±è¢«é™åˆ¶åœ¨0åˆ°1ä¹‹é—´ã€‚å¦‚æœé‰´åˆ«å™¨çš„è¾“å‡º $D(s_t,s_{t+1})=1$ ï¼Œæ­¤æ—¶å¥–åŠ±è¾¾åˆ°æœ€å¤§ï¼ˆ1ï¼‰ï¼Œå³é‰´åˆ«å™¨è®¤ä¸º $(ğ‘ ,sâ€™)$ æ¥è‡ªæ•°æ®é›†ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå½“Policyè®¾æ³•äº§ç”Ÿäº†é‰´åˆ«å™¨è®¤ä¸ºæ˜¯æ¥è‡ªæ•°æ®é›†çš„Transaction $(ğ‘ ,sâ€™)$ ï¼Œä»–å°±ä¼šè·å¾—æœ€å¤§å¥–åŠ±ã€‚</p><h2 id="æ€»ä½“æµç¨‹"><a href="#æ€»ä½“æµç¨‹" class="headerlink" title="æ€»ä½“æµç¨‹"></a>æ€»ä½“æµç¨‹</h2><p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸Šè¿°è®­ç»ƒè¿‡ç¨‹å°±æ˜¯policyåœ¨è¯•å›¾è¾¾åˆ°ç›®æ ‡çš„åŒæ—¶å»æ¬ºéª—é‰´åˆ«å™¨â€œæˆ‘å°±æ˜¯æ•°æ®é›†â€ï¼›é‰´åˆ«å™¨åˆ™åœ¨è¯•å›¾åŒºåˆ†å¼€Policyäº§ç”Ÿçš„æ•°æ®å’Œæ•°æ®é›†ä¸­çš„æ•°æ®ã€‚</p><p>ä¸Šè¿°è¿‡ç¨‹å¯ä»¥ç”¨ä¼ªä»£ç æ¥è¡¨ç¤ºã€‚1-5è¡Œæ˜¯åˆå§‹åŒ–å„ç§bufferï¼›7-8è¡Œä½¿ç”¨policyäº§ç”Ÿmæ­¥çš„è½¨è¿¹ï¼›ç¬¬10è¡ŒæŠŠtransitionsç»™åˆ¤åˆ«å™¨ï¼ŒçŠ¶æ€å¯¹ä½¿ç”¨ç‰¹å¾å‡½æ•°æ¥ $\Phi$ è¡¨ç¤ºï¼›11è¡Œæ ¹æ®ä¸Šé¢çš„å…¬å¼ï¼Œä½¿ç”¨é‰´åˆ«å™¨çš„è¾“å‡ºè®¡ç®—é£æ ¼å¥–åŠ±ï¼›12è¡Œé€šè¿‡è®¡ç®—ç›®æ ‡å¥–åŠ±å’ŒåŠ æƒå¥–åŠ±çš„åŠ æƒå’Œå¾—åˆ°æ€»å¥–åŠ±ï¼›15è¡Œå°†å¾—åˆ°çš„è½¨è¿¹å­˜åˆ°reply bufferï¼›20è¡Œä½¿ç”¨reply bufferæ¥æ›´æ–°é‰´åˆ«å™¨ï¼›22è¡Œæ›´æ–°ä»·å€¼å‡½æ•°å’Œç­–ç•¥ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/Pasted%20image%2020240719001047.png" alt="Pasted image 20240719001047" style="zoom:50%;"></p><h2 id="æ¢¯åº¦æƒ©ç½š"><a href="#æ¢¯åº¦æƒ©ç½š" class="headerlink" title="æ¢¯åº¦æƒ©ç½š"></a>æ¢¯åº¦æƒ©ç½š</h2><p>GANè®­ç»ƒå¯èƒ½ä¸ç¨³å®šï¼Œä½¿ç”¨æ¢¯åº¦æƒ©ç½šå¯ä»¥ç¨³å®šè®­ç»ƒ</p><script type="math/tex; mode=display">\begin{aligned}\underset{D}{\operatorname*{\arg\min}}& \mathbb{E}_{d^{\mathcal{M}}(\mathrm{s,s'})}\left[\left(D(\Phi(\mathrm{s}),\Phi(\mathrm{s'}))-1\right)^2\right]  \\&+\mathbb{E}_{d^{\pi}(\mathrm{s,s^{\prime}})}\left[\left(D\left(\Phi(\mathrm{s}),\Phi(\mathrm{s^{\prime}})\right)+1\right)^{2}\right] \\&+\frac{w^\mathrm{gp}}2\:\mathbb{E}_{d^M(\mathrm{s},\mathrm{s}^{\prime})}\left[\left\|\nabla_{\phi}D(\phi)|_{\phi=(\Phi(\mathrm{s}),\Phi(\mathrm{s}^{\prime}))}\right\|^2\right]\end{aligned}</script><p>ä¸Šé¢ç¬¬ä¸‰è¡Œæƒ©ç½šäº†åˆ¤åˆ«å™¨å‡ºæ¥çš„æ¢¯åº¦èŒƒæ•°</p><h2 id="åŠ¨ä½œç»„åˆä¸è¿‡æ¸¡"><a href="#åŠ¨ä½œç»„åˆä¸è¿‡æ¸¡" class="headerlink" title="åŠ¨ä½œç»„åˆä¸è¿‡æ¸¡"></a>åŠ¨ä½œç»„åˆä¸è¿‡æ¸¡</h2><p>AMPçš„å¦ä¸€ä¸ªå¼ºå¤§ä¹‹å¤„æ˜¯ç»è¿‡å­¦ä¹ ä¹‹åå¯ä»¥ç»„åˆæ•°æ®é›†ä¸­çš„åŠ¨ä½œï¼Œä¹Ÿå¯ä»¥åœ¨å¤šä¸ªåŠ¨ä½œä¹‹é—´è‡ªåŠ¨è¿‡æ¸¡ã€‚æ¯”å¦‚æ•°æ®é›†ä¸­åªæœ‰ç‹¬ç«‹çš„è¡Œèµ°æˆ–å¥”è·‘è€Œæ²¡æœ‰ä»è¡Œèµ°åˆ°å¥”è·‘ã€ä»å¥”è·‘åˆ°è¡Œèµ°è¿™ç§ç»„åˆï¼Œä¸­é—´çš„è½¬æ¢è¿‡ç¨‹åˆ™ç”±ç­–ç•¥è‡ªå·±å­¦ä¹ ã€‚</p><p>è¿™ç§å¤šä¸ªåŠ¨ä½œçš„ç»„åˆéœ€è¦ç”¨æƒé‡æ¥æ§åˆ¶ï¼Œæ¯”å¦‚ä¸¾èµ·æ‰‹è¡Œèµ°ï¼Œå¦‚æœä¸¾æ‰‹çš„æƒé‡è¿‡å°ï¼Œåˆ™å‡ ä¹æ— æ³•è¡Œèµ°ï¼›å¦‚è¡Œèµ°çš„æƒé‡è¿‡å°ï¼Œåˆ™æ— æ³•ä¸¾æ‰‹ã€‚</p><h2 id="å‚è€ƒæ–‡çŒ®ï¼š"><a href="#å‚è€ƒæ–‡çŒ®ï¼š" class="headerlink" title="å‚è€ƒæ–‡çŒ®ï¼š"></a>å‚è€ƒæ–‡çŒ®ï¼š</h2><p><a href="https://www.youtube.com/watch?v=P38FZrbNHV4">https://www.youtube.com/watch?v=P38FZrbNHV4</a><br><a href="https://blog.csdn.net/weixin_41960890/article/details/123644185">https://blog.csdn.net/weixin_41960890/article/details/123644185</a><br><a href="https://zhuanlan.zhihu.com/p/503357084#ref_1">https://zhuanlan.zhihu.com/p/503357084#ref_1</a><br><a href="https://xbpeng.github.io/projects/AMP_Locomotion/index.html">https://xbpeng.github.io/projects/AMP_Locomotion/index.html</a><br><a href="https://xbpeng.github.io/projects/DeepMimic/index.html">https://xbpeng.github.io/projects/DeepMimic/index.html</a><br><a href="https://xbpeng.github.io/projects/AMP/index.html">https://xbpeng.github.io/projects/AMP/index.html</a><br><a href="https://arxiv.org/abs/2203.14912">https://arxiv.org/abs/2203.14912</a><br><a href="https://rofunc.readthedocs.io/en/latest/lfd/RofuncRL/AMP.html">https://rofunc.readthedocs.io/en/latest/lfd/RofuncRL/AMP.html</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="RL" scheme="https://www.robotsfan.com/categories/RL/"/>
    
    
    <category term="AMP" scheme="https://www.robotsfan.com/tags/AMP/"/>
    
  </entry>
  
  <entry>
    <title>å››è¶³æœºå™¨äººä¼ ç»Ÿæ§åˆ¶æ–¹æ³•å­¦ä¹ ç¬”è®°</title>
    <link href="https://www.robotsfan.com/posts/311d50f4.html"/>
    <id>https://www.robotsfan.com/posts/311d50f4.html</id>
    <published>2024-06-09T03:30:00.000Z</published>
    <updated>2024-07-17T03:05:25.848Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å››è¶³æœºå™¨äººä¼ ç»Ÿæ§åˆ¶æ–¹æ³•å­¦ä¹ ç¬”è®°"><a href="#å››è¶³æœºå™¨äººä¼ ç»Ÿæ§åˆ¶æ–¹æ³•å­¦ä¹ ç¬”è®°" class="headerlink" title="å››è¶³æœºå™¨äººä¼ ç»Ÿæ§åˆ¶æ–¹æ³•å­¦ä¹ ç¬”è®°"></a>å››è¶³æœºå™¨äººä¼ ç»Ÿæ§åˆ¶æ–¹æ³•å­¦ä¹ ç¬”è®°</h1><h2 id="è¿åŠ¨å­¦ä¸åŠ¨åŠ›å­¦"><a href="#è¿åŠ¨å­¦ä¸åŠ¨åŠ›å­¦" class="headerlink" title="è¿åŠ¨å­¦ä¸åŠ¨åŠ›å­¦"></a>è¿åŠ¨å­¦ä¸åŠ¨åŠ›å­¦</h2><h3 id="å•è…¿è¿åŠ¨å­¦"><a href="#å•è…¿è¿åŠ¨å­¦" class="headerlink" title="å•è…¿è¿åŠ¨å­¦"></a>å•è…¿è¿åŠ¨å­¦</h3><h4 id="æ­£è¿åŠ¨å­¦"><a href="#æ­£è¿åŠ¨å­¦" class="headerlink" title="æ­£è¿åŠ¨å­¦"></a>æ­£è¿åŠ¨å­¦</h4><p>ç›®æ ‡ï¼šå·²çŸ¥ä¸‰ä¸ªå…³èŠ‚çš„è§’åº¦ $(\theta_1,\theta_2,\theta_3)$ ï¼Œéœ€è¦æ±‚å‡ºè¶³ç«¯ä½ç½® $(x,y,z)$ </p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{T}_{01}&=\begin{bmatrix}\mathrm{rot}_x(\theta_1) & \boldsymbol{0}_{3\times1} \\\boldsymbol{0}_{3\times3} & 1\end{bmatrix}=\begin{bmatrix}1 & 0 & 0 & 0 \\0 & \cos(\theta_1) & -\sin(\theta_1) & 0 \\0 & \sin(\theta_1) & \cos(\theta_1) & 0 \\0 & 0 & 0 & 1\end{bmatrix}\\\boldsymbol{T}_{12}&=\begin{bmatrix}\mathrm{rot}_y(\theta_2) & \boldsymbol{0}_{3\times1} \\\boldsymbol{0}_{3\times3} & 1\end{bmatrix}=\begin{bmatrix}\cos(\theta_2) & 0 & \sin(\theta_2) & 0 \\0 & 1 & 0 & 0 \\-\sin(\theta_2) & 0 & \cos(\theta_2) & 0 \\0 & 0 & 0 & 1\end{bmatrix}\\\boldsymbol{T}_{23}&=\begin{bmatrix}\mathrm{rot}_y(\theta_3) & \left[\begin{matrix}0\\l_1\\l_2\end{matrix}\right] \\\boldsymbol{0}_{3\times3} & 1\end{bmatrix}=\begin{bmatrix}\cos(\theta_3) & 0 & \sin(\theta_3) & 0 \\0 & 1 & 0 & l_1 \\-\sin(\theta_3) & 0 & \cos(\theta_3) & l_2 \\0 & 0 & 0 & 1\end{bmatrix} \quad \begin{aligned} l_1 &= \left\{ \begin{aligned}-l_{abad}&,\text{right}\\l_{abad}&,\text{left}\end{aligned}\right. \\ l_2 &= -l_{hip}\end{aligned}\\\boldsymbol{p}_3 &= \begin{bmatrix}0\\0\\l_3\\1\end{bmatrix} \quad \begin{aligned}l_3=-l_{knee}\end{aligned}\end{aligned}</script><p>æ ¹æ®ä»¥ä¸Šå˜æ¢å³å¯æ±‚å‡ºè¶³ç«¯ä½ç½®ï¼š</p><script type="math/tex; mode=display">\begin{bmatrix}x_p\\y_p\\z_p\\1\end{bmatrix}=\begin{bmatrix}l_3\sin(\theta_1+\theta_2)+l_2\sin(\theta_2)\\-l_3\sin(\theta_1)\cos(\theta_2+\theta_3)+l_1\cos(\theta_1)-l_2\cos(\theta_2)\sin(\theta_1)\\l_3\cos(\theta_1)\cos(\theta_2+\theta_3)+l_1\sin(\theta_1)+l_2\cos(\theta_1)\cos(\theta_2)\\1\end{bmatrix}\tag{1}</script><h4 id="é€†è¿åŠ¨å­¦"><a href="#é€†è¿åŠ¨å­¦" class="headerlink" title="é€†è¿åŠ¨å­¦"></a>é€†è¿åŠ¨å­¦</h4><p>ç›®æ ‡ï¼šå·²çŸ¥è¶³ç«¯ä½ç½® $(x,y,z)$ ï¼Œéœ€è¦æ±‚å‡ºä¸‰ä¸ªå…³èŠ‚çš„è§’åº¦ $(\theta_1,\theta_2,\theta_3)$ </p><ol><li><p>æ±‚ $\theta_1$ </p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230831154919239.png" alt="image-20230831154919239" style="zoom:50%;"></p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{P}_0 &= \boldsymbol{R}_{01} \boldsymbol{P}_1\\\begin{bmatrix}y_p\\z_p\end{bmatrix}&=\begin{bmatrix}\cos(\theta_1)&-\sin(\theta_1)\\\sin(\theta_1)&\cos(\theta_1)\end{bmatrix}\begin{bmatrix}L\\-L\end{bmatrix}\end{aligned}</script><p>æ•´ç†å¾—</p><script type="math/tex; mode=display">\left\{\begin{aligned}y_p&=l_1\cos(\theta_1)+L\sin(\theta_1)\\z_p&=l_1\sin(\theta_1)-L\cos(\theta_1)\end{aligned}\right.\Rightarrow\left\{\begin{aligned}\frac{y_p}{\cos(\theta_1)}=l_1+L\tan(\theta_1)\\\frac{z_p}{\cos(\theta_1)}=l_1\tan(\theta_1)-L\end{aligned}\right.</script><p>ç”±äº $z_p \ne 0$ ï¼Œå¯ä»¥æ¨å‡º $\frac{y_p}{z_p}=\frac{l_1+L\tan(\theta_1)}{l_1\tan(\theta_1)-L}$ ï¼Œä»è€Œå¯ä»¥è§£å‡º $\tan(\theta_1)=\frac{z_pl_1+y_pL}{y_pl_1-z_pL}$ ï¼Œå³ $\theta_1=\arctan\left(\frac{z_pl_1+y_pL}{y_pl_1-z_pL}\right)$ </p></li><li><p>æ±‚ $\theta_3$ ï¼ˆä½™å¼¦å®šç†ï¼‰</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230831154952123.png" alt="image-20230831154952123" style="zoom:50%;"></p><p>ä»å›¾ä¸­å¯ä»¥å¾—</p><script type="math/tex; mode=display">\begin{aligned}\angle{AO_3P}&=\arccos\left(\frac{\left|\overrightarrow{O_3A}\right|^2+\left|\overrightarrow{O_3P}\right|^2-\left|\overrightarrow{AP}\right|^2}{2\left|\overrightarrow{O_3A}\right|\left|\overrightarrow{O_3P}\right|}\right) \quad \text{å…¶ä¸­}\left\{\begin{aligned}\left|\overrightarrow{AP}\right|&=\sqrt{x_p^2+y_p^2+z_p^2-l_1^2}\\\left|\overrightarrow{O_3A}\right|&=\sqrt{l_2}\\\left|\overrightarrow{O_3P}\right|&=\sqrt{l_3}\end{aligned}\right.\\&=\arccos\left(\frac{(l_1+l_2+l_3)-(x_p^2+y_p^2+z_p^2)}{2\sqrt{l_2l_3}}\right)\end{aligned}</script><p>åˆ™å¯æ±‚å‡º $\left|\theta_3\right|=\pi-\angle{AO_3P}$ ï¼Œé€‰å®šé€†æ—¶é’ˆä¸ºæ­£ï¼Œåˆ™ $\theta_3=\left|\theta_3\right|$ </p></li><li><p>æ±‚ $\theta_2$ </p><p>ç”±å‰æ–‡çš„æ­£è¿åŠ¨å­¦å…¬å¼ $(1)$ å¯å¾—ï¼š</p><script type="math/tex; mode=display">\left\{\begin{aligned}x_{p} &= \left(l_{3} \cos \theta_{3}+l_{2}\right) \sin \theta_{2}+l_{3} \sin \theta_{3} \cos \theta_{2}\\ y_{p} &= -l_{3} \sin \theta_{1} \cos \left(\theta_{2}+\theta_{3}\right)+l_{1} \cos \theta_{1}-l_{2} \cos \theta_{2} \sin \theta_{1}\\z_{p} &= l_{3} \cos \theta_{1} \cos \left(\theta_{2}+\theta_{3}\right)+l_{1} \sin \theta_{1}+l_{2} \cos \theta_{1} \cos \theta_{2}\end{aligned}\right.</script><p>å¯ä»¥æ±‚å‡º</p><script type="math/tex; mode=display">\begin{align}y_{p} \sin \theta_{1}-z_{p} \cos \theta_{1} & = -l_{3} \cos \left(\theta_{2}+\theta_{3}\right)\left(\sin ^{2} \theta_{1}+\cos ^{2} \theta_{1}\right)-l_{2} \cos \theta_{2}\left(\sin ^{2} \theta_{1}+\cos ^{2} \theta_{1}\right) \\ & = l_{3} \sin \theta_{3} \sin \theta_{2}-\left(l_{3} \cos \theta_{3}+l_{2}\right) \cos \theta_{2}\end{align}</script><p>åŒé™¤ $x_p$ </p><script type="math/tex; mode=display">\begin{aligned}\frac{y_{p} \sin \theta_{1}-z_{p} \cos \theta_{1}}{x_{p}} & = \frac{l_{3} \sin \theta_{3} \sin \theta_{2}-\left(l_{3} \cos \theta_{3}+l_{2}\right) \cos \theta_{2}}{\left(l_{3} \cos \theta_{3}+l_{2}\right) \sin \theta_{2}+l_{3} \sin \theta_{3} \cos \theta_{2}}\end{aligned}</script><p>ä»¤ $\left\{\begin{aligned}<br>a_1&amp;=y_p \sin \theta_1-z_p \cos \theta_1 \\<br>a_2&amp;=x_p \\<br>m_1&amp;=l_3 \sin \theta_3 \\<br>m_2&amp;=l_3 \cos \theta_3+l_2<br>\end{aligned}<br>\right.$ ï¼Œä¸Šå¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\frac{a_1}{a_2}&=\frac{m_1 \sin \theta_2-m_2 \cos \theta_2}{m_1 \cos \theta_2+m_2 \sin \theta_2} \\&=\frac{m_1 \tan \theta_2-m_2}{m_1+m_2 \tan \theta_2}\quad \end{aligned}</script><p>åŒé™¤ $\cos(\theta_2)$ å¯ä»¥è§£å¾—ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\tan(\theta_2)=\frac{a_1 m_1+a_2 m_2}{a_2 m_1-a_1 m_2}\end{aligned}</script><p>å³å¯æ±‚å‡º $\theta_2$ ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\theta_2=\arctan \left(\frac{a_1 m_1+a_2 m_2}{a_2 m_1-a_1 m_2}\right)\end{aligned}</script></li></ol><p>è‡³æ­¤å®Œæˆé€†è¿åŠ¨å­¦æ±‚è§£ã€‚</p><h4 id="é›…å¯æ¯”çŸ©é˜µ"><a href="#é›…å¯æ¯”çŸ©é˜µ" class="headerlink" title="é›…å¯æ¯”çŸ©é˜µ"></a>é›…å¯æ¯”çŸ©é˜µ</h4><p>å¯¹å‰æ–‡çš„æ­£è¿åŠ¨å­¦å…¬å¼ $(1)$ æ±‚å¯¼ï¼š</p><script type="math/tex; mode=display">\left\{\begin{aligned}\dot{x}_p= & 0 \cdot \dot{\theta}_1+\left(l_3 \cos \left(\theta_2+\theta_3\right)+l_2 \cos \theta_2\right) \cdot \dot{\theta}_2+l_3 \cos \left(\theta_2+\theta_3\right) \cdot \dot{\theta}_3 \\\dot{y}_p= & \left(-l_1 \sin \theta_1-l_2 \cos \theta_1 \cos \theta_2-l_3 \cos \theta_1 \cos \left(\theta_2+\theta_3\right)\right) \cdot \dot{\theta}_1+ \\& \left(l_2 \sin \theta_1 \sin \theta_2+l_3 \sin \theta_1 \sin \left(\theta_2+\theta_3\right)\right) \cdot \dot{\theta}_2 + l_3 \sin \theta_1 \sin \left(\theta_2+\theta_3\right) \cdot \dot{\theta}_3 \\\dot{z}_p= & \left(l_1 \cos \theta_1-l_2 \sin \theta_1 \cos \theta_2-l_3 \sin \theta_1 \cos \left(\theta_2+\theta_3\right)\right) \cdot \dot{\theta}_1+ \\& \left(-l_2 \cos \theta_1 \sin \theta_2-l_3 \cos \theta_1 \sin \left(\theta_2+\theta_3\right)\right) \cdot \dot{\theta}_2+\left(-l_3 \cos \theta_1 \sin \left(\theta_2+\theta_3\right)\right) \cdot \dot{\theta}_3\end{aligned}\right.</script><p>æ•´ç†æˆçŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\begin{bmatrix}\dot{x}_{p}\\ \dot{y}_{p}\\ \dot{z}_{p}\end{bmatrix}=\begin{bmatrix}J_{11} & J_{12} & J_{13}\\ J_{21} & J_{22} & J_{23}\\ J_{31} & J_{32} & J_{33}\end{bmatrix}\cdot\begin{bmatrix}\dot{\theta}_1\\ \dot{\theta}_2\\ \dot{\theta}_3\end{bmatrix}=\boldsymbol{J}\cdot\begin{bmatrix}\ddot{\theta}_1\\ \dot{\theta}_2\\ \dot{\theta}_3\end{bmatrix}\tag{2}</script><p>å¯¹å…¶æ±‚é€†å³å¯å¾—åˆ°é€†é›…å¯æ¯”</p><script type="math/tex; mode=display">\begin{bmatrix}\dot{\theta_1}\\\dot{\theta_2}\\\dot{\theta_3}\end{bmatrix}=\boldsymbol{J}^{-1}\begin{bmatrix}\dot{x}_p\\\dot{y}_p\\\dot{z}_p\end{bmatrix}\tag{3}</script><h3 id="å•è…¿é™åŠ›å­¦"><a href="#å•è…¿é™åŠ›å­¦" class="headerlink" title="å•è…¿é™åŠ›å­¦"></a>å•è…¿é™åŠ›å­¦</h3><p>å½“æœºå™¨äººè…¿éƒ¨é™æ­¢äºåœ°é¢ï¼Œå…¶å…³èŠ‚åŠ›çŸ© $\boldsymbol{\tau}=\begin{bmatrix}\tau_1\\\tau_2\\\tau_3\end{bmatrix}$ ï¼Œè¶³ç«¯å¯¹åœ°é¢çš„ä½œç”¨åŠ› $\boldsymbol{F}=\begin{bmatrix}F_x\\F_y\\F_z\end{bmatrix}$ </p><p>å¯ä»¥å¾—åˆ°å…¶å…³ç³»</p><script type="math/tex; mode=display">\tau_1\dot{\theta_1}+\tau_2\dot{\theta_2}+\tau_3\dot{\theta_3}=F_x\dot{x_p}+F_y\dot{y_p}+F_z\dot{z_p}</script><p>æ•´ç†æˆçŸ©é˜µå½¢å¼</p><script type="math/tex; mode=display">\begin{aligned}\begin{bmatrix}\tau_1&\tau_2&\tau_3\end{bmatrix}\begin{bmatrix}\dot{\theta}_1\\\dot{\theta}_2\\\dot{\theta}_3\end{bmatrix}&=\begin{bmatrix}F_{x}&F_{y}&F_{z}\end{bmatrix}\begin{bmatrix}\dot{x}_{p}\\\dot{y}_{p}\\\dot{z}_{p}\end{bmatrix}\\\boldsymbol{\tau}^T\cdot\dot{\boldsymbol{\theta}}&=\boldsymbol{F}^T\cdot \boldsymbol{J}\cdot\dot{\boldsymbol{\theta}}\\\end{aligned}</script><p>åˆ™å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\boldsymbol{\tau}=\boldsymbol{J}^T\cdot \boldsymbol{F}</script><p>åŒæ ·ä¹Ÿå¯ä»¥é€šè¿‡å…³èŠ‚åŠ›çŸ©å¾—åˆ°è¶³ç«¯å¯¹åœ°é¢çš„åŠ›</p><script type="math/tex; mode=display">\boldsymbol{F}=\boldsymbol{J}^{-T}\cdot \boldsymbol{\tau}</script><p>åœ°é¢å¯¹è¶³ç«¯çš„åŠ› $\boldsymbol{F}â€™=-\boldsymbol{F}$ </p><h3 id="å››è¶³è¿åŠ¨å­¦"><a href="#å››è¶³è¿åŠ¨å­¦" class="headerlink" title="å››è¶³è¿åŠ¨å­¦"></a>å››è¶³è¿åŠ¨å­¦</h3><h4 id="æ”¹å˜å§¿æ€"><a href="#æ”¹å˜å§¿æ€" class="headerlink" title="æ”¹å˜å§¿æ€"></a>æ”¹å˜å§¿æ€</h4><p>ç›®æ ‡ï¼šå·²çŸ¥æœºèº«å§¿æ€ï¼Œæ±‚å…³èŠ‚è§’åº¦</p><p>ä»¤è¶³ç«¯é™æ­¢åœ¨åœ°é¢ä¸Šï¼Œå°†å³å‰è…¿ $P_0$ ç‚¹è®¾ä¸ºä¸–ç•Œåæ ‡ç³» $\{s\}$ çš„åŸç‚¹ï¼Œåˆ™ $\boldsymbol{p}_{si}$ ä¸ºå¸¸é‡</p><p>å½“ $\{s\}$ å’Œ $\{b\}$ å¹³è¡Œï¼Œæ­¤æ—¶ $\boldsymbol{R}_{sb}=\boldsymbol{I}$ ï¼Œå¯ä»¥å¾—åˆ°å››æ¡è…¿ç›¸å¯¹äºä¸–ç•Œåæ ‡ç³»çš„ä½ç½®ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{p}_{si}&=\boldsymbol{R}_{sb}\cdot[\boldsymbol{p}_{bi}(0)-\boldsymbol{p}_{b0}(0)]\\&=\boldsymbol{I}\cdot[\boldsymbol{p}_{bi}(0)-\boldsymbol{p}_{b0}(0)]\\&=\boldsymbol{p}_{bi}(0)-\boldsymbol{p}_{b0}(0)\end{aligned}</script><p>åœ¨åˆå§‹çŠ¶æ€ä¸‹ï¼Œä¸–ç•Œåæ ‡ç³»åˆ°æœºèº«åæ ‡ç³»çš„é½æ¬¡å˜æ¢çŸ©é˜µä¸º</p><script type="math/tex; mode=display">\boldsymbol{T}_{sb}(0)=\left[\begin{matrix}{\boldsymbol{R}_{sb}}&{\boldsymbol{O}_{s}}\\{\boldsymbol{0}_{1\times3}}&{1}\\\end{matrix}\right]=\left[\begin{matrix}{\boldsymbol{I}_{3}}&{-\boldsymbol{p}_{b0}(0)}\\{\boldsymbol{0}_{1\times3}}&{0}\\\end{matrix}\right]</script><p>æ­¤æ—¶æ”¹å˜æœºèº«å§¿æ€ï¼Œå°†å…¶åˆ†è§£ä¸ºå¹³ç§»ä¸æ—‹è½¬ $\left\{<br>\begin{aligned}<br>\text{å¹³ç§»}&amp;\quad p_d\\<br>\text{æ—‹è½¬}&amp;\quad rpy(\alpha\beta\gamma)<br>\end{aligned}<br>\right.$ </p><script type="math/tex; mode=display">\boldsymbol{T}_{sb}=\left[\begin{matrix}\boldsymbol{R}_{z}(\alpha)\boldsymbol{R}_{y}(\beta)\boldsymbol{R}_{x}(\gamma)&-\boldsymbol{p}_{b0}(0)+\boldsymbol{p}_{d}\\\boldsymbol{0}_{1\times3}&1\end{matrix}\right]</script><p>å³å¯æ±‚å‡ºæœºèº«åæ ‡ç³»ä¸‹çš„è¶³ç«¯åæ ‡</p><script type="math/tex; mode=display">\boldsymbol{p}_{bi}=\boldsymbol{T}_{bs}\cdot \boldsymbol{p}_{si}=\boldsymbol{T}_{sb}^{-1}\cdot \boldsymbol{p}_{si}</script><p>ç»è¿‡å¹³ç§»å¯ä»¥å¾—åˆ°æœºå™¨äººå•è…¿åæ ‡ç³»ä¸‹çš„è¶³ç«¯åæ ‡ï¼Œé€šè¿‡è¿åŠ¨å­¦é€†è§£å¯ä»¥å¾—åˆ°å…³èŠ‚è§’åº¦ã€‚</p><h4 id="è¶³ç«¯é€Ÿåº¦"><a href="#è¶³ç«¯é€Ÿåº¦" class="headerlink" title="è¶³ç«¯é€Ÿåº¦"></a>è¶³ç«¯é€Ÿåº¦</h4><p>è¶³ç«¯é€Ÿåº¦ç”±ä¸¤æ–¹é¢å åŠ äº§ç”Ÿ</p><ol><li>å…³èŠ‚è½¬åŠ¨äº§ç”Ÿçš„è¶³ç«¯é€Ÿåº¦ï¼Œåˆ©ç”¨é›…å¯æ¯”çŸ©é˜µå¯ä»¥æ±‚å¾—ï¼š $\boldsymbol{v}_{bj}=\boldsymbol{J}\dot{\boldsymbol{\theta}}$ </li><li>æœºèº«ç§»åŠ¨æˆ–æ—‹è½¬äº§ç”Ÿçš„è¶³ç«¯é€Ÿåº¦ï¼š $\boldsymbol{v}_{be}$ ï¼Œæ­¤é¡¹å¾…æ±‚</li></ol><p>é¦–å…ˆè€ƒè™‘åˆšä½“ä¸Šä¸€ç‚¹çš„é€Ÿåº¦ä¸åŠ é€Ÿåº¦ã€‚åœ¨åˆšä½“å¹³ç§»æˆ–è½¬åŠ¨æ—¶ï¼Œå¯¹äºåˆšä½“ä¸Šä½ç½®ä¸º $\boldsymbol{p}$ çš„è´¨ç‚¹$ P$ ï¼Œåªè€ƒè™‘å¹³ç§»ä¸è€ƒè™‘æ—‹è½¬ï¼Œå³åªéœ€è¦ç ”ç©¶é€Ÿåº¦ $\dot{\boldsymbol{p}}$ ä¸åŠ é€Ÿåº¦ $\ddot{\boldsymbol{p}}$ ã€‚</p><p>è®¾åˆšä½“åœ¨ $\{b\}$ ä¸­çš„å¹³ç§»é€Ÿåº¦ä¸º $\boldsymbol{v}_b$ ã€æ—‹è½¬é€Ÿåº¦ä¸º $\boldsymbol{\omega}_b$ ï¼Œå³åŸç‚¹ $\boldsymbol{p}_O$ çš„å¹³ç§»é€Ÿåº¦ä¸º $\boldsymbol{v}_b$ ã€‚åˆšä½“ä¸Šä½äº $\boldsymbol{p}_P$ çš„è´¨ç‚¹ä»¥ $\boldsymbol{v}_b$ å¹³ç§»ï¼Œä»¥ $\boldsymbol{\omega}_b$ ç»• $\boldsymbol{p}_O$ æ—‹è½¬ï¼Œåˆ™ï¼š</p><script type="math/tex; mode=display">\dot{\boldsymbol{p}}_P=\boldsymbol{v}_b+\boldsymbol{w}_b\times(\boldsymbol{p}_P-\boldsymbol{p}_O)=\boldsymbol{v}_b+[\boldsymbol{w}_b]_\times(\boldsymbol{p}_P-\boldsymbol{p}_O)</script><p>å¯¹ç­‰å¼ä¸¤è¾¹æ±‚å¯¼å¯å¾—ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\ddot{\boldsymbol{p}}_P&=\dot{\boldsymbol{v}}_b+[\dot{\boldsymbol{\omega}}_b]_\times(\boldsymbol{p}_P-\boldsymbol{p}_O)+[\boldsymbol{\omega}_b]_\times(\dot{\boldsymbol{p}}_P-\dot{\boldsymbol{p}}_O)\quad\text{å…¶ä¸­ }\dot{\boldsymbol{p}}_O=\boldsymbol{v}_b\\&=\dot{\boldsymbol{v}}_b+[\boldsymbol{\omega}_b]_\times(\boldsymbol{p}_P-\boldsymbol{p}_O)+[\boldsymbol{\omega}_b]_\times[\boldsymbol{\omega}_b]_\times(\boldsymbol{p}_P-\boldsymbol{p}_O)\end{aligned}</script><p>å½“å‰æ—¶åˆ»åŸç‚¹ä¸ $\{b\}$ é‡åˆï¼Œ$\boldsymbol{p}_O=\boldsymbol{0}$  ï¼Œåˆ™:</p><script type="math/tex; mode=display">\begin{aligned}\dot{\boldsymbol{p}}_P&=\boldsymbol{v}_b+[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_P\\\ddot{\boldsymbol{p}}_P&=\dot{\boldsymbol{v}}_b+[\dot{\boldsymbol{\omega}}_b]_\times \boldsymbol{p}_P+[\boldsymbol{\omega}_b]_\times[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_P\end{aligned}\tag{4}</script><p>å°†æœºå™¨äººè§†ä¸ºåˆšä½“ï¼Œè¶³ç«¯ç‰µè¿é€Ÿåº¦ä¸ºï¼šï¼ˆå¼ä¸­çš„bfBä»£è¡¨ï¼š{b}ä¸‹feet2bodyï¼‰</p><script type="math/tex; mode=display">\boldsymbol{v}_{be}=\boldsymbol{v}_b+[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_{bfB}</script><p>ç»“åˆå¼€å¤´çš„å åŠ ï¼Œ $\{s\}$ ä¸‹è¶³ç«¯çš„é€Ÿåº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{v}_{sf}&=\boldsymbol{R}_{sb}\left(\boldsymbol{v}_{be}+\boldsymbol{v}_{bj}\right)\\&=\boldsymbol{R}_{sb}\boldsymbol{v}_{b}+\boldsymbol{R}_{sb}[\boldsymbol{\omega}_{b}]_\times \boldsymbol{p}_{bfB}+J\dot{\theta})\\&=\boldsymbol{v}_{s}+\boldsymbol{R}_{sb}([\boldsymbol{\omega}_{b}]_\times \boldsymbol{p}_{bfB}+J\dot{\theta})\end{aligned}</script><p>ä½†å¼ä¸­çš„ $\boldsymbol{v}_s$ æ— æ³•æµ‹å¾—ã€‚</p><p> $\{s\}$ ä¸‹è¶³ç«¯ç›¸å¯¹äºæœºèº«çš„é€Ÿåº¦å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\boldsymbol{v}_{sfB}=\boldsymbol{v}_{sf}-\boldsymbol{v}_{s}=\boldsymbol{R}_{sb}([\boldsymbol{\omega}_{b}]_\times \boldsymbol{p}_{bfB}+J\dot{\theta})\tag{5}</script><h3 id="å››è¶³åŠ¨åŠ›å­¦"><a href="#å››è¶³åŠ¨åŠ›å­¦" class="headerlink" title="å››è¶³åŠ¨åŠ›å­¦"></a>å››è¶³åŠ¨åŠ›å­¦</h3><h4 id="å•åˆšä½“åŠ¨åŠ›å­¦"><a href="#å•åˆšä½“åŠ¨åŠ›å­¦" class="headerlink" title="å•åˆšä½“åŠ¨åŠ›å­¦"></a>å•åˆšä½“åŠ¨åŠ›å­¦</h4><p>å¯¹äºå¯†åº¦ $\rho(x,y,z)$ ï¼Œè´¨é‡ $m=\int_z\int_y\int_x\rho(x,y,z)\mathrm{d}x\mathrm{d}y\mathrm{d}z=\int_B\rho\mathrm{d}V$ çš„å•åˆšä½“ï¼Œå°†ç‰©ä½“åæ ‡ç³» $\{b\}$ å»ºåœ¨é‡å¿ƒä¸Šï¼Œåˆ™ $\int_{B}\rho \boldsymbol{p}_{b}\mathrm{d}V=\boldsymbol{0}_{3\times1}$ ï¼Œ $\int_{B}\rho [\boldsymbol{p}_{b}]\mathrm{d}V=\boldsymbol{0}_{3\times3}$ ã€‚</p><p>æ ¹æ®ç‰›äºŒå®šå¾‹ $F=ma$ ä¸å¼ $(4)$ ï¼Œå¯ä»¥æ±‚å‡ºé‡å¿ƒå¤„æ‰€å—çš„åˆå¤–åŠ› $\boldsymbol{f}_b$ ï¼š</p><script type="math/tex; mode=display">\boldsymbol{f}_{b}=\int_{B}\rho \ddot{\boldsymbol{p}}_{b}\mathrm{d}V=\int_{B}\rho(\dot{\boldsymbol{v}}_{b}+[\dot{\boldsymbol{\omega}}_{b}]_\times \boldsymbol{p}_{b}+[\boldsymbol{\omega}_b]_\times[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_{b})\mathrm{d}V</script><p>æå–å¸¸é‡ $\boldsymbol{v}_b$ å’Œ $\boldsymbol{\omega}_b$ ï¼š</p><script type="math/tex; mode=display">\boldsymbol{f}_{b}=\dot{\boldsymbol{v}}_{b}\int_{B}\rho \mathrm{d}V+[\dot{\boldsymbol{\omega}}_{b}]_\times \int_{B}\rho \boldsymbol{p}_{b}dV+[\boldsymbol{\omega}_{b}]_\times [\boldsymbol{\omega}_{b}]_\times \int_{B}\rho \boldsymbol{p}_{b}\mathrm{d}V</script><p>ç¬¬ä¸€é¡¹ä¸­çš„ $\int_{B}\rho \mathrm{d}V=m$ ï¼Œ $\int_{B}\rho \boldsymbol{p}_{b}dV=0$ ï¼Œåˆ™ä¸Šå¼æ•´ç†ä¸ºï¼š</p><script type="math/tex; mode=display">\boldsymbol{f}_b = m \dot{\boldsymbol{v}}_b\tag{6}</script><p>è®¡ç®—é‡å¿ƒå¤„çš„åˆå¤–åŠ›çŸ©ï¼ˆåŠ›çŸ©çš„è®¡ç®—å…¬å¼ä¸º $\boldsymbol{M}=\boldsymbol{p}\times \boldsymbol{f}$ ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{M}_b&=\int_{B}\left[\boldsymbol{p}_{b}\right]_\times\mathrm{d}\boldsymbol{f}=\int_{B}\left[\boldsymbol{p}_{b}\right]_\times\rho \ddot{\boldsymbol{p}}_{b}\mathrm{d}V\\&=\underset{â‘ }{\underline{\int_{B}\rho [\boldsymbol{p}_{b}]_\times\mathrm{d}V\cdot \dot{v}_{b}}}+\underset{â‘¡}{\underline{\int_{B}\rho[\boldsymbol{p}_{b}]_\times[\dot{\boldsymbol{\omega}}_{b}]_\times \boldsymbol{p}_{b}\mathrm{d}V}}+\underset{â‘¢}{\underline{\int_{B}\rho[\boldsymbol{p}_{b}]_\times[\boldsymbol{\omega}_b]_\times[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_{b}\mathrm{d}V}}\end{aligned}</script><p>åˆ†å¼€çœ‹è¿™ä¸‰é¡¹ï¼š</p><ol><li><p>å¯¹äºå¼â‘ ï¼š</p><script type="math/tex; mode=display">\int_{B}\rho [\boldsymbol{p}_{b}]_\times\mathrm{d}V=0</script></li><li><p>å¯¹äºå¼â‘¡ï¼šï¼ˆ $\boldsymbol{a} \times \boldsymbol{b} = -\boldsymbol{b} \times \boldsymbol{a}$ ï¼‰</p><script type="math/tex; mode=display">\begin{aligned} \int_{B}\rho[\boldsymbol{p}_b]_\times[\dot{\boldsymbol{\omega}}_b]_\times \boldsymbol{p}_b\mathrm{d}V&=-\int_{B}\rho[\boldsymbol{p}_b]_\times[\boldsymbol{p}_b]_\times\dot{\boldsymbol{\omega}}_b\mathrm{d}V\\ &=\underline{\left(-\int_{B}\rho[\boldsymbol{p}_b]_\times[\boldsymbol{p}_b]_\times\mathrm{d}V\right)}\cdot\dot{\boldsymbol{\omega}}_b\\ &=\underline{\boldsymbol{I}_b}\dot{\boldsymbol{\omega}}_b \end{aligned}</script><p> å®šä¹‰åˆšä½“æƒ¯æ€§å¼ é‡ $\boldsymbol{I}_b=-\int_{B}\rho[\boldsymbol{p}_b]_\times[\boldsymbol{p}_b]_\times\mathrm{d}V$ </p></li><li><p>å¯¹äºå¼â‘¢ï¼šï¼ˆ $[\boldsymbol{a}]_\times[\boldsymbol{b}]_\times \boldsymbol{c}=(\boldsymbol{a}^{T}\boldsymbol{c})\boldsymbol{b}-(\boldsymbol{a}^{T}\boldsymbol{b})\boldsymbol{c}$ ï¼Œ $\boldsymbol{a}\times \boldsymbol{a}=[\boldsymbol{a}]_\times \boldsymbol{a}=\boldsymbol{0}$ ï¼‰</p><script type="math/tex; mode=display">\begin{aligned}\int_{\mathcal{B}}\rho[\boldsymbol{p}_b]_\times[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b\mathrm{d}V&=\int_{\mathcal{B}}\rho[\boldsymbol{p}_b]_\times\left[(\boldsymbol{\omega}_b^T\boldsymbol{p}_b)\boldsymbol{\omega}_b-(\boldsymbol{\omega}_b^T\boldsymbol{\omega}_b)\boldsymbol{p}_b\right]\mathrm{d}V\\&=\int_{\mathcal{B}}\rho[(\boldsymbol{\omega}_b^T\boldsymbol{p}_b)[\boldsymbol{p}_b]_\times\boldsymbol{\omega}_b-(\boldsymbol{\omega}_b^T\boldsymbol{\omega}_b)[\boldsymbol{p}_b]_\times \boldsymbol{p}_b]\mathrm{d}V\\&=\int_{\mathcal{B}}\rho[(\boldsymbol{\omega}_b^T\boldsymbol{p}_b)[\boldsymbol{p}_b]_\times\boldsymbol{\omega}_b-\boldsymbol{0}]\mathrm{d}V\\&=-\int_{\mathcal{B}}\rho[(\boldsymbol{\omega}_b^T\boldsymbol{p}_b)[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b-\boldsymbol{0}]\mathrm{d}V\\&=-\int_B\rho[(\boldsymbol{\omega}_b+\boldsymbol{p}_b)[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b-(\boldsymbol{p}_b^T\boldsymbol{p}_b)[\boldsymbol{\omega}_b]_\times \boldsymbol{\omega}_b]\mathrm{d}V\\&=-\int_B\rho[\boldsymbol{\omega}_b]_\times[(\boldsymbol{\omega}_b^T\boldsymbol{p}_b)\boldsymbol{p}_b-(\boldsymbol{p}_b^T\boldsymbol{p}_b)\boldsymbol{\omega}_b]\mathrm{d}V\\&=-\int_{B}\rho[\boldsymbol{\omega}_b]_\times[\boldsymbol{p}_b]_\times[\boldsymbol{p}_b]_\times\boldsymbol{\omega}_b\mathrm{d}V\\&=[\boldsymbol{\omega}_b]_\times\left(\underline{-\int_{B}\rho[\boldsymbol{p}_b]_\times[\boldsymbol{p}_b]_\times\mathrm{d}V}\right)\boldsymbol{\omega}_b\\&=[\boldsymbol{\omega}_b]_\times\underline{\boldsymbol{I}_{b}}\boldsymbol{\omega}_b\end{aligned}</script><p>å€’æ•°ç¬¬äºŒé¡¹çš„ä¸‹åˆ’çº¿éƒ¨åˆ†å³ä¸ºæƒ¯æ€§å¼ é‡ã€‚</p></li></ol><p>ç»¼ä¸Šå¯ä»¥å¾—åˆ°æ—‹è½¬åˆšä½“çš„æ¬§æ‹‰æ–¹ç¨‹ï¼š</p><script type="math/tex; mode=display">M_b=\boldsymbol{I}_{b}\dot{\boldsymbol{\omega}}_{b}+[\boldsymbol{\omega}_{b}]_\times \boldsymbol{I}_{b}\boldsymbol{\omega}_{b}\tag{7}</script><p>ä¸Šå¼ä¸­çš„æƒ¯æ€§å¼ é‡ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{I}_{b}& =-\int_{B}\rho[\boldsymbol{p}_{b}]_\times[\boldsymbol{p}_{b}]_\times\mathrm{d}V  \\&=-\int_{B}\rho\left[\begin{matrix}{0}&{-p_{z}}&{p_{y}}\\{p_{z}}&{0}&{-p_{x}}\\{-p_{y}}&{p_{x}}&{0}\\\end{matrix}\right]\left[\begin{matrix}{0}&{-p_{z}}&{p_{y}}\\{p_{z}}&{0}&{-p_{x}}\\{-p_{y}}&{p_{x}}&{0}\\\end{matrix}\right]\mathrm{d}V \\&=\int_{B}\rho\left[\begin{matrix}{p_{y}^{2}+p_{z}^{2}}&{-p_{x}p_{y}}&{-p_{x}p_{z}}\\{-p_{x}p_{y}}&{p_{x}^{2}+p_{z}^{2}}&{-p_{y}p_{z}}\\{-p_{x}p_{z}}&{-p_{y}p_{z}}&{p_{x}^{2}+p_{y}^{2}}\\\end{matrix}\right]\mathrm{d}V \\&=\begin{bmatrix}I_{xx}&I_{xy}&I_{xz}\\I_{xy}&I_{yy}&I_{yz}\\I_{xz}&I_{yz}&I_{zz}\end{bmatrix}\end{aligned}</script><p>å³å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç»“è®ºã€‚å¯ä»¥è®¡ç®—å½¢çŠ¶ä¸è§„åˆ™ã€å¯†åº¦ä¸å‡åŒ€çš„ç‰©ä½“ã€‚</p><script type="math/tex; mode=display">\begin{cases}\boldsymbol{I}_{xx}=\int_{B}\rho\left(p_y^2+p_z^2\right)\mathrm{d}V\\\boldsymbol{I}_{yy}=\int_{B}\rho\left(p_x^2+p_z^2\right)\mathrm{d}V\\\boldsymbol{I}_{zz}=\int_{B}\rho\left(p_x^2+p_y^2\right)\mathrm{d}V\\\boldsymbol{I}_{xy}=-\int_{B}\rho p_xp_y\mathrm{d}V\\\boldsymbol{I}_{xz}=-\int_{B}\rho p_xp_z\mathrm{d}V\\\boldsymbol{I}_{yz}=-\int_{B}\rho p_yp_z\mathrm{d}V\end{cases}</script><p>ä¾‹å¦‚å¯¹äºé•¿æ–¹ä½“ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230831155100793.png" alt="image-20230831155100793" style="zoom:50%;"></p><script type="math/tex; mode=display">\boldsymbol{I}_b=\frac1{12}\begin{bmatrix}m(\omega^2+h^2)&0&0\\0&m(l^2+h^2)&0\\0&0&m(l^2+\omega^2)\end{bmatrix}</script><p>åœ¨æœºèº«åæ ‡ç³»ä¸­ï¼Œ $\boldsymbol{I}_b$ ä¸ºå¸¸é‡ï¼ˆåªä¸å½¢çŠ¶ã€å¯†åº¦åˆ†å¸ƒæœ‰å…³ï¼‰ï¼Œåˆšä½“æ—‹è½¬åä¸–ç•Œåæ ‡ç³»ä¸‹çš„ $\boldsymbol{I}_s$ ä¼šæ”¹å˜ã€‚</p><h4 id="å•åˆšä½“åŠ¨èƒ½"><a href="#å•åˆšä½“åŠ¨èƒ½" class="headerlink" title="å•åˆšä½“åŠ¨èƒ½"></a>å•åˆšä½“åŠ¨èƒ½</h4><p>ç”±å¼ $(4)$ ï¼Œå¯ä»¥å¾—åˆ°åˆšä½“æ•´ä½“çš„åŠ¨èƒ½ï¼šï¼ˆ $v_x^2+v_y^2+v_z^2=\boldsymbol{v}^T\boldsymbol{v}$ ï¼‰</p><script type="math/tex; mode=display">\begin{aligned}K&=\int_B\frac{1}{2}\rho \boldsymbol{v}^T\boldsymbol{v}\mathrm{d}V\\&=\frac12\int_B\rho(\boldsymbol{v}_b+[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b)^T(\boldsymbol{v}_b+[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b)\mathrm{d}V\\&=\frac12\int_B\rho(\boldsymbol{v}_b^T+\boldsymbol{p}_b^T[\boldsymbol{\omega}_b]_\times^T)\left(\boldsymbol{v}_b+[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b\right)\mathrm{d}V\\&=\underset{â‘ }{\underline{\frac12\int_B\rho \underset{ä¸\boldsymbol{v}_bæœ‰å…³}{\underline{\boldsymbol{v}_b^T\boldsymbol{v}_b}}\mathrm{d}V}}+\underset{â‘¡}{\underline{\frac12\boldsymbol{v}_b^T[\boldsymbol{\omega}_b]_\times\underset{0}{\underline{\int _B\rho \boldsymbol{p}_b\mathrm{d}V}}}}+\underset{â‘¢}{\underline{\frac12\underset{0}{\underline{\int_B\rho \boldsymbol{p}_b^T\mathrm{d}V}}[\boldsymbol{\omega}_b]_\times^T\boldsymbol{v}_b}}+\underset{â‘£}{\underline{\frac12\int_B\rho \boldsymbol{p}_b^T\underset{ä¸\boldsymbol{\omega}_bæœ‰å…³}{\underline{[\boldsymbol{\omega}_b]_\times^T[\boldsymbol{\omega}_b]_\times}}\boldsymbol{p}_b\mathrm{d}V}}\end{aligned}</script><p>åˆ†å¼€çœ‹è¿™å››é¡¹ï¼š</p><ol><li><p>å¼â‘¡ã€â‘¢ä¸º0</p></li><li><p>å¼â‘ ä¸ $\boldsymbol{v}_b$ æœ‰å…³ï¼Œå®šä¹‰ä¸ºç§»åŠ¨åŠ¨èƒ½ $K_m$ </p><script type="math/tex; mode=display">\begin{aligned}K_{m}=& \frac{1}{2}\int_{B}\rho \boldsymbol{v}_{b}^{\mathrm{T}}\boldsymbol{v}_{b}\:\mathrm{d}V  \\=& \frac{1}{2}\int_{B}\rho\:\mathrm{d}V\boldsymbol{v}_{b}^{\mathrm{T}}\boldsymbol{v}_{b}  \\=& \frac{1}{2}m\boldsymbol{v}_{b}^{\mathrm{T}}\boldsymbol{v}_{b} \end{aligned}</script></li><li><p>å¼â‘¢ä¸ $\boldsymbol{\omega}_b$ æœ‰å…³ï¼Œå®šä¹‰ä¸ºè½¬åŠ¨åŠ¨èƒ½ $K_t$ </p><script type="math/tex; mode=display">\begin{aligned}K_t&=\frac12\int_B\rho \boldsymbol{p}_b^T[\boldsymbol{\omega}_b]_\times^T[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b\mathrm{d}V\\&=-\frac12\int_B\rho \boldsymbol{p}_b^T[\boldsymbol{\omega}_b]_\times[\boldsymbol{\omega}_b]_\times \boldsymbol{p}_b\mathrm{d}V\\&=-\frac{1}{2}\int_{B}\rho \boldsymbol{p}_{b}^{T}[(\boldsymbol{\omega}_{b}^{T}\boldsymbol{p}_{b})\boldsymbol{\omega}_{b}-(\boldsymbol{\omega}_{b}^{T}\boldsymbol{\omega}_{b})\boldsymbol{p}_{b}]dV \\&=-\frac{1}{2}\int_{B}\rho [(\boldsymbol{\omega}_{b}^{T}\boldsymbol{p}_{b})(\boldsymbol{p}_{b}^{T}\boldsymbol{\omega}_{b})-(\boldsymbol{\omega}_{b}^{T}\boldsymbol{\omega}_{b})(\boldsymbol{p}_{b}^{T}\boldsymbol{p}_{b})]dV \\&=-\frac{1}{2}\int_{B}\rho [(\boldsymbol{p}_{b}^{T}\boldsymbol{\omega}_{b})(\boldsymbol{\omega}_{b}^{T}\boldsymbol{p}_{b})-(\boldsymbol{p}_{b}^{T}\boldsymbol{p}_{b})(\boldsymbol{\omega}_{b}^{T}\boldsymbol{\omega}_{b})]dV \\&=-\frac{1}{2}\int_{B}\rho \boldsymbol{\omega}_{b}^{T}\left[(\boldsymbol{p}_{b}^{T}\boldsymbol{\omega}_{b})\boldsymbol{p}_{b}-(\boldsymbol{p}_{b}^{T}\boldsymbol{p}_{b})\boldsymbol{\omega}_{b}\right]dV \\&=\frac{1}{2}\boldsymbol{\omega}_{b}^{T}\int_{B}-\rho[\boldsymbol{p}_{b}]_\times[\boldsymbol{p}_{b}]_\times\boldsymbol{\omega}_{b}dV \\&=\frac{1}{2}\boldsymbol{\omega}_b^{T}\boldsymbol{I}_{b}\boldsymbol{\omega}_b\end{aligned}</script><p>åœ¨ä¸åŒåæ ‡ç³»ä¸‹ï¼Œåˆšä½“çš„è½¬åŠ¨åŠ¨èƒ½ $K_t$ ç›¸ç­‰ã€‚åˆç”± $\boldsymbol{\omega}_{b}=\boldsymbol{R}_{bs}\boldsymbol{\omega}_{s}$ ï¼Œæ•…ï¼š</p><script type="math/tex; mode=display">\begin{aligned}K_{st}& =K_{bt}  \\\frac{1}{2}\boldsymbol{\omega}_{s}^{\mathrm{T}}\boldsymbol{I}_{s}\boldsymbol{\omega}_{s}& =\frac12\boldsymbol{\omega}_b^\mathrm{T}\boldsymbol{I}_b\boldsymbol{\omega}_b  \\\boldsymbol{\omega}_{s}^{\mathrm{T}}\boldsymbol{I}_{s}\boldsymbol{\omega}_{s}& =(\boldsymbol{R}_{bs}\boldsymbol{\omega}_{s})^{\mathrm{T}}\boldsymbol{I}_{b}(\boldsymbol{R}_{bs}\boldsymbol{\omega}_{s})  \\\boldsymbol{\omega}_{s}^{\mathrm{T}}\boldsymbol{I}_{s}\boldsymbol{\omega}_{s}& =\boldsymbol{\omega}_{s}^{\mathrm{T}}(\boldsymbol{R}_{sb}\boldsymbol{I}_{b}\boldsymbol{R}_{sb}^{\mathrm{T}})\boldsymbol{\omega}_{s} \\\boldsymbol{I}_{s}&=\boldsymbol{R}_{sb}\boldsymbol{I}_{b}\boldsymbol{R}_{sb}^\mathrm{T}\end{aligned}</script><p>ç”±æ­¤å¯ä»¥å¾—åˆ°ä¸–ç•Œåæ ‡ç³»ä¸‹åˆšä½“çš„æƒ¯æ€§å¼ é‡ï¼Œè¿™å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è¢«ç”¨åˆ°ã€‚</p></li></ol><h4 id="å››è¶³åŠ¨åŠ›å­¦-1"><a href="#å››è¶³åŠ¨åŠ›å­¦-1" class="headerlink" title="å››è¶³åŠ¨åŠ›å­¦"></a>å››è¶³åŠ¨åŠ›å­¦</h4><p>ç›®æ ‡ï¼šæ‰¾åˆ°è¶³ç«¯åŠ›ä¸æœºå™¨äººè¿åŠ¨çš„è”ç³»ã€‚</p><p>ç”±å¼ $(6)$ å’Œ $(7)$ å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\begin{cases}\boldsymbol{f}_b=m\dot{\boldsymbol{v}}_b\\\boldsymbol{M}_b=\boldsymbol{I}_b\dot{\boldsymbol{\omega}}_b+\underline{[\boldsymbol{\omega}_b]_\times \boldsymbol{I}_b\boldsymbol{\omega}_b}\end{cases}</script><p>ç”±äºå››è¶³æœºå™¨äººè¿åŠ¨æ—¶ä¸€èˆ¬ä¸ä¼šå¿«é€Ÿæ—‹è½¬ï¼Œä¸Šå¼ä¸­ $\boldsymbol{\omega}_b$ å¾ˆå°ï¼Œæ•…åˆ’çº¿éƒ¨åˆ†å¯ä»¥å¿½ç•¥ã€‚åˆ™ä¸Šå¼å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{cases}\boldsymbol{f}_b=m\dot{\boldsymbol{v}}_b\\\boldsymbol{M}_b=\boldsymbol{I}_b\dot{\boldsymbol{\omega}}_b\end{cases}</script><p>åœ¨ä¸–ç•Œåæ ‡ç³»ä¸­åŒæ ·æ»¡è¶³ä¸Šå¼ï¼Œå³ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{cases}\boldsymbol{f}_s=m\dot{\boldsymbol{v}}_s\\\boldsymbol{M}_s=\boldsymbol{I}_s\dot{\boldsymbol{\omega}}_s=\boldsymbol{R}_\mathrm{sb}\boldsymbol{I}_{b}\boldsymbol{R}_\mathrm{sb}^\mathrm{T}\dot{\boldsymbol{\omega}}_s\end{cases}</script><p>å…¶ä¸­ï¼Œåˆå¤–åŠ› $\boldsymbol{f}_s$ ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>é‡åŠ› $mg$ </li><li>è¶³ç«¯åŠ› $\boldsymbol{f}_{is}$ </li></ol><p>åˆåŠ›çŸ© $\boldsymbol{M}_s$ ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>é‡åŠ›ç©¿è¿‡é‡å¿ƒï¼ŒåŠ›çŸ©ä¸º $0$ </li><li>è¶³ç«¯åŠ›å¯¹é‡å¿ƒçš„åŠ›çŸ© $\boldsymbol{p}_{gi}\times \boldsymbol{f}_{is} = [\boldsymbol{p}_{gi}]\boldsymbol{f}_{is}$ </li></ol><p>åˆ™ï¼š</p><script type="math/tex; mode=display">\left\{\begin{aligned}&mg+\sum_{i=0}^3\boldsymbol{f}_{is}=m\dot{\boldsymbol{v}}_s\\&\sum_{i=0}^3[\boldsymbol{p}_{ig}]_\times \boldsymbol{f}_{is}=\boldsymbol{R}_{sb}\boldsymbol{I}_b\boldsymbol{R}_{sb}^\mathrm{T}\dot{\boldsymbol{\omega}}_s\end{aligned}\right.\tag{8}</script><p>æ•´ç†æˆçŸ©é˜µå½¢å¼</p><script type="math/tex; mode=display">\begin{bmatrix}\boldsymbol{I}&\boldsymbol{I}&\boldsymbol{I}&\boldsymbol{I}\\[\boldsymbol{p}_{g0}]_\times&[\boldsymbol{p}_{g1}]_\times&[\boldsymbol{p}_{g2}]_\times&[\boldsymbol{p}_{g3}]_\times\end{bmatrix}\begin{bmatrix}\boldsymbol{f}_{s0}\\\boldsymbol{f}_{s1}\\\boldsymbol{f}_{s2}\\\boldsymbol{f}_{s3}\end{bmatrix}=\begin{bmatrix}m(\dot{\boldsymbol{v}}_s-g)\\\boldsymbol{R}_{sb}\boldsymbol{I}_b\boldsymbol{R}_{sb}^\mathrm{T}\dot{\boldsymbol{\omega}}_s\end{bmatrix}</script><p>æ­¤æ—¶å®Œæˆäº†è¶³ç«¯åŠ›ä¸æœºå™¨äººè¿åŠ¨çš„è”ç³»ã€‚ä½†æ­¤æ—¶æ— æ³•è·å¾—æœºå™¨äººå§¿æ€ $\boldsymbol{R}_{sb}$ ï¼Œä¸”éœ€è¦çŸ¥é“æœºå™¨äººåœ¨ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ $\boldsymbol{v}_s$ ã€ $\boldsymbol{\omega}_s$ ã€‚è·å–è¿™äº›ä¿¡æ¯éœ€è¦ç”¨åˆ°ä¸‹ä¸€ç« çš„çŠ¶æ€ä¼°è®¡å™¨ã€‚</p><h2 id="çŠ¶æ€ä¼°è®¡å™¨"><a href="#çŠ¶æ€ä¼°è®¡å™¨" class="headerlink" title="çŠ¶æ€ä¼°è®¡å™¨"></a>çŠ¶æ€ä¼°è®¡å™¨</h2><p>çŠ¶æ€ä¼°è®¡å™¨æ˜¯å››è¶³æœºå™¨äººç³»ç»Ÿä¸­æ¯”è¾ƒé‡è¦çš„ä¸€ç¯èŠ‚ï¼Œé€šè¿‡çŠ¶æ€ä¼°è®¡å™¨å¯ä»¥è·å¾—å››è¶³æœºå™¨äººè´¨å¿ƒä½å§¿ï¼ˆä½ç½®å’Œå§¿æ€è§’ï¼‰åŠé€Ÿåº¦ã€‚å§¿æ€è§’å¯æ ¹æ®IMUé€šè¿‡åæ ‡å˜æ¢å¾—åˆ°ï¼›ä½ç½®å’Œé€Ÿåº¦éœ€è¦ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æˆ–å¡å°”æ›¼æ»¤æ³¢å™¨æ±‚å¾—ï¼Œæœ€ç»ˆå°†è´¨å¿ƒä½å§¿å’Œé€Ÿåº¦ä½œä¸ºæœºæ¢°ç‹—çš„MPC+WBCæ§åˆ¶å™¨åŠå•åˆšä½“åŠ¨åŠ›å­¦çš„åé¦ˆè¾“å…¥ï¼Œè¿›è€Œå½¢æˆäº†æ•´ä¸ªç³»ç»Ÿçš„é—­ç¯æ§åˆ¶ã€‚æœ¬ç« èŠ‚åˆ†åˆ«ä»‹ç»æœ€å°äºŒä¹˜ä¼°è®¡å’Œç¦»æ•£å¡å°”æ›¼æ»¤æ³¢å™¨è¿™ä¸¤ä¸ªä¼˜åŒ–æ–¹æ³•ã€‚</p><h3 id="æœ€å°äºŒä¹˜ä¸å¡å°”æ›¼æ»¤æ³¢"><a href="#æœ€å°äºŒä¹˜ä¸å¡å°”æ›¼æ»¤æ³¢" class="headerlink" title="æœ€å°äºŒä¹˜ä¸å¡å°”æ›¼æ»¤æ³¢"></a>æœ€å°äºŒä¹˜ä¸å¡å°”æ›¼æ»¤æ³¢</h3><p>åœ¨è®²çŠ¶æ€ä¼°è®¡å™¨ä¹‹å‰æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹æœ€å°äºŒä¹˜å’Œå¡å°”æ›¼æ»¤æ³¢çš„å…³ç³»ã€‚çº¿æ€§å›å½’æ˜¯ä¸€ç±»é—®é¢˜çš„æ¦‚å¿µï¼Œè€Œæœ€å°äºŒä¹˜ä¼°è®¡ã€æœ€å°å‡æ–¹è¯¯å·®ä¼°è®¡æ˜¯å‚æ•°ä¼°è®¡æ–¹æ³•ï¼Œæœ€å°äºŒä¹˜æ³•ã€Kalmanã€æ¢¯åº¦ä¸‹é™éƒ½æ˜¯å‚æ•°ä¼˜åŒ–æ–¹æ³•ã€‚<strong>æœ€å°äºŒä¹˜æ˜¯ä¼˜åŒ–æ–¹æ³•ä¸­çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå¡å°”æ›¼æ»¤æ³¢æ˜¯æœ€å°äºŒä¹˜æ³•çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µã€‚</strong> å¤å…¸æœ€å°äºŒä¹˜ä¸­ï¼Œå‡è®¾äº†æ¯ä¸€æ¬¡æµ‹é‡çš„æƒé‡ç›¸åŒï¼Œä½†äº‹å®ä¸Šè¿™æ ·å¹¶ä¸åˆç†ï¼Œåæ¥æ¼”åŒ–ä¸ºåŠ æƒæœ€å°äºŒä¹˜æ³•ï¼Œè‡³æ­¤æœ€å°äºŒä¹˜ä¼°è®¡æ‰€åšçš„éƒ½æ˜¯æ‰¹å¤„ç†ï¼ˆBatchï¼‰ï¼Œè¿™æ ·æ¯”è¾ƒå å†…å­˜ï¼Œä¸ç¬¦åˆåŠ¨æ€ç³»ç»ŸçŠ¶æ€ä¼°è®¡çš„éœ€è¦ï¼Œå³æ¯ä¸€æ¬¡æ›´æ–°è¾“å…¥æ—¶ï¼Œéƒ½è¦ä»æ–°è®¡ç®—ä¹‹å‰æ‰€æœ‰çš„è®°å½•å€¼ã€‚è€Œåï¼Œæå‡ºé€’æ¨æœ€å°äºŒä¹˜æ³•ï¼Œæ¨¡å‹å°±ä¸ç”¨æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—äº†ã€‚ä¸é€’å½’æœ€å°äºŒä¹˜ç›¸ä¼¼ï¼Œå¡å°”æ›¼æ»¤æ³¢åŠ å…¥äº†ç³»ç»Ÿå†…éƒ¨å˜åŒ–çš„è€ƒè™‘ã€‚å³åˆ©ç”¨process modelå¯¹ç³»ç»Ÿåœ¨ä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€è¿›è¡Œé¢„æµ‹ã€‚ å½“å¯¹äºç³»ç»Ÿä¸å¤Ÿäº†è§£æ—¶ï¼Œä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ¯”è¾ƒåˆé€‚ï¼Œè€Œå¯¹äºç³»ç»Ÿäº†è§£æ¯”è¾ƒå¤šæ—¶ï¼Œå¯ä»¥é‡‡ç”¨Kalmanæ»¤æ³¢ã€‚æ”¹å˜é‡æµ‹å™ªå£°ã€ç³»ç»Ÿå™ªå£°éƒ½ä¼šå¯¹Kalmanæ»¤æ³¢çš„æ•ˆæœäº§ç”Ÿå½±å“ï¼Œè€Œä¸ä¼šå¯¹æœ€å°äºŒä¹˜æ»¤æ³¢äº§ç”Ÿå½±å“ï¼Œè€Œæ”¹å˜æœ€å°äºŒä¹˜çš„é˜¶æ•°ä¼šå¯¹å…¶äº§ç”Ÿå½±å“ã€‚</p><h3 id="ä½¿ç”¨IMUè·å¾—å§¿æ€"><a href="#ä½¿ç”¨IMUè·å¾—å§¿æ€" class="headerlink" title="ä½¿ç”¨IMUè·å¾—å§¿æ€"></a>ä½¿ç”¨IMUè·å¾—å§¿æ€</h3><p>ä½¿ç”¨IMUå¯ä»¥ä¼°è®¡è´¨å¿ƒå§¿æ€ã€‚ç°æœ‰çš„IMUåŸºæœ¬éƒ½å¯ä»¥è¿”å›å››å…ƒæ•° $\boldsymbol{q}=\begin{bmatrix}w\\x\\y\\z\end{bmatrix}$ ï¼Œç»è¿‡è®¡ç®—å³å¯è·å¾—è´¨å¿ƒå§¿æ€è§’ï¼Œå…¶å…¬å¼å¦‚ä¸‹ï¼š</p><script type="math/tex; mode=display">\boldsymbol{R}_{sb} = \begin{bmatrix}1-2 y^{2}-2 z^{2} & 2 x y-2 z w & 2 x z+2 y w \\2 x y+2 z w & 1-2 x^{2}-2 z^{2} & 2 y z-2 x w \\2 x z-2 y w & 2 y z+2 x w & 1-2 x^{2}-2 y^{2}\end{bmatrix}</script><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ—‹è½¬çŸ©é˜µè½¬æˆæ¬§æ‹‰è§’ï¼ˆRollã€Pitchã€Yawï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\text{Roll} &= \arctan2\left(\boldsymbol{R}_{sb}(3,2), \boldsymbol{R}_{sb}(3,3)\right) \\\text{Pitch} &= \arcsin\left(-\boldsymbol{R}_{sb}(3,1)\right) \\\text{Yaw} &= \arctan2\left(\boldsymbol{R}_{sb}(2,1), \boldsymbol{R}_{sb}(1,1)\right)\end{aligned}</script><p>åœ¨IMUçš„å±€éƒ¨åæ ‡ç³» $\{b\}$ ä¸­ï¼š</p><script type="math/tex; mode=display">\begin{aligned}m\boldsymbol{a}&=-k\boldsymbol{s}+m\boldsymbol{R}_{bs}\boldsymbol{g}\\\boldsymbol{s}&=\frac{m}{k}(\boldsymbol{R}_{bs}\boldsymbol{g}-\boldsymbol{a})\end{aligned}</script><p>ä¸Šå¼ä¸­ç”±äºé‡åŠ›åŠ é€Ÿåº¦ $\boldsymbol{g}=\begin{bmatrix}0\\ 0 \-9.8\end{bmatrix}$ æ˜¯ä¸–ç•Œåæ ‡ç³»ä¸‹çš„ï¼Œæ‰€ä»¥éœ€è¦å·¦ä¹˜æ—‹è½¬çŸ©é˜µ $\boldsymbol{R}_{bs}$ ã€‚åˆ™åŠ é€Ÿåº¦è®¡çš„è¯»æ•°ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{a}_b=\boldsymbol{a}_{out}=-\frac{k}{m}\boldsymbol{s}&=\boldsymbol{a}-\boldsymbol{R}_{bs}\boldsymbol{g}=\boldsymbol{a}-\boldsymbol{R}_{sb}^\mathrm{T}\boldsymbol{g}\end{aligned}</script><p>ä¸Šè¿°å…¬å¼å»ºç«‹äº†åŠ é€Ÿåº¦è®¡è¯»æ•°ä¸è´¨å¿ƒå§¿æ€çš„å…³ç³»ï¼Œé€šè¿‡å·¦ä¹˜æ—‹è½¬çŸ©é˜µå¯ä»¥è®¡ç®—å‡ºIMUåœ¨ $\{s\}$ åæ ‡ç³»ä¸‹çš„åŠ é€Ÿåº¦ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{a}_{s}& =\boldsymbol{R}_{sb}\boldsymbol{a}  \\&=\boldsymbol{R}_{sb}\boldsymbol{a}_{b}+\boldsymbol{R}_{sb}\boldsymbol{R}_{sb}^{T}\boldsymbol{g} \\&=\boldsymbol{R}_{sb}\boldsymbol{a}_{b}+\boldsymbol{g}\end{aligned}\tag{9}</script><h3 id="çŠ¶æ€ç©ºé—´æ¨¡å‹"><a href="#çŠ¶æ€ç©ºé—´æ¨¡å‹" class="headerlink" title="çŠ¶æ€ç©ºé—´æ¨¡å‹"></a>çŠ¶æ€ç©ºé—´æ¨¡å‹</h3><p>çŠ¶æ€ä¼°è®¡å™¨éœ€è¦ä¸€ä¸ªæè¿°å››è¶³æœºå™¨äººè¿åŠ¨çŠ¶æ€çš„çŠ¶æ€ç©ºé—´æ¨¡å‹ã€‚å¯¹äºä¸€ä¸ªçŠ¶æ€ç©ºé—´æ¨¡å‹éœ€è¦å¯¹å…¶è¿›è¡Œèƒ½æ§æ€§å’Œèƒ½è§‚æ€§çš„åˆ†æï¼Œæ¥åˆ¤æ–­æ­¤å­¦ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿè¢«è¾“å…¥æ‰€æ§åˆ¶ï¼Œä½†æœ¬æ–‡çœç•¥è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹ã€‚æœ¬ç« èŠ‚å…ˆä»‹ç»è¿ç»­çŠ¶æ€ç©ºé—´æ¨¡å‹ï¼Œå†æ¨å‡ºç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹ã€‚</p><h4 id="è¿ç»­çŠ¶æ€ç©ºé—´æ¨¡å‹"><a href="#è¿ç»­çŠ¶æ€ç©ºé—´æ¨¡å‹" class="headerlink" title="è¿ç»­çŠ¶æ€ç©ºé—´æ¨¡å‹"></a>è¿ç»­çŠ¶æ€ç©ºé—´æ¨¡å‹</h4><p>â€œè¿ç»­â€æŒ‡çš„æ˜¯æ—¶é—´è¿ç»­ã€å®šå¸¸çº¿æ€§ç³»ç»Ÿçš„çŠ¶æ€ç©ºé—´æ¨¡å‹ï¼š</p><script type="math/tex; mode=display">\begin{cases}\dot{\boldsymbol{x}}(t)=\boldsymbol{A}_c \boldsymbol{x}(t)+\boldsymbol{B}_c \boldsymbol{u}(t)\\\boldsymbol{y}(t)=\boldsymbol{C}_c \boldsymbol{x}(t)\end{cases}\tag{10}</script><p>å…¶ä¸­ï¼š</p><ul><li>$\boldsymbol{x}(t)$ ï¼šçŠ¶æ€å‘é‡</li><li>$\boldsymbol{u}(t)$ ï¼šæ§åˆ¶å‘é‡</li><li>$\boldsymbol{y}(t)$ ï¼šè¾“å‡ºå‘é‡</li><li>$\boldsymbol{A}_c$ ï¼šç³»ç»ŸçŸ©é˜µ</li><li>$\boldsymbol{B}_c$ ï¼šè¾“å…¥çŸ©é˜µ</li><li>$\boldsymbol{C}_c$ ï¼šè¾“å‡ºçŸ©é˜µ</li></ul><p>åˆ™ $\boldsymbol{x}$ åº”ä¸ºè¦ä¼°è®¡çš„é‡ï¼Œ $\boldsymbol{y}$ ä¸ºèƒ½ç›´æ¥æµ‹é‡çš„é‡ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230731130212268.png" alt="image-20230731130212268" style="zoom: 33%;"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230731130302869.png" alt="image-20230731130302869" style="zoom: 33%;"></p><p>ä»¤æœºèº«åŠ é€Ÿåº¦ $\boldsymbol{a}_s$ ä¸ºç³»ç»Ÿè¾“å…¥é‡ $\boldsymbol{u}$ ï¼Œä¸Šå¼å¯å˜ä¸ºæ ‡å‡†å½¢å¼ï¼š</p><script type="math/tex; mode=display">\dot{\boldsymbol{x}}=\begin{bmatrix}\boldsymbol{0}_{3\times3}&\boldsymbol{I}_3&\boldsymbol{0}_{3\times12}\\&\boldsymbol{0}_{3\times18}&\\&\boldsymbol{0}_{3\times18}&\end{bmatrix}\boldsymbol{x}+\begin{bmatrix}\boldsymbol{0}_{3\times3}\\\boldsymbol{I}_3\\\boldsymbol{0}_{3\times3}\end{bmatrix}\begin{bmatrix}\boldsymbol{R}_{sb}\boldsymbol{a}_{b}+\boldsymbol{g}\end{bmatrix}\tag{11}</script><p>å¯¹äºå¯æµ‹é‡çš„è¾“å‡ºå˜é‡ $\boldsymbol{y}$ ï¼Œå‰æ–‡é€šè¿‡IMUå¯æµ‹å¾— $\{s\}$ åæ ‡ç³»ä¸‹çš„æœºèº«å§¿æ€ $\boldsymbol{R}_{sb}$ ï¼› $\{b\}$ ä¸‹çš„åŠ é€Ÿåº¦ $\boldsymbol{a_b}$ ã€è§’é€Ÿåº¦ $\boldsymbol{\omega}_b$ ï¼›é€šè¿‡æ­£å‘è¿åŠ¨å­¦ï¼Œå¯ä»¥æ±‚å‡º $\{b\}$ åæ ‡ç³»ä¸‹è¶³ç«¯ç›¸å¯¹äºæœºèº«çš„ä½ç½® $\boldsymbol{p}_{bfB}$ ï¼Œè½¬æ¢åˆ° $\{s\}$ åæ ‡ç³»ä¸‹ï¼Œå³ $\boldsymbol{p}_{sfB}=\boldsymbol{R}_{sb}\boldsymbol{p}_{bfB}$ (å¼12)ï¼Œå³å¯å†™å‡ºè¾“å‡ºå˜é‡ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230802125435769.png" alt="image-20230802125435769" style="zoom:50%;"></p><p>å°†å…¶å†™æˆå¼ $(10)$ çš„æ ‡å‡†å½¢å¼ï¼š(å¼13)</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230802125521114.png" alt="image-20230802125521114" style="zoom:50%;"></p><h4 id="ç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹"><a href="#ç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹" class="headerlink" title="ç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹"></a>ç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹</h4><p>ç”±äºæ§åˆ¶ç®—æ³•è¿è¡Œäºè®¡ç®—æœºï¼Œéœ€è¦å¯¹è¿ç»­çš„çŠ¶æ€ç©ºé—´æ¨¡å‹ç¦»æ•£åŒ–ï¼Œä½¿çŠ¶æ€ç©ºé—´å˜é‡å‡ä¸ºæ—¶é—´çš„å‡½æ•°ã€‚è®¾é‡‡æ ·æ—¶é—´é—´éš”ä¸º $\mathrm{d}t$ ï¼Œåˆ™ï¼š</p><script type="math/tex; mode=display">\dot{\boldsymbol{x}}(k-1)=\frac{\boldsymbol{x}(k)-\boldsymbol{x}(k-1)}{dt}\Rightarrow \boldsymbol{x}(k)=\boldsymbol{x}(k-1)+\mathrm{d}t\dot{\boldsymbol{x}}(k-1)</script><p>å°†å¼ $(10)$ å¸¦å…¥</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{x}(k)&=\boldsymbol{x}(k-1)+\mathrm{d}t\left(\boldsymbol{A}_{c}\boldsymbol{x}(k-1)+\boldsymbol{B}_{c}\boldsymbol{u}(k-1)\right)\\&=\underline{(\boldsymbol{I}+\mathrm{d}t\boldsymbol{A}_{c})}\boldsymbol{x}(k-1)+\underline{\mathrm{d}t\boldsymbol{B}_{c}}\boldsymbol{u}(k-1)\end{aligned}</script><p>åˆ™ç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\begin{cases}\boldsymbol{x}(k)=\boldsymbol{A}\boldsymbol{x}(k-1)+\boldsymbol{B}\boldsymbol{u}(k-1)\\\boldsymbol{y}(k)=\boldsymbol{C}\boldsymbol{x}(k)\end{cases}\quad\text{å…¶ä¸­}\begin{cases}\boldsymbol{A}=\boldsymbol{I}+\mathrm{d}t\boldsymbol{A}_{c}\\\boldsymbol{B}=\mathrm{d}t\boldsymbol{B}_{c}\\\boldsymbol{C}=\boldsymbol{C}_{c}\end{cases}\end{aligned}</script><h3 id="æœ€å°äºŒä¹˜ä¼°è®¡"><a href="#æœ€å°äºŒä¹˜ä¼°è®¡" class="headerlink" title="æœ€å°äºŒä¹˜ä¼°è®¡"></a>æœ€å°äºŒä¹˜ä¼°è®¡</h3><p>è¾“å‡ºå‘é‡ $\boldsymbol{y}$ çš„æµ‹é‡å€¼ä¸­å«æœ‰å™ªå£°å‘é‡ $\boldsymbol{v}$ ï¼Œå‡è®¾çŠ¶æ€å‘é‡ $\boldsymbol{x}_k$ ä¸ºå®šå€¼ $\boldsymbol{x}$ ï¼Œç¦»æ•£çŠ¶æ€ç©ºé—´ä¸­çš„ $\boldsymbol{y}$ å˜ä¸º $\boldsymbol{y}_k=\boldsymbol{C}\boldsymbol{x}+\boldsymbol{v}_k$ ã€‚å‡è®¾æµ‹é‡å™ªå£° $\boldsymbol{v}\sim(0,\boldsymbol{R})$ ï¼Œå…¶ä¸­ $\boldsymbol{R}$ ä¸ºåæ–¹å·®çŸ©é˜µï¼Œ $\boldsymbol{R}=\mathrm{diag}(\sigma_{1}^{2},\sigma_{2}^{2},\ldots,\sigma_{n}^{2})$ ã€‚éœ€è¦åœ¨æœ‰å™ªå£°çš„æƒ…å†µä¸‹è·å¾—çŠ¶æ€å‘é‡çš„æœ€ä¼˜ä¼°è®¡å€¼ $\hat{\boldsymbol{x}}$ ã€‚</p><h4 id="åŠ æƒæœ€å°äºŒä¹˜ä¼°è®¡"><a href="#åŠ æƒæœ€å°äºŒä¹˜ä¼°è®¡" class="headerlink" title="åŠ æƒæœ€å°äºŒä¹˜ä¼°è®¡"></a>åŠ æƒæœ€å°äºŒä¹˜ä¼°è®¡</h4><p>å®šä¹‰æµ‹é‡æ®‹å·® $\boldsymbol{\epsilon}_{y}=\boldsymbol{y}-\boldsymbol{C}\hat{\boldsymbol{x}}$ ã€‚æ ¹æ®å„ä¸ªä¼ æ„Ÿå™¨çš„è¯¯å·®æ–¹å·®å®šä¹‰ä¸ºæƒé‡ï¼Œæ–¹å·®è¶Šå°æƒé‡è¶Šå¤§ã€‚å®šä¹‰ä»£ä»·å‡½æ•°ï¼š</p><script type="math/tex; mode=display">\begin{aligned}J&=\frac{\boldsymbol{\epsilon}_{y_{1}}^{2}}{\sigma_{1}^{2}}+\frac{\boldsymbol{\epsilon}_{y_{2}}^{2}}{\sigma_{2}^{2}}+\cdots+\frac{\boldsymbol{\epsilon}_{y_{n}}^{2}}{\sigma_{n}^{2}}=\boldsymbol{\epsilon}_{y}^{T}\boldsymbol{R}^{-1}\boldsymbol{\epsilon}_{y}\\&=(\boldsymbol{y}-\boldsymbol{C}\hat{\boldsymbol{x}})^{T}\boldsymbol{R}^{-1}(\boldsymbol{y}-\boldsymbol{C}\hat{\boldsymbol{x}})\\&=\boldsymbol{y}^{T}\boldsymbol{R}^{-1}\boldsymbol{y}-\boldsymbol{y}^{T}\boldsymbol{R}^{-1}\boldsymbol{C}\hat{\boldsymbol{x}}-\hat{\boldsymbol{x}}^{T}\boldsymbol{C}^{T}\boldsymbol{R}^{-1}\boldsymbol{y}+\hat{\boldsymbol{x}}^{T}\boldsymbol{C}^{T}\boldsymbol{R}^{-1}\boldsymbol{C}\hat{\boldsymbol{x}}\\\end{aligned}</script><p>æ±‚ $J$ çš„åå¯¼æ•° $\frac{\partial J}{\partial\hat{\boldsymbol{x}}}=-2\boldsymbol{y}^{T}\boldsymbol{R}^{-1}\boldsymbol{C}+2\hat{\boldsymbol{x}}^{T}\boldsymbol{C}^{T}\boldsymbol{R}^{-1}\boldsymbol{C}$ ï¼Œä»¤å…¶ä¸º $0$ ï¼Œå¯ä»¥è®¡ç®—å‡º $\hat{\boldsymbol{x}}=(\boldsymbol{C}^{T}\boldsymbol{R}^{-1}\boldsymbol{C})^{-1}\boldsymbol{C}^{T}\boldsymbol{R}^{-1}\boldsymbol{y}$ ã€‚</p><p>ä½†æ­¤æ–¹æ³•éœ€è¦ä½¿ç”¨ä¸€æ®µæ—¶é—´å†…æ‰€æœ‰çš„æµ‹é‡å€¼ $\boldsymbol{y}$ ï¼Œå…¶è®¡ç®—é‡åŠå†…å­˜å ç”¨å¤ªå¤§ï¼Œæ•…æ”¹ç”¨é€’æ¨å…¬å¼ã€‚</p><h4 id="é€’æ¨æœ€å°äºŒä¹˜ä¼°è®¡"><a href="#é€’æ¨æœ€å°äºŒä¹˜ä¼°è®¡" class="headerlink" title="é€’æ¨æœ€å°äºŒä¹˜ä¼°è®¡"></a>é€’æ¨æœ€å°äºŒä¹˜ä¼°è®¡</h4><p>å®šä¹‰ $\hat{\boldsymbol{x}}$ çš„é€’æ¨å…¬å¼ï¼šï¼ˆå…¶ä¸­ $\boldsymbol{K}_k$ ä¸ºæœ€ä¼˜ä¿®æ­£ç³»æ•°çŸ©é˜µï¼‰</p><script type="math/tex; mode=display">\begin{cases}\boldsymbol{y}_{k}=\boldsymbol{C}\boldsymbol{x}+\boldsymbol{v}_{k}\\\hat{\boldsymbol{x}}_{k}=\hat{\boldsymbol{x}}_{k-1}+\boldsymbol{K}_{k}(\boldsymbol{y}_{k}-\boldsymbol{C}\hat{\boldsymbol{x}}_{k-1})\end{cases}\tag{13}</script><p>å®šä¹‰ $k$ æ—¶åˆ»çš„çŠ¶æ€ä¼°è®¡è¯¯å·®ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{\omega}_k&=\hat{\boldsymbol{x}}-\hat{\boldsymbol{x}}_k=\hat{\boldsymbol{x}}-\hat{\boldsymbol{x}}_{k-1}-\boldsymbol{K}_k(\boldsymbol{y}_k-\boldsymbol{C}\hat{\boldsymbol{x}}_{k-1})\\&=\boldsymbol{\omega}_{k-1}-\boldsymbol{K}_k\boldsymbol{C}(\boldsymbol{x}-\hat{\boldsymbol{x}}_{k-1})-\boldsymbol{K}_k\boldsymbol{v}_k\\&=(\boldsymbol{I}-\boldsymbol{K}_k\boldsymbol{C})\boldsymbol{\omega}_{k-1}-\boldsymbol{K}_k\boldsymbol{v}_k\end{aligned}\tag{14}</script><p>å†æ¬¡ä½¿ç”¨äºŒæ¬¡è§„åˆ’ï¼Œä»¤ $k$ æ—¶åˆ»å„çŠ¶æ€ä¼°è®¡è¯¯å·®æ–¹å·®å’Œæœ€å°ï¼Œåˆ™ $k$ æ—¶åˆ»çš„ä»£ä»·å‡½æ•° $J_k$ ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}J_{k}&=E\left(\omega_{k1}^{2}+\omega_{k2}^{2}+\cdots+\omega_{kn}^{2}\right)\\&=\sigma_{k1}^{2}+\sigma_{k2}^{2}+\cdots+\sigma_{kn}^{2}\\&=\mathrm{Tr}\left(\boldsymbol{P}_{k}\right)\end{aligned}</script><p>ä¼°è®¡è¯¯å·®åæ–¹å·® $\boldsymbol{P}_{k}=E(\boldsymbol{\omega}_{k}\boldsymbol{\omega}_{k}^{T})$ ï¼Œå°†å¼ $(14)$ å¸¦å…¥å¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{P}_{k}&=E(\boldsymbol{\omega}_{k}\boldsymbol{\omega}_{k}^{T})\\&=(\boldsymbol{I}-\boldsymbol{K}_k\boldsymbol{C})\boldsymbol{P}_{k-1}(\boldsymbol{I}-\boldsymbol{K}_k\boldsymbol{C})^T+\boldsymbol{K}_k\boldsymbol{R}\boldsymbol{K}_k^T\end{aligned}\tag{15}</script><p>ç›®çš„ä¸ºä½¿ $J$ æœ€å°ï¼Œå¯¹å…¶æ±‚åå¯¼ï¼š</p><script type="math/tex; mode=display">\frac{\partial J_k}{\partial \boldsymbol{K}_k}=2(\boldsymbol{I}-\boldsymbol{K}_k \boldsymbol{C})\boldsymbol{P}_{k-1}(-\boldsymbol{C}^T)+2\boldsymbol{K}_k \boldsymbol{R}=0</script><p>è§£å¾—æœ€ä¼˜çš„ $\boldsymbol{K}_k$ ä¸ºï¼š</p><script type="math/tex; mode=display">\boldsymbol{K}_{k}=\boldsymbol{P}_{k-1}\boldsymbol{C}^{T}(\boldsymbol{R}+\boldsymbol{C}\boldsymbol{P}_{k-1}\boldsymbol{C}^{T})^{-1}\tag{16}</script><h4 id="æœ€å°äºŒä¹˜ä¼°è®¡æµç¨‹æ€»ç»“"><a href="#æœ€å°äºŒä¹˜ä¼°è®¡æµç¨‹æ€»ç»“" class="headerlink" title="æœ€å°äºŒä¹˜ä¼°è®¡æµç¨‹æ€»ç»“"></a>æœ€å°äºŒä¹˜ä¼°è®¡æµç¨‹æ€»ç»“</h4><ol><li>ç¡®å®šåˆå§‹çŠ¶æ€çš„æœ€ä¼˜ä¼°è®¡å€¼ $\hat{\boldsymbol{x}}_0$ å’Œä¼°è®¡å€¼çš„åæ–¹å·® $\boldsymbol{P}_0$ ã€‚å¦‚æœå¯¹ç³»ç»ŸçŠ¶æ€ $\boldsymbol{x}$ å®Œå…¨ä¸äº†è§£ï¼Œåˆ™å¯ä»¥å°† $\hat{\boldsymbol{x}}_0$ è®¾ä¸ºä»»æ„å€¼ï¼ŒåŒæ—¶ä»¤ $\boldsymbol{P}_0 = \infty \boldsymbol{I}$ ï¼Œè¡¨ç¤ºæ— ç©·å¤§çš„åæ–¹å·®ï¼Œå³å®Œå…¨ä¸ä¿¡ä»» $\hat{\boldsymbol{x}}_0$ ã€‚</li><li>ä¼°è®¡å™¨è¿è¡Œå¼€å§‹ï¼Œåœ¨ $k=1$ æ—¶åˆ»ï¼Œæœºå™¨äººä»å„ä¸ªä¼ æ„Ÿå™¨å¾—åˆ°è¾“å‡ºå‘é‡ $\boldsymbol{y}_1$ ï¼Œå¹¶æ ¹æ®å¼ $(16)$ è®¡ç®—å‡ºå½“å‰æ—¶åˆ»çš„æœ€ä¼˜ä¿®æ­£ç³»æ•°çŸ©é˜µ $\boldsymbol{K}_1=\boldsymbol{P}_0\boldsymbol{C}^{T}(\boldsymbol{R}+\boldsymbol{C}\boldsymbol{P}_0\boldsymbol{C}^{T})^{-1}$ ã€‚æ ¹æ®å¼ $(13)$ å¯ä»¥è®¡ç®—å‡ºå½“å‰æ—¶åˆ»çš„æœ€ä¼˜ä¼°è®¡å€¼ $\hat{\boldsymbol{x}}_1=\hat{\boldsymbol{x}}_0+\boldsymbol{K}_1(\boldsymbol{y}_1-\boldsymbol{C}\hat{\boldsymbol{x}}_0)$ ã€‚æ ¹æ®å¼ $(15)$ å¯ä»¥è®¡ç®—å‡ºä¼°è®¡è¯¯å·®åæ–¹å·® $\boldsymbol{P}_1=(\boldsymbol{I}-\boldsymbol{K}_1\boldsymbol{C})\boldsymbol{P}_0(\boldsymbol{I}-\boldsymbol{K}_1\boldsymbol{C})^T+\boldsymbol{K}_1\boldsymbol{R}\boldsymbol{K}_1^T$ ã€‚ </li><li>å½“ $k=2,3,\cdots $ ï¼Œä¼°è®¡å™¨é‡å¤ç¬¬äºŒæ­¥ï¼Œä¼°è®¡å€¼ $\hat{\boldsymbol{x}}$ ä¸æ–­é€¼è¿‘çœŸå®çŠ¶æ€ $\boldsymbol{x}$ ã€‚</li></ol><h4 id="è¿‡ç¨‹å™ªå£°"><a href="#è¿‡ç¨‹å™ªå£°" class="headerlink" title="è¿‡ç¨‹å™ªå£°"></a>è¿‡ç¨‹å™ªå£°</h4><p>å‰æ–‡å‡è®¾çŠ¶æ€å‘é‡ä¸ºå®šå€¼ã€‚è‹¥çŠ¶æ€å‘é‡æ˜¯å˜åŒ–çš„ï¼Œå¢åŠ è¿‡ç¨‹å™ªå£° $\boldsymbol{w}$ ï¼Œä¸”å…¶æœŸæœ›ä¸º0ã€‚åˆ™ç¦»æ•£çŠ¶æ€ç©ºé—´æ¨¡å‹å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\boldsymbol{x}_k=\boldsymbol{A}\boldsymbol{x}_{k-1}+\boldsymbol{B}\boldsymbol{u}_{k-1}+\boldsymbol{w}</script><p>çŠ¶æ€æœŸæœ›ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\overline{\boldsymbol{x}_{k}}&=E(\boldsymbol{x}_{k})=\boldsymbol{A}E(\boldsymbol{x}_{k-1})+\boldsymbol{B}E(\boldsymbol{u}_{k-1})+\underset{0}{\underline{E(\boldsymbol{w}_{k-1}}})\\&=\boldsymbol{A}\overline{\boldsymbol{x}}_{k-1}+\boldsymbol{B}\overline{\boldsymbol{u}}_{k-1}\end{aligned}</script><p>çŠ¶æ€å‘é‡ $\boldsymbol{x}_k$ çš„åæ–¹å·®ä¸ºï¼šï¼ˆ $\boldsymbol{Q}=\boldsymbol{w}\boldsymbol{w}^T$ ä¸ºè¿‡ç¨‹å™ªå£°åæ–¹å·®ï¼‰</p><script type="math/tex; mode=display">\begin{aligned}P_k&=E\left[(\boldsymbol{x}_k-\overline{\boldsymbol{x}}_k)(\boldsymbol{x}_k-\overline{\boldsymbol{x}}_k)^T\right]=\boldsymbol{A}\boldsymbol{P}_{k-1}\boldsymbol{A}^T+\boldsymbol{w}_{k-1}\boldsymbol{w}_{k-1}^T\\&=\boldsymbol{A}\boldsymbol{P}_{k-1}\boldsymbol{A}^T+\underline{\boldsymbol{Q}}\end{aligned}</script><h3 id="æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨"><a href="#æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨" class="headerlink" title="æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨"></a>æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨</h3><p>æœ€å°äºŒä¹˜ä¼°è®¡åªèƒ½å¯¹å›ºå®šçŠ¶æ€ $\boldsymbol{x}$ è¿›è¡Œä¼°è®¡ï¼Œè€Œæ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨å¯ä»¥å¯¹å˜åŒ–çš„çŠ¶æ€ $\boldsymbol{x}_k$ è¿›è¡Œä¼°è®¡ã€‚</p><p>TODO </p><h2 id="æ­¥æ€è½¨è¿¹è§„åˆ’"><a href="#æ­¥æ€è½¨è¿¹è§„åˆ’" class="headerlink" title="æ­¥æ€è½¨è¿¹è§„åˆ’"></a>æ­¥æ€è½¨è¿¹è§„åˆ’</h2><h3 id="è½è„šç‚¹çš„é€‰å–"><a href="#è½è„šç‚¹çš„é€‰å–" class="headerlink" title="è½è„šç‚¹çš„é€‰å–"></a>è½è„šç‚¹çš„é€‰å–</h3><h4 id="å¹³ç§»"><a href="#å¹³ç§»" class="headerlink" title="å¹³ç§»"></a>å¹³ç§»</h4><p>TODO å›¾</p><p>ä¸Šå›¾ä¸ºå››è¶³æœºå™¨äººçš„ä¸€æ¡è…¿ä»æŠ¬èµ·åˆ°è½ä¸‹çš„è¿‡ç¨‹ï¼Œåˆ†åŒºçœ‹å›¾ä¸­çš„å‡ ä¸ªè¿‡ç¨‹ï¼š</p><ol><li>â‚ä¸ºä¸­æ€§è½è„šç‚¹</li><li>â€~âé˜¶æ®µä¸ºæ‘†åŠ¨ç›¸ï¼Œæœºå™¨äººé€Ÿåº¦ä¸º $v_x$ ï¼Œæ‘†åŠ¨æ—¶é—´ä¸º $T_{swing}$ ï¼Œåˆ™ $d_{12}=v_x T_{swing}$ ã€‚</li><li>â~âƒé˜¶æ®µä¸ºæ”¯æ’‘ç›¸ï¼Œæœºå™¨äººé€Ÿåº¦ä¸º $v_x$ ï¼Œè§¦åº•æ—¶é—´ä¸º $T_{stance}$ ï¼Œåˆ™ $d_{23}=\Delta x=\frac{1}{2} v_x T_{stance}$ ã€‚</li></ol><p>å›¾ä¸­è½è„šç‚¹ $x_{f}=x_{b}+d_{12}+d_{23}=x_{b}+v_x T_{swing}+\frac{1}{2}v_x T_{stance}$ </p><p>è®¾ç›¸ä½ $p_{t}=\frac{t-t_{0}}{t_{1}-t_{0}}$ ï¼Œåˆ™è½è„šç‚¹å˜ä¸º $x_f=x_{p}(p)+v_x(1-p)T_{swing}+\frac{1}{2}v_xT_{stance}$ </p><p>è‹¥è½è„šç‚¹ä½äºä¸­æ€§è½è„šç‚¹å·¦ä¾§ï¼Œé‡åŠ›ä¼šå¯¹è½è„šç‚¹äº§ç”Ÿé¡ºæ—¶é’ˆçš„åŠ›çŸ©ä»è€Œå‘å³åŠ é€Ÿï¼Œæ‰€ä»¥è‹¥ $v_x &lt; v_{xd}$ ï¼Œåˆ™éœ€å·¦ç§»è½è„šç‚¹ã€‚</p><script type="math/tex; mode=display">\begin{cases}x_{f}=x_{p}(p)+v_{x}(1-p)T_{swing}+\frac{1}{2}v_{x}T_{stance}+k_{x}(v_{x}-v_{xd}) \\y_{f}=y_{p}(p)+v_{y}(1-p)T_{swing}+\frac12v_{y}T_{stance}+k_{y}(v_{y}-v_{yd})\end{cases}</script><h4 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h4><script type="math/tex; mode=display">\theta_f=\theta_p+\theta_0+\omega(1-p)T_{swing}+\frac{1}{2}\omega T_{stance}+k_\omega(\omega-\omega_d)</script><p>åˆ™ä¸–ç•Œåæ ‡ç³»ä¸‹çš„è½è„šç‚¹ä¸º</p><script type="math/tex; mode=display">\begin{cases}x_{f}=R\cos\theta_{f} \\y_{f}=R\sin\theta_{f}\end{cases}</script><p>ç»“åˆå¹³ç§»ä¸æ—‹è½¬ï¼Œè½è„šç‚¹åæ ‡ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{cases}x_i=x_b+R\cos\theta_f+v_x(1-p)T_{swing}+\frac{1}{2}v_xT_{stance}+k_x(v_x-v_{xd})\\y_i=y_b+R\sin\theta_f+v_y(1-p)T_{swing}+\frac{1}{2}v_yT_{stance}+k_y(v_y-v_{yd})\end{cases}</script><h2 id="MPCæ§åˆ¶å™¨"><a href="#MPCæ§åˆ¶å™¨" class="headerlink" title="MPCæ§åˆ¶å™¨"></a>MPCæ§åˆ¶å™¨</h2><h3 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>é€šè¿‡MPCå¯ä»¥å¾—åˆ°ï¼š</p><ol><li>è´¨å¿ƒä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦ã€æ—‹è½¬è§’åº¦ã€è§’é€Ÿåº¦</li><li>è¶³åº•åŠ›</li><li>è¶³ç«¯ä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦</li></ol><p>è®©æœºå™¨ç‹—è´¨å¿ƒè·Ÿè¸ªæœ€æ–°çš„å‚è€ƒè½¨è¿¹ï¼Œè®¡ç®—æœªæ¥ä¸€æ®µæ—¶é—´å†…çš„è¶³åº•åŠ›</p><h3 id="ç®€åŒ–å•åˆšä½“åŠ¨åŠ›å­¦"><a href="#ç®€åŒ–å•åˆšä½“åŠ¨åŠ›å­¦" class="headerlink" title="ç®€åŒ–å•åˆšä½“åŠ¨åŠ›å­¦"></a>ç®€åŒ–å•åˆšä½“åŠ¨åŠ›å­¦</h3><p>ä¸‹é¢è€ƒè™‘å•åˆšä½“åŠ¨åŠ›å­¦ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\ddot{\boldsymbol{p}}=\frac{\sum_{i=1}^n\boldsymbol{f}_i}{m}-\boldsymbol{g}\\\frac{d}{dt}(\boldsymbol{I}\boldsymbol{\omega})=\sum_{i=1}^n\boldsymbol{r}_i\times \boldsymbol{f}_i\end{aligned}</script><p>å¯¹ä¸Šå¼å…¶è¿›è¡Œç®€åŒ–</p><ol><li><p>$\frac{d}{dt}(\boldsymbol{I}\boldsymbol{\omega})=\boldsymbol{I}\boldsymbol{\omega}+\boldsymbol{\omega}\times(\boldsymbol{I}\boldsymbol{\omega})\approx \boldsymbol{I}\dot{\boldsymbol{\omega}}$ ï¼Œå…¶ä¸­ $\boldsymbol{I}=\boldsymbol{R}\boldsymbol{I}_b\boldsymbol{R}^T\approx \boldsymbol{R}_z(\psi)\boldsymbol{I}_b\boldsymbol{R}_z^T(\psi)$ </p></li><li><p>ç®€åŒ–pitchå’Œrow</p><p>IMUè·å¾—çš„è§’é€Ÿåº¦ä¸ºèº«ä½“åæ ‡ç³»ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{\omega}_{s}&=\boldsymbol{R}_{z}(\psi)\boldsymbol{R}_{y}(\theta)\boldsymbol{R}_{x}(\phi)\boldsymbol{\omega}_{b}\\\boldsymbol{\omega}_{b}&=\left[\boldsymbol{R}_{z}(\psi)\boldsymbol{R}_{y}(\theta)\boldsymbol{R}_{x}(\phi)\right]^{-1}\boldsymbol{\omega}_{s}\\\left[\begin{matrix}{\dot{\phi}}\\{\dot{\theta}}\\{\dot{\psi}}\\\end{matrix}\right]&=\left[\begin{matrix}{\cos(\psi)/\cos(\theta)}&{\sin(\psi)/\cos(\theta)}&{0}\\{-\sin(\psi)}&{\cos(\psi)}&{0}\\{\cos(\psi)\tan(\theta)}&{\sin(\psi)\tan(\theta)}&{1}\\\end{matrix}\right]\boldsymbol{\omega}\end{aligned}</script><p>åœ¨è¿åŠ¨è¿‡ç¨‹ä¸­æœºå™¨äººçš„pitchå’Œrowå‡æ¥è¿‘äº0ï¼Œæ•…å¯ä»¥å¿½ç•¥</p><script type="math/tex; mode=display">\begin{aligned}\begin{bmatrix}\dot{\phi}\\\dot{\theta}\\\dot{\psi}\end{bmatrix}&=\begin{bmatrix}\cos(\psi)&\sin(\psi)&0\\-\sin(\psi)&\cos(\psi)&0\\0&0&1\end{bmatrix}\boldsymbol{\omega}\\&=\boldsymbol{R}_z^T(\psi)\boldsymbol{\omega}\end{aligned}</script></li></ol><h3 id="çŠ¶æ€æ–¹ç¨‹"><a href="#çŠ¶æ€æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€æ–¹ç¨‹"></a>çŠ¶æ€æ–¹ç¨‹</h3><p>ä¸‹é¢å†™å‡ºçŠ¶æ€æ–¹ç¨‹ï¼š</p><ol><li><p>çŠ¶æ€å˜é‡</p><p>ä½ç½® $\boldsymbol{p}=\begin{bmatrix}x\\y\\z\end{bmatrix}$ ï¼Œé€Ÿåº¦ $\dot{\boldsymbol{p}}=\begin{bmatrix}\dot{x}\\\dot{y}\\\dot{z}\end{bmatrix}$ ï¼Œå§¿æ€è§’ $\boldsymbol{\Theta}=\begin{bmatrix}\theta\\\phi\\\psi\end{bmatrix}$ ï¼Œå§¿æ€è§’é€Ÿåº¦ $\boldsymbol{\omega}=\begin{bmatrix}\dot{\theta}\\\dot{\phi}\\\dot{\psi}\end{bmatrix}$ ï¼Œé‡åŠ›åŠ é€Ÿåº¦ $\boldsymbol{g}=\begin{bmatrix}{0}\\{0}\\{-9.8}\\\end{bmatrix}$ ã€‚çŠ¶æ€å˜é‡åˆ™ä¸º13ç»´å˜é‡ï¼š $\boldsymbol{x}=\begin{bmatrix}\boldsymbol{\theta}\\\boldsymbol{p}\\\boldsymbol{w}\\\dot{\boldsymbol{p}}\\g(3)\end{bmatrix}$ ã€‚</p></li><li><p>æ§åˆ¶å˜é‡</p><p>æ§åˆ¶å˜é‡ä¸º12ç»´å˜é‡ï¼š $\boldsymbol{u}=\begin{bmatrix}\boldsymbol{f}_1\\\boldsymbol{f}_2\\\boldsymbol{f}_3\\\boldsymbol{f}_4\end{bmatrix}$ ã€‚å…¶ä¸­ $\boldsymbol{f}_i$ ä¸ºè¶³åº•åŠ›ã€‚</p></li><li><p>çŠ¶æ€æ–¹ç¨‹</p><script type="math/tex; mode=display">\begin{cases}\dot{\boldsymbol{x}}=\boldsymbol{A}\boldsymbol{x}+\boldsymbol{B}\boldsymbol{u}\\\boldsymbol{y}=\boldsymbol{C}\boldsymbol{x}+\boldsymbol{D}\boldsymbol{u}\end{cases}</script><p>å°†å„ä¸ªå·²çŸ¥é‡å¸¦å…¥ï¼š</p><script type="math/tex; mode=display">\frac{d}{dt}\begin{bmatrix}\boldsymbol{\theta}\\\boldsymbol{p}\\\boldsymbol{\omega}\\\dot{\boldsymbol{p}}\\g(3)\end{bmatrix}=\begin{bmatrix}\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{R}_{z}^{T}(\psi)&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times1}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{I}_{3}&\boldsymbol{0}_{3\times1}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times1}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\left[\begin{smallmatrix}0\\0\\1\end{smallmatrix}\right]\\\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&1\end{bmatrix}\begin{bmatrix}\boldsymbol{\theta}\\\boldsymbol{p}\\\boldsymbol{\omega}\\\dot{\boldsymbol{p}}\\g(3)\end{bmatrix}+\begin{bmatrix}\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}\\\boldsymbol{I}^{-1}[\boldsymbol{r}_1]_\times&\boldsymbol{I}^{-1}[\boldsymbol{r}_2]_\times&\boldsymbol{I}^{-1}[\boldsymbol{r}_3]_\times&\boldsymbol{I}^{-1}[\boldsymbol{r}_4]_\times\\\boldsymbol{I}_3/m&\boldsymbol{I}_3/m&\boldsymbol{I}_3/m&\boldsymbol{I}_3/m\\\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}\end{bmatrix}\begin{bmatrix}\boldsymbol{f}_1\\\boldsymbol{f}_2\\\boldsymbol{f}_3\\\boldsymbol{f}_4\end{bmatrix}</script><p>è¦æƒ³å†™æˆä»£ç ï¼Œéœ€è¦å¯¹å…¶ç¦»æ•£åŒ–ã€‚ä½¿ç”¨å‰å‘æ¬§æ‹‰æ³•ç¦»æ•£åŒ–çŠ¶æ€æ–¹ç¨‹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\dot{\boldsymbol{x}}&=\frac{\boldsymbol{x}_{k+1}-\boldsymbol{x}_k}{\Delta t}=\boldsymbol{A}\boldsymbol{x}_k+\boldsymbol{B}\boldsymbol{u}_k\\\boldsymbol{x}_{k+1}&=\underline{(\boldsymbol{I}+\Delta t\boldsymbol{A})}+\underline{\Delta t\boldsymbol{B}}u_k\\&=\overline{\boldsymbol{A}}\boldsymbol{x}_k+\overline{\boldsymbol{B}}\boldsymbol{u}_k\end{aligned}</script><p>å…¶ä¸­çš„ $\overline{\boldsymbol{A}}$ å’Œ $\overline{\boldsymbol{B}}$ è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\overline{\boldsymbol{A}}&=\begin{bmatrix}\boldsymbol{I}_3&\boldsymbol{0}_{3\times3}&\boldsymbol{R}_{z}^{T}(d\psi^k)\Delta T&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times1}\\\boldsymbol{0}_{3\times3}&\boldsymbol{I}_3&\boldsymbol{0}_{3\times3}&\boldsymbol{I}_{3}\Delta T&\boldsymbol{0}_{3\times1}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{I}_3&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times1}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{I}_3&\left[\begin{smallmatrix}0\\0\\1\end{smallmatrix}\right]\Delta T\\\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&1\end{bmatrix}\\\overline{\boldsymbol{B}}&=\begin{bmatrix}\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}\\\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}&\boldsymbol{0}_{3\times3}\\\boldsymbol{I}_k^{-1}[\boldsymbol{r}_1^k]_\times\Delta T&\boldsymbol{I}_k^{-1}[\boldsymbol{r}_2^k]_\times\Delta T&\boldsymbol{I}_k^{-1}[\boldsymbol{r}_3^k]_\times\Delta T&\boldsymbol{I}_k^{-1}[\boldsymbol{r}_4^k]_\times\Delta T\\\boldsymbol{I}_3\Delta T/m&\boldsymbol{I}_3\Delta T/m&\boldsymbol{I}_3\Delta T/m&\boldsymbol{I}_3\Delta T/m\\\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}&\boldsymbol{0}_{1\times3}\end{bmatrix}\end{aligned}</script></li></ol><h3 id="çº¦æŸ"><a href="#çº¦æŸ" class="headerlink" title="çº¦æŸ"></a>çº¦æŸ</h3><p>MPCæœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯ä»¥å¯¹è¾“å…¥é‡å’ŒçŠ¶æ€å˜é‡è¿›è¡Œçº¦æŸï¼Œæ‰€ä»¥å¯ä»¥å¯¹è¾“å…¥è¿›è¡Œçº¦æŸã€‚è¾“å…¥çº¦æŸå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªçº¦æŸæ¡ä»¶ï¼š</p><ol><li><p>è¶³åº•ååŠ›</p><p>æ‘†åŠ¨æ—¶è¶³åº•åŠ›ä¸º0ï¼Œstate=0ï¼Œ $\boldsymbol{f}_i=\boldsymbol{0}_{3\times1}$ </p><p>è§¦åœ°æ—¶æœ€å¤§è¶³åº•åŠ›ä¸º $f_{max}$ ï¼Œstate=1ï¼Œ $f_i^z \le  f_{max}$ </p></li><li><p>æ‘©æ“¦é”¥</p><p>ä¸ºä¿è¯è¶³åº•ä¸åœ°é¢ä¸æ»‘åŠ¨ï¼Œè¶³åº•ååŠ›çš„æ°´å¹³åˆ†é‡ä¸èƒ½å¤§äºç«–ç›´åˆ†é‡ $\times \mu$ ï¼Œå³</p><script type="math/tex; mode=display">\begin{aligned}|f_i^x|&\le\mu f_i^z\\|f_i^y|&\le\mu f_i^z\\f_i^z&>0\end{aligned}</script></li></ol><p>ç»“åˆä»¥ä¸Šä¸¤ä¸ªçº¦æŸï¼Œå¯ä»¥å¾—åˆ°æ€»çš„è¾“å…¥çº¦æŸï¼š</p><script type="math/tex; mode=display">\begin{bmatrix}0\\0\\0\\0\\0\end{bmatrix}\leq\begin{bmatrix}-1&0&\mu\\0&-1&\mu\\1&0&\mu\\0&1&\mu\\0&0&1\end{bmatrix}\begin{bmatrix}{f_i}^x\\{f_i}^y\\{f_i}^z\end{bmatrix}\leq\begin{bmatrix}+\infty\\+\infty\\+\infty\\+\infty\\f_{\max}\end{bmatrix}</script><h3 id="ä¼˜åŒ–é—®é¢˜"><a href="#ä¼˜åŒ–é—®é¢˜" class="headerlink" title="ä¼˜åŒ–é—®é¢˜"></a>ä¼˜åŒ–é—®é¢˜</h3><p>é¦–å…ˆå»ºç«‹ä»£ä»·å‡½æ•°ï¼ˆå¼ä¸­ $Q$ ã€ $R$ ä¸ºå¯¹è§’æ­£å®š/åŠæ­£å®šçŸ©é˜µï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œè°ƒå‚ï¼‰</p><script type="math/tex; mode=display">\min_{x,u}\sum_{i=0}^{K-1}\underset{è¯¯å·®åŠ æƒå’Œ}{\underline{\|x_{i+1}-x_{i+i,ref}\|Q_{i}}}+\underset{è¾“å…¥åŠ æƒå’Œ}{\underline{\|u_{i}\|R_{i}}}</script><p>ä½¿å…¶æ»¡è¶³ï¼š</p><script type="math/tex; mode=display">\begin{cases}x_{i+1}=A_{i}x_{i}+B_{i}u_{i}&,i=0\cdots k-1\\\underline{c_{i}}\leq C_iu_i\leq\overline{c_{i}}&,i=0\cdots k-1(\text{æ”¯æ’‘ç›¸})\\D_{i}u_{i}=0&,i=0\cdots k-1(\text{æ‘†åŠ¨ç›¸})&\end{cases}</script><p>å¯¹å…¶è¿›è¡ŒäºŒæ¬¡è§„åˆ’ï¼ŒåŒ–ä¸ºqpOASESæ ‡å‡†å½¢å¼ï¼š</p><script type="math/tex; mode=display">\boxed{\begin{aligned}\min_{x}\quad&\frac12x^THx+x^Tg(w_0)\\s.t.\quad&lbA(\omega_0)\leq Ax\leq ubA(\omega_0)\\&lb(\omega_0)\leq x\leq ub(\omega_0)\end{aligned}}</script><p>é¢„æµ‹æ­¥é•¿ä¸º $n$ ï¼ŒçŠ¶æ€é‡ $X_k=\begin{bmatrix}x_k^{k+1}\\x_k^{k+2}\\\vdots\\x_k^{k+n}\end{bmatrix}$ ï¼Œè¾“å…¥é‡ $U_{k}=\begin{bmatrix}u_{k}^{k}\\u_{k}^{k+1}\\\vdots\\u_{k}^{k+n-1}\end{bmatrix}$ ï¼Œåˆ™</p><script type="math/tex; mode=display">X_{k}=\begin{bmatrix}\overline{A}\\\overline{A}^{2}\\\vdots\\\overline{A}^{N}\end{bmatrix}x_{k}+\begin{bmatrix}\overline{B}&0&\cdots&0\\\overline{A}\overline{B}&\overline{B}&\cdots&\vdots\\\vdots&\vdots&\ddots&\vdots\\\overline{A}^{N-1}\overline{B}&\overline{A}^{N-2}\overline{B}&\cdots&\overline{B}\end{bmatrix}U_{k}</script><p>ä¸Šå¼å¯ä»¥è®°ä¸º $X=A_{qp}x_0+B_{qp}U$ ã€‚å¯¹äºç›®æ ‡å€¼ $X^{\mathrm{ref}}=\begin{bmatrix}x^{k+1}\\x^{k+2}\\\vdots\\x^{k+n}\end{bmatrix}$ ï¼Œä¼˜åŒ–é—®é¢˜å¯ä»¥è½¬åŒ–ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\min_U\quad J(U)&=\| X-X^{\mathrm{ref}}\| L+\| U\| K\\&=(X-X^{ref})^{T}L(X-X^{ref})+U^{T}KU\\&=(A_{qp}x_0+B_{qp}U-y)^T L(A_{qp}x_0+B_{qp}U-y)+U^TKU\\&=(x_0^TA^T_{qp}+U^TB_{qp}^T-y^T)L(A_{qp}x_0+B_{qp}U-y)+U^TkU\\&=U^T(B^T_{qp}LB_{qp}+K)U+U^TB_{qp}^TL(A_{qp}x_0-y)+(A_{qp}x_0-y)^TLB_{qp}U+(A_{qp}x_0-y)^TL(A_{qp}x_0-y)\\&=U^T(B_{qp}^TLB_{qp}+K)U+U^TB_{qp}^TL(A_{qp}x_0-y)+[U^TB_{qp}^TL(A_{qp}x_0-y)]^T+(A_{qp}x_0-y)^TL(A_{qp}x_0-y)\end{aligned}</script><p>è§‚å¯Ÿä¸Šå¼ï¼Œç¬¬äºŒç¬¬ä¸‰é¡¹Lå·¦å³å‡ä¸ºå‘é‡ä¸”Lä¸ºå¯¹è§’é˜µï¼Œæ•…ä¸¤è€…ç›¸åŒï¼›ç¬¬å››é¡¹ä¸­çš„ $A_{qp}x_0-y$ æ— æ§åˆ¶é‡çš„å½±å“ï¼Œä»…ä¸ºçŠ¶æ€é‡çš„å˜åŒ–ï¼Œä¸ºå¸¸æ•°é¡¹ï¼Œå¯ä»¥çœç•¥ã€‚æ•…ä¸Šå¼å¯ä»¥æ•´ç†ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\min_U\quad J(U)&=U^T(B_{qp}^TLB_{qp}+K)U+2U^TB_{qp}^TL(A_{qp}x_0-y)\end{aligned}</script><p>å³å¯ä»¥æ•´ç†ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\min_U \quad& \frac12U^THU+U^Tg\\s.t. \quad& \underline{c}\leq CU\leq\overline{c}\end{aligned}</script><p>å…¶ä¸­ï¼šï¼ˆç»´åº¦ä¸­çš„ $n$ ä¸ºè¶³æ•°4ï¼Œ $k$ ä¸ºå•æ¬¡MPCçš„è¿­ä»£æ¬¡æ•°ï¼‰</p><script type="math/tex; mode=display">\begin{aligned}H&=2(B_{qp}^TLB_{qp}+K)\in\mathbb{R}^{3nk\times3nk}\\g&=2B_{qp}^TL(A_{qp}x_{0}-y)\in\mathbb{R}^{3nk\times1}\\\end{aligned}</script><p>è‡³æ­¤å¯å¾—æœºå™¨ç‹—è·Ÿè¸ªè´¨å¿ƒè½¨è¿¹çš„ä¸€ç»„æœ€ä¼˜è¶³ç«¯æ”¯æ’‘åŠ›ï¼Œ $u_0=\begin{bmatrix}f_1\\f_2\\f_3\\f_4\end{bmatrix}$ </p><h2 id="WBCæ§åˆ¶å™¨"><a href="#WBCæ§åˆ¶å™¨" class="headerlink" title="WBCæ§åˆ¶å™¨"></a>WBCæ§åˆ¶å™¨</h2><h3 id="è®¡ç®—å…³èŠ‚ä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦"><a href="#è®¡ç®—å…³èŠ‚ä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦" class="headerlink" title="è®¡ç®—å…³èŠ‚ä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦"></a>è®¡ç®—å…³èŠ‚ä½ç½®ã€é€Ÿåº¦ã€åŠ é€Ÿåº¦</h3><h4 id="é›¶ç©ºé—´"><a href="#é›¶ç©ºé—´" class="headerlink" title="é›¶ç©ºé—´"></a>é›¶ç©ºé—´</h4><p>é€šè¿‡MPCå¯å¾—åˆ°æœ€ä¼˜è¶³ç«¯åŠ› $\boldsymbol{u}_0$ ï¼Œå¯é€šè¿‡ $\boldsymbol{\tau}=\boldsymbol{J}(\boldsymbol{\theta})^T\boldsymbol{F}$ è®¡ç®—å…³èŠ‚åŠ›çŸ©ï¼Œä½†åªé€‚ç”¨äºä½é€Ÿåœºæ™¯ã€‚åœ¨é«˜é€Ÿåœºæ™¯ä¸‹ï¼Œè¶³ç«¯ä¸åœ°é¢çš„æ¥è§¦æ—¶é—´éå¸¸çŸ­ï¼Œæ— æ³•è¿›è¡Œä¼˜åŒ–ï¼Œæ­¤æ—¶åŠ¨æ€æ€§èƒ½è¾ƒå·®ï¼Œæ•…éœ€è¦ä½¿ç”¨WBCæ§åˆ¶å™¨ï¼Œå…¶è¾“å…¥å‚æ•°ä¸ºæ¥è§¦çŠ¶æ€ã€æ”¯æ’‘åŠ›ã€è¶³ç«¯è½¨è¿¹ã€è´¨å¿ƒè½¨è¿¹ã€‚ä¸”å…¶æ§åˆ¶é¢‘ç‡æ¯”MPCå¿«ã€‚</p><p>å½“æœºå™¨äººé«˜é€Ÿè¿åŠ¨æ—¶ï¼Œå››æ¡è…¿è§¦åœ°æ—¶é—´å¾ˆçŸ­ï¼Œæœºå™¨äººå¤§éƒ¨åˆ†æ—¶é—´å¤„äºæ¬ é©±åŠ¨çŠ¶æ€ï¼Œä¸æ— äººæœºæ¬ é©±åŠ¨ç³»ç»Ÿä¸åŒï¼Œå››è¶³æœºå™¨äººä¸åœ°é¢çš„é¢‘ç¹æ¥è§¦å˜æˆäº†å¹²æ‰°é¡¹ã€‚æ­¤æ—¶æœºå™¨äººç›¸å½“äºä¸ä¸€ä¸ªè™šæ‹Ÿæµ®åŠ¨åŸºåº§ç›¸è¿ã€‚æ­¤è™šæ‹Ÿæµ®åŠ¨åŸºåº§æœ‰6ä¸ªè‡ªç”±åº¦ï¼ˆå†—ä½™ï¼‰ï¼Œæ­¤æ—¶æœºå™¨äººçš„çŠ¶æ€å˜å¾—ä¸ç¡®å®šã€‚</p><p>å°†éœ€è¦æ§åˆ¶çš„å˜é‡è¿›è¡Œä¼˜å…ˆçº§åˆ’åˆ†ï¼Œä½¿ç”¨é›¶ç©ºé—´ç†è®ºï¼š</p><div class="table-container"><table><thead><tr><th>çº§åˆ«</th><th>å†…å®¹</th><th>çº¦æŸ</th></tr></thead><tbody><tr><td>0çº§</td><td>è¶³ç«¯æ¥è§¦åŠ›</td><td>é«˜çº§åˆ«</td></tr><tr><td>1çº§</td><td>æœºå™¨äººå§¿æ€</td><td>ä¸èƒ½ç¿»</td></tr><tr><td>2çº§</td><td>æœºå™¨äººä½ç½®</td><td>å¯é€‚é‡æµ®åŠ¨</td></tr><tr><td>3çº§</td><td>æ‘†åŠ¨é€€è½¨è¿¹</td><td>ä½çº§åˆ«</td></tr></tbody></table></div><h5 id="å†—ä½™è‡ªç”±åº¦æœºå™¨äººçš„ä¼˜åŒ–"><a href="#å†—ä½™è‡ªç”±åº¦æœºå™¨äººçš„ä¼˜åŒ–" class="headerlink" title="å†—ä½™è‡ªç”±åº¦æœºå™¨äººçš„ä¼˜åŒ–"></a>å†—ä½™è‡ªç”±åº¦æœºå™¨äººçš„ä¼˜åŒ–</h5><p> $\boldsymbol{A}$ çš„é›¶ç©ºé—´æ˜¯ $\boldsymbol{A}\boldsymbol{x}=\boldsymbol{0}$ çš„æ‰€æœ‰è§£ $\boldsymbol{x}$ çš„é›†åˆï¼Œä¹Ÿå°±æ˜¯ $\boldsymbol{x}$ å›ºå®šï¼Œæ— è®º $\boldsymbol{A}$ å–ä½•å€¼ï¼Œç»“æœå‡ä¸º0ã€‚ç±»æ¯”ä¸²è”æœºæ¢°è‡‚ï¼Œæœ«ç«¯å›ºå®šè€Œå…¶ä»–å…³èŠ‚è½¬åŠ¨æ—¶ï¼Œæ‰€æœ‰èƒ½è½¬åŠ¨çš„ä½å½¢æ„æˆé›¶ç©ºé—´ã€‚</p><p>å‰æ–‡æ¨å¯¼äº†æœ«ç«¯é€Ÿåº¦ä¸å…³èŠ‚è§’é€Ÿåº¦ä¹‹é—´çš„å…³ç³»ï¼š$\dot{\boldsymbol{x}}=\boldsymbol{J}(\boldsymbol{\theta})\dot{\boldsymbol{\theta}}$ ï¼Œè‹¥ $\boldsymbol{J}(\boldsymbol{\theta})$ å¯é€†ï¼Œå¯ä»¥å¾—åˆ° $\dot{\boldsymbol{\theta}}=\boldsymbol{J}^{-1}(\boldsymbol{\theta})\dot{\boldsymbol{x}}$ ã€‚</p><p>è‹¥å¯¹äºæœºæ¢°è‡‚ï¼Œé‡åˆ°å¥‡å¼‚ä½å½¢ï¼Œæˆ–å…³èŠ‚æ•°å¤§äºæœ«ç«¯åæ ‡æ•°ï¼Œæ­¤æ—¶ $\boldsymbol{J}(\boldsymbol{\theta})$ ä¸å¯é€†ã€‚æ•…å¼•å…¥ä¼ªé€†ï¼Œ $\boldsymbol{J}(\boldsymbol{\theta})$ çš„ä¼ªé€†è¡¨ç¤ºä¸º $\boldsymbol{J}^{\dagger}(\boldsymbol{\theta})$ ï¼Œæ— è®º $\boldsymbol{J}(\boldsymbol{\theta})$ æ˜¯å¦å¯é€†ï¼Œå…³èŠ‚è§’é€Ÿåº¦å‡å¯è¡¨ç¤ºä¸º $\dot{\boldsymbol{\theta}}=\boldsymbol{J}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{x}}$ ã€‚</p><p>ä¼ªé€†çš„è®¡ç®—å¯ä»¥åˆ†ä¸¤ç§æƒ…å†µ</p><ol><li>æ¬ çº¦æŸï¼Œå…³èŠ‚æ•°nï¼œæœ«ç«¯åæ ‡æ•°mï¼Œ $\boldsymbol{J}^{\dagger}\boldsymbol{J}=\boldsymbol{I},\boldsymbol{J}^{\dagger}=(\boldsymbol{J}^{T}\boldsymbol{J})^{-1}$ ï¼Œæ­¤æ—¶æ–¹ç¨‹å¯èƒ½æ— è§£ï¼Œç”¨ä»£ä»·å‡½æ•°ä½¿ç»“æœé€¼è¿‘è®¾å®šå€¼ã€‚</li><li>å†—ä½™çº¦æŸï¼Œå…³èŠ‚æ•°nï¼æœ«ç«¯åæ ‡æ•°mï¼Œ $\boldsymbol{J}\boldsymbol{J}^{\dagger}=\boldsymbol{I},\boldsymbol{J}^{\dagger}=\boldsymbol{J}^T(\boldsymbol{J}\boldsymbol{J}^{T})^{-1}$ ï¼Œæ­¤æ—¶æ–¹ç¨‹æœ‰æ— æ•°è§£ï¼Œè®¾å®šå…³èŠ‚çº¦æŸå¾—åˆ°æœ€ä¼˜ç»“æœã€‚</li></ol><p>å¯¹äºå†—ä½™çº¦æŸæœºæ¢°è‡‚ï¼Œè‹¥æƒ³åœ¨ä¿æŒæœ«ç«¯ä½å§¿ä¸å˜çš„å‰æä¸‹æ§åˆ¶å…¶ä»–å…³èŠ‚çš„çŠ¶æ€ï¼Œåˆ™éœ€åˆ©ç”¨é›¶ç©ºé—´ã€‚</p><p> $\dot{\boldsymbol{\theta}}=\boldsymbol{J}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{x}}$ æ˜¯ä¸€ä¸ªç‰¹è§£ï¼Œå…¶é€šè§£ä¸º $\dot{\boldsymbol{\theta}}=\boldsymbol{J}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{x}}+(\boldsymbol{I-}\boldsymbol{J}^{\dagger}(\boldsymbol{\theta})\boldsymbol{J}(\boldsymbol{\theta}))\boldsymbol{z}$  TODOåŸç†</p><p>å°† $\dot{\boldsymbol{x}}$ ç§°ä¸ºä»»åŠ¡ç©ºé—´ï¼Œ $\dot{\boldsymbol{\theta}}$ ç§°ä¸ºæ§åˆ¶ç©ºé—´ï¼Œ $\boldsymbol{z}$ ç§°ä¸ºé›¶ç©ºé—´ã€‚ $\dot{\boldsymbol{x}}$ ä¸­ä¸ºé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ï¼Œ $\boldsymbol{z}$ ä¸­ä¸ºä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ã€‚</p><h5 id="ä¸¤ä¸ªä»»åŠ¡"><a href="#ä¸¤ä¸ªä»»åŠ¡" class="headerlink" title="ä¸¤ä¸ªä»»åŠ¡"></a>ä¸¤ä¸ªä»»åŠ¡</h5><p>å¯¹äºä¸¤ä¸ªä»»åŠ¡ï¼Œé«˜ä¼˜å…ˆçº§ä»»åŠ¡ä¸º $\dot{\boldsymbol{w}}_1$ ï¼Œä½ä¼˜å…ˆçº§ä»»åŠ¡ä¸º $\dot{\boldsymbol{w}}_2$ </p><script type="math/tex; mode=display">\begin{aligned}\dot{\boldsymbol{w}}_{1}=\boldsymbol{J}_1(\boldsymbol{\theta})\dot{\boldsymbol{\theta}}\\\dot{\boldsymbol{w}}_{2}=\boldsymbol{J}_{2}(\boldsymbol{\theta})\dot{\boldsymbol{\theta}}\\\end{aligned}</script><p>å¯¹äºç¬¬ä¸€ä¸ªé«˜ä¼˜å…ˆçº§ä»»åŠ¡çš„å¼å­ï¼Œå…¶å†—ä½™æ§åˆ¶æ–¹ç¨‹ä¸ºï¼š</p><script type="math/tex; mode=display">\dot{\boldsymbol{\theta}}=\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{w}}_{1}+(\boldsymbol{I}-\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\boldsymbol{J}_{1}(\boldsymbol{\theta}))\boldsymbol{z}</script><p>å°†å…¶å¸¦å…¥ç¬¬äºŒä¸ªå¼å­ï¼Œå¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\dot{\boldsymbol{w}}_{2}=\boldsymbol{J}_{2}(\boldsymbol{\theta})(\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{w}}_{1}+(\boldsymbol{I}-\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\boldsymbol{J}_{1}(\boldsymbol{\theta}))\boldsymbol{z})</script><p>æ•´ç†å¾—ï¼š</p><script type="math/tex; mode=display">\boldsymbol{J}_{2}(\boldsymbol{\theta})(\boldsymbol{I}-\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\boldsymbol{J}_{1}(\boldsymbol{\theta}))\boldsymbol{z}=\dot{\boldsymbol{w}}_{2}-\boldsymbol{J}_{2}(\boldsymbol{\theta})\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{w}}_1</script><p>æ­¤æ—¶ç»“æœå¯èƒ½ä¸å”¯ä¸€ï¼Œä½¿ç”¨æœ€å°äºŒä¹˜æ³•ä¼˜åŒ–ä»£ä»·å‡½æ•°ã€‚åŒæ ·éœ€è¦åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ol><li>æ¬ çº¦æŸï¼Œ $\min |\boldsymbol{z}|_2$ </li><li>å†—ä½™çº¦æŸï¼Œ $\min |\boldsymbol{J}_{2}(\boldsymbol{\theta})(\boldsymbol{I}-\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\boldsymbol{J}_{1}(\boldsymbol{\theta}))\boldsymbol{z}-\dot{\boldsymbol{w}}_{2}+\boldsymbol{J}_{2}(\boldsymbol{\theta})\boldsymbol{J}_{1}^{\dagger}(\boldsymbol{\theta})\dot{\boldsymbol{w}}_1|_2$ </li></ol><h5 id="å¤šä¸ªä»»åŠ¡"><a href="#å¤šä¸ªä»»åŠ¡" class="headerlink" title="å¤šä¸ªä»»åŠ¡"></a>å¤šä¸ªä»»åŠ¡</h5><p>æ¨å¹¿åˆ°ä¸€èˆ¬å½¢å¼ï¼Œå¯¹äºnä¸ªä»»åŠ¡ï¼Œç¬¦åˆä»»åŠ¡ä¼˜å…ˆçº§çš„å…³èŠ‚é€Ÿåº¦ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\dot{\boldsymbol{q}}&=\sum_{i=1}^{n}\boldsymbol{N}_{i}\dot{\boldsymbol{q}}_{i}\\\dot{\boldsymbol{q}}_{i}&=(\boldsymbol{J}_{i}\overline{\boldsymbol{N}_{i}})^{\dagger}(\dot{\boldsymbol{x}}_{i}^{*}-\boldsymbol{J}_{i}\sum_{n=1}^{n-1}\boldsymbol{N}_{k}\dot{\boldsymbol{q}}_{k})\end{aligned}</script><p>å¼ä¸­ $\dot{\boldsymbol{x}}_{i}^{*}$ ä¸ºæœ€ä¼˜è§£ï¼Œ $\overline{\boldsymbol{N}_{i}}$ ä¸ºç»„åˆé›…å¯æ¯”çŸ©é˜µ $\overline{\boldsymbol{J}_{i}}$ çš„é›¶ç©ºé—´æŠ•å½±çŸ©é˜µï¼Œ $\overline{\boldsymbol{J}_i}=\begin{bmatrix}\boldsymbol{J}_1\\\boldsymbol{J}_2\\\vdots\\\boldsymbol{J}_{i-1}\end{bmatrix}$ ä¸ºæ‰€æœ‰ä»»åŠ¡ä¼˜å…ˆçº§é«˜äº $i$ çš„ä»»åŠ¡çš„é›…å¯æ¯”çŸ©é˜µçš„ç»„åˆã€‚</p><p>å†™æˆè¿­ä»£å½¢å¼ï¼š</p><script type="math/tex; mode=display">\dot{\boldsymbol{q}}_{i}=\dot{\boldsymbol{q}}_{i-1}+(\boldsymbol{J}_{i}\boldsymbol{N}_{i-1})^{\dagger}(\dot{\boldsymbol{x}}_{i}^{*}-\boldsymbol{J}_{i}\dot{\boldsymbol{q}}_{i-1})</script><h4 id="å…³èŠ‚ä½ç½®"><a href="#å…³èŠ‚ä½ç½®" class="headerlink" title="å…³èŠ‚ä½ç½®"></a>å…³èŠ‚ä½ç½®</h4><p>æ ¹æ®ä¸Šæ–‡çš„æ¨å¯¼ï¼Œå¯ä»¥å¾—åˆ°å…³èŠ‚ä½ç½®çš„è¿­ä»£å½¢å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\Delta\boldsymbol{q}_{1} &=\boldsymbol{J}_1^\dagger(\boldsymbol{x}_1^{des}-\boldsymbol{x}_1)\\\Delta\boldsymbol{q}_{2} &=\Delta\boldsymbol{q}_1+\boldsymbol{J}_{2|pre}^\dagger(\boldsymbol{x}_2^\mathrm{des}-\boldsymbol{x}_2-\boldsymbol{J}_2\Delta\boldsymbol{q}_1)\\&\vdots \\\Delta\boldsymbol{q}_{i} &=\Delta\boldsymbol{q}_{i-1}+\boldsymbol{J}_{i|pre}^{\dagger}(\boldsymbol{x}_{i}^{\mathrm{des}}-\boldsymbol{x}_{i}-\boldsymbol{J}_{i}\Delta\boldsymbol{q}_{i-1})\end{aligned}</script><p>å…¶ä¸­ï¼š</p><script type="math/tex; mode=display">\begin{aligned}&\boldsymbol{J}_{i|pre}=\boldsymbol{J}_{i}\boldsymbol{N}_{i-1}, \\&\boldsymbol{N}_{i-1}=\boldsymbol{N}_{0}\boldsymbol{N}_{1|0}\cdots\boldsymbol{N}_{i-1|i-2}, \\&\boldsymbol{N}_{0}=\boldsymbol{I}-\boldsymbol{J}_{c}^{\dagger}\boldsymbol{J}_{c}, \\&\boldsymbol{N}_{i|i-1}=\boldsymbol{I}-\boldsymbol{J}_{i|i-1}{}^{\dagger}\boldsymbol{J}_{i|i-1}.\end{aligned}</script><p>å…¶ä¸­ $\boldsymbol{J}_i$ ä¸ºç¬¬ $i$ é¡¹ä»»åŠ¡é›…å¯æ¯”çŸ©é˜µï¼› $\boldsymbol{x}_{i}^{\mathrm{des}}$ ä¸ºç¬¬ $i$ é¡¹ä»»åŠ¡çš„æœŸæœ›ä½ç½®ï¼› $\Delta\boldsymbol{q}_{i}$ ä¸ºæ ¹æ®ç¬¬ $i$ é¡¹ä»»åŠ¡è¿­ä»£è®¡ç®—å‡ºçš„å…³èŠ‚ä½ç½®å¢é‡ï¼› $\boldsymbol{J}_{i|pre}$ ä¸ºç¬¬ $i$ é¡¹ä»»åŠ¡åˆ°å…ˆå‰ä»»åŠ¡çš„é›¶ç©ºé—´æŠ•å½±ï¼› $\boldsymbol{J}_c$ ä¸ºæ¥è§¦çº¦æŸé›…å¯æ¯”çŸ©é˜µï¼›</p><h4 id="å…³èŠ‚é€Ÿåº¦ä¸åŠ é€Ÿåº¦"><a href="#å…³èŠ‚é€Ÿåº¦ä¸åŠ é€Ÿåº¦" class="headerlink" title="å…³èŠ‚é€Ÿåº¦ä¸åŠ é€Ÿåº¦"></a>å…³èŠ‚é€Ÿåº¦ä¸åŠ é€Ÿåº¦</h4><p>åŒç†å¯ä»¥å¾—åˆ°å…³èŠ‚é€Ÿåº¦ä¸åŠ é€Ÿåº¦ï¼ˆ $\text{dyn}$ ä»£è¡¨åŠ¨æ€ä¸€è‡´ä¼ªé€†ï¼š $\overline{\boldsymbol{J}^{\mathrm{dyn}}}=\boldsymbol{A}^{-1}\boldsymbol{J}^T\left(\boldsymbol{J}\boldsymbol{A}^{-1}\boldsymbol{J}^T\right)^{-1}$ ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\dot{\boldsymbol{q}}_i^{\mathrm{cmd}}&=\dot{\boldsymbol{q}}_{i-1}^{\mathrm{cmd}}+\boldsymbol{J}_{i|pre}^{\dagger}\left(\dot{\boldsymbol{x}}_i^{\mathrm{des}}-\boldsymbol{J}_i\dot{\boldsymbol{q}}_{i-1}^{\mathrm{cmd}}\right),\\\ddot{\boldsymbol{q}}_i^{\mathrm{cmd}}&=\ddot{\boldsymbol{q}}_{i-1}^{\mathrm{cmd}}+\overline{\boldsymbol{J}_{i|pre}^{\mathrm{dyn}}}\left(\ddot{\boldsymbol{x}}_i^{\mathrm{cmd}}-\dot{\boldsymbol{J}}_i\dot{\boldsymbol{q}}-\boldsymbol{J}_i\ddot{\boldsymbol{q}}_{i-1}^{\mathrm{cmd}}\right)\end{aligned}</script><p>å…¶ä¸­ï¼ˆ $\boldsymbol{K}_p$ å’Œ $\boldsymbol{K}_d$ åˆ†åˆ«æ˜¯ä½ç½®å’Œé€Ÿåº¦åé¦ˆå¢ç›Šï¼Œcmdä»£è¡¨æ§åˆ¶å‘½ä»¤ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{q}_i^{\mathrm{cmd}}&=\boldsymbol{q}_i+\Delta\boldsymbol{q}_i\\\ddot{\boldsymbol{x}}_i^\mathrm{cmd}&=\ddot{\boldsymbol{x}}^\mathrm{des}+\boldsymbol{K}_p\left(\boldsymbol{x}_i^\mathrm{des}-\boldsymbol{x}_i\right)+\boldsymbol{K}_d\left(\dot{\boldsymbol{x}}^\mathrm{des}-\dot{\boldsymbol{x}}\right)\end{aligned}</script><p>è®¡ç®—å‡ºçš„ $\boldsymbol{q}_i^{\mathrm{cmd}}$ å’Œ $\dot{\boldsymbol{q}}_i^{\mathrm{cmd}}$ å‘é€åˆ°å…³èŠ‚PDæ§åˆ¶å™¨ã€ $\ddot{\boldsymbol{q}}_i^{\mathrm{cmd}}$ å‘é€åˆ°QPè§„åˆ’å™¨è®¡ç®—æ‰­çŸ©å‘½ä»¤</p><h3 id="è®¡ç®—å…³èŠ‚åŠ›çŸ©"><a href="#è®¡ç®—å…³èŠ‚åŠ›çŸ©" class="headerlink" title="è®¡ç®—å…³èŠ‚åŠ›çŸ©"></a>è®¡ç®—å…³èŠ‚åŠ›çŸ©</h3><h4 id="æµ®åŠ¨åŸºåŠ¨åŠ›å­¦æ¨¡å‹"><a href="#æµ®åŠ¨åŸºåŠ¨åŠ›å­¦æ¨¡å‹" class="headerlink" title="æµ®åŠ¨åŸºåŠ¨åŠ›å­¦æ¨¡å‹"></a>æµ®åŠ¨åŸºåŠ¨åŠ›å­¦æ¨¡å‹</h4><p>å¯¹äºå›ºå®šæœºæ¢°è‡‚è¿™ç§åŸºåæ ‡ç³»å›ºå®šçš„æœºå™¨äººï¼Œåªéœ€çŸ¥é“æ¯ä¸ªå…³èŠ‚çš„è§’åº¦å³å¯çŸ¥é“æœºå™¨äººçš„å§¿æ€ã€‚ä½†å¯¹äºå››è¶³æœºå™¨äººæ¥è¯´åŸºåº§æ˜¯ä¸å›ºå®šçš„ï¼Œæ•…éœ€è¦åœ¨ä¸–ç•Œç³»ä¸æµ®åŠ¨åŸºåº§æœºå™¨äººæœ¬ä½“ç³»ä¹‹é—´å»ºç«‹ä¸€ä¸ªæ²¡æœ‰å®ä½“çš„ 6 è‡ªç”±åº¦å…³èŠ‚ï¼Œå…¶å…³èŠ‚ç©ºé—´å‘é‡ä¸º $\boldsymbol{q}={\begin{bmatrix}\boldsymbol{q}_f\\\boldsymbol{q}_j\end{bmatrix}}$ ï¼Œå…¶ä¸­ $\boldsymbol{q}_f$ ä»£è¡¨èº«ä½“æµ®åŠ¨åŸºçš„6ä¸ªè‡ªç”±åº¦ï¼Œ $\boldsymbol{q}_j$ ä»£è¡¨å…³èŠ‚çš„12ä¸ªè‡ªç”±åº¦ã€‚æµ®åŠ¨åŸºåŠ¨åŠ›å­¦æ–¹ç¨‹ä¸ºï¼š</p><script type="math/tex; mode=display">\boldsymbol{A}\ddot{\boldsymbol{q}}+\boldsymbol{b}+\boldsymbol{g}=\boldsymbol{S}_j^T\boldsymbol{\tau}+\boldsymbol{J}_{int}^T\boldsymbol{f}_{int}-\boldsymbol{J}_c^T\boldsymbol{f}_i</script><p>ä¸Šå¼ä¸­ $\boldsymbol{A}$ ä¸ºè´¨é‡ï¼ˆæƒ¯é‡ï¼‰çŸ©é˜µï¼› $\boldsymbol{b}$ ä¸ºå¯ç§‘æ°åŠ›ä¸ç¦»å¿ƒåŠ›é¡¹ï¼› $\boldsymbol{g}$ ä¸ºé‡åŠ›é¡¹ï¼› $\boldsymbol{S}_j$ ä¸ºé©±åŠ¨å…³èŠ‚é€‰æ‹©çŸ©é˜µï¼Œå°†é©±åŠ¨å…³èŠ‚çš„æ‰­çŸ©æ˜ å°„åˆ°æ•´ä¸ªé…ç½®ç©ºé—´ï¼› $\boldsymbol{f}_{int}$ ä¸ºå†…åŠ›ï¼› $\boldsymbol{f}_i$ ä¸ºè¶³åº•åŠ›ï¼› $\boldsymbol{J}$ ä¸ºçº¦æŸé›…å¯æ¯”çŸ©é˜µï¼Œå…¶ä¸­ $int$ ä»£è¡¨å†…éƒ¨çº¦æŸï¼› $c$ ä»£è¡¨æ¥è§¦çº¦æŸï¼Œ $\boldsymbol{J}$ æ»¡è¶³ä¸‹å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\boldsymbol{0}&=\boldsymbol{J}\dot{\boldsymbol{q}}\\\boldsymbol{0}&=\boldsymbol{J}\ddot{\boldsymbol{q}}+\dot{\boldsymbol{J}}\dot{\boldsymbol{q}}\end{aligned}</script><h4 id="æ¾å¼›ä¼˜åŒ–"><a href="#æ¾å¼›ä¼˜åŒ–" class="headerlink" title="æ¾å¼›ä¼˜åŒ–"></a>æ¾å¼›ä¼˜åŒ–</h4><p>åœ¨æœºå™¨äººçš„è¿åŠ¨è¿‡ç¨‹ä¸­éœ€è¦éµå¾ªåŠ¨åŠ›å­¦æ–¹ç¨‹ä»¥åŠæ»¡è¶³ä¸€äº›ä¸ç­‰å¼çº¦æŸæ¥ä¿è¯æœºå™¨äººçš„ç¨³å®šï¼Œæ•…ä½¿ç”¨QPä¼˜åŒ–ã€‚å¼•å…¥æ¾å¼›å˜é‡ $\boldsymbol{\delta}_{f_{r}}$ ã€ $\boldsymbol{\delta}_{f}$ ï¼Œå…è®¸æœºå™¨äººåŸºåº§ä¸æœŸæœ›çŠ¶æ€ä¹‹é—´å­˜åœ¨åå·®ï¼Œè¿™ä½¿å¾—æœºæ¢°ç‹—åœ¨ä¸€äº›ä¸å¯æ§åˆ¶çš„å§¿æ€æ¡ä»¶ä¸‹ï¼Œä»èƒ½è®¡ç®—å‡ºç›¸åº”çš„æ§åˆ¶ä¿¡å·ï¼Œæ›´æœ‰åˆ©äºæœºå™¨äººçš„é«˜é€Ÿè¿åŠ¨ã€‚</p><script type="math/tex; mode=display">\begin{aligned}\mathrm{min} \quad& \boldsymbol{\delta}_{f_r}^T\boldsymbol{Q}_1\boldsymbol{\delta}_{f_r}+\boldsymbol{\delta}_f^T\boldsymbol{Q}_2\boldsymbol{\delta}_f\\\mathrm{s.t} \quad& \boldsymbol{S}_f (\boldsymbol{A}\ddot{\boldsymbol{q}}+\boldsymbol{b}+\boldsymbol{g})=\boldsymbol{S}_f \boldsymbol{J}_c^T\boldsymbol{f}_r\quad&\text{(æµ®åŠ¨åŸºåŠ¨åŠ›å­¦æ–¹ç¨‹)}\\&\ddot{\boldsymbol{q}}=\ddot{\boldsymbol{q}}^{\mathrm{cmd}}+\begin{bmatrix}\boldsymbol{\delta}_f\\\boldsymbol{o}_{nj}\end{bmatrix}\quad&\text{(åŠ é€Ÿåº¦)}\\&\boldsymbol{f}_r=\boldsymbol{f}_r^{\mathrm{MPC}}+\boldsymbol{\delta}_{f_r}\quad&\text{(è¶³ç«¯æ¥è§¦ååŠ›)}\\&\boldsymbol{W}\boldsymbol{f}_{r}\geq \boldsymbol{0} \quad&\text{(è¶³ç«¯æ‘©æ“¦çº¦æŸ)}\end{aligned}</script><p>å…¶ä¸­ï¼Œ $\boldsymbol{f}_r^{\mathrm{MPC}}$ ä¸ºMPCè®¡ç®—çš„æ”¯æ’‘è…¿çš„åä½œç”¨åŠ›ï¼› $\boldsymbol{S}_f$ ä¸ºé€‰æ‹©çŸ©é˜µï¼› $\boldsymbol{W}$ ä¸ºæƒé‡çŸ©é˜µï¼›</p><p>å°†ä¼˜åŒ–å‡ºçš„åœ°é¢ååŠ›ã€å…³èŠ‚åŠ é€Ÿåº¦åŠå‰æ–‡è®¡ç®—å¾—åˆ°çš„å…³èŠ‚ä½ç½®ã€é€Ÿåº¦å¸¦åˆ°åŠ¨åŠ›å­¦æ–¹ç¨‹é‡Œï¼Œå¯ä»¥æ±‚å‡ºæ”¯æ’‘è…¿ã€æ‘†åŠ¨è…¿çš„å…³èŠ‚åŠ›çŸ©ï¼ˆå¯¹äºæ‘†åŠ¨è…¿æ¥è¯´ $\boldsymbol{f}_r=0$ ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{bmatrix}\boldsymbol{\tau}_f\\\boldsymbol{\tau}_j\end{bmatrix}=\boldsymbol{A}\ddot{\boldsymbol{q}}+\boldsymbol{b}+\boldsymbol{g}-\boldsymbol{J}_c\boldsymbol{f}_r</script><h3 id="å‘ç”µæœºå‘é€æ§åˆ¶åŠ›çŸ©"><a href="#å‘ç”µæœºå‘é€æ§åˆ¶åŠ›çŸ©" class="headerlink" title="å‘ç”µæœºå‘é€æ§åˆ¶åŠ›çŸ©"></a>å‘ç”µæœºå‘é€æ§åˆ¶åŠ›çŸ©</h3><p>ä¹‹åä½¿ç”¨æ±‚å¾—çš„å…³èŠ‚åŠ›çŸ©åšä¸ºå‰é¦ˆï¼Œå†åŠ ä¸Šå…³èŠ‚ä½ç½®ã€é€Ÿåº¦çš„PDæ§åˆ¶ï¼Œå¯¹æœºå™¨äººçš„æ”¯æ’‘è…¿ã€æ‘†åŠ¨è…¿è¿›è¡Œæ§åˆ¶ã€‚</p><script type="math/tex; mode=display">\boldsymbol{\tau}_{i}=\boldsymbol{\tau}^\mathrm{cmd}+\boldsymbol{K}_{p}\left(\boldsymbol{q}_{i}^\mathrm{cmd}-\boldsymbol{q}_{i}\right)+\boldsymbol{K}_{d}\left(\dot{\boldsymbol{q}}_{i}^\mathrm{cmd}-\dot{\boldsymbol{q}}_{i}\right)</script><h2 id="å‚è€ƒæ–‡çŒ®"><a href="#å‚è€ƒæ–‡çŒ®" class="headerlink" title="å‚è€ƒæ–‡çŒ®"></a>å‚è€ƒæ–‡çŒ®</h2><h3 id="è¶³å¼æœºå™¨äºº"><a href="#è¶³å¼æœºå™¨äºº" class="headerlink" title="è¶³å¼æœºå™¨äºº"></a>è¶³å¼æœºå™¨äºº</h3><p><a href="https://detail.tmall.com/item.htm?spm=a212k0.12153887.0.0.5487687dBgiovR&amp;id=704510718152">å››è¶³æœºå™¨äººæ§åˆ¶ç®—æ³•â€”å»ºæ¨¡ã€æ§åˆ¶ä¸å®è·µ</a></p><p>åŸºäºç¨³å®šæ€§çš„ä»¿ç”Ÿå››è¶³æœºå™¨äººæ§åˆ¶ç³»ç»Ÿè®¾è®¡ï¼ˆäºå®ªå…ƒï¼‰</p><p>Legged Robots That Balance</p><p>Quadrupedal Locomotion : An Introduction to the Control of Four-legged Robots</p><h3 id="çŠ¶æ€ä¼°è®¡å™¨-1"><a href="#çŠ¶æ€ä¼°è®¡å™¨-1" class="headerlink" title="çŠ¶æ€ä¼°è®¡å™¨"></a>çŠ¶æ€ä¼°è®¡å™¨</h3><p><a href="https://zhuanlan.zhihu.com/p/644393000">ã€å¹²è´§|å¼€æºMIT Min cheetahæœºæ¢°ç‹—è®¾è®¡(å)ã€‘|çŠ¶æ€ä¼°è®¡æ§åˆ¶å™¨è®¾è®¡</a></p><p><a href="https://www.cnblogs.com/pinking/p/9201405.html">å¡å°”æ›¼æ»¤æ³¢ï¼ˆkalmanï¼‰ç›¸å…³ç†è®ºä»¥åŠä¸HMMã€æœ€å°äºŒä¹˜æ³•å…³ç³»</a></p><h3 id="MPCéƒ¨åˆ†"><a href="#MPCéƒ¨åˆ†" class="headerlink" title="MPCéƒ¨åˆ†"></a>MPCéƒ¨åˆ†</h3><p>Dynamic Locomotion in the MIT Cheetah 3 Through Convex Model-Predictive Control</p><p><a href="https://zhuanlan.zhihu.com/p/190044338">MITå››è¶³æœºå™¨äººCheetah 3æ§åˆ¶æ–¹æ¡ˆç†è§£ç¬”è®°ï¼ˆ2ï¼‰â€”â€”Convex Mpcèº«ä½“å§¿æ€æ§åˆ¶</a></p><p><a href="https://zhuanlan.zhihu.com/p/640057159">ã€å¹²è´§|å¼€æºMIT Min cheetahæœºæ¢°ç‹—è®¾è®¡(ä¸ƒ)ã€‘|MPCæ§åˆ¶å™¨ä¹‹çŠ¶æ€æ–¹ç¨‹å»ºç«‹</a></p><p><a href="https://zhuanlan.zhihu.com/p/640296839">ã€å¹²è´§|å¼€æºMIT Min cheetahæœºæ¢°ç‹—è®¾è®¡(å…«)ã€‘|MPCæ§åˆ¶å™¨è®¾è®¡</a></p><p><a href="https://blog.csdn.net/Kalenee/article/details/126440918">Cheetah-Softwareæ–¹æ¡ˆåˆ†æ</a></p><p><a href="https://zhuanlan.zhihu.com/p/268880700">å››è¶³æœºå™¨äººå­¦ä¹ ç¬”è®°ï¼ˆ3ï¼‰cheetah3 convexMPCè®ºæ–‡å­¦ä¹ ç¬”è®°</a></p><h3 id="WBCéƒ¨åˆ†"><a href="#WBCéƒ¨åˆ†" class="headerlink" title="WBCéƒ¨åˆ†"></a>WBCéƒ¨åˆ†</h3><p>Highly Dynamic Quadruped Locomotion via Whole-Body Impulse Control and Model Predictive Control</p><p><a href="https://zhuanlan.zhihu.com/p/190049065">MITå››è¶³æœºå™¨äººæ§åˆ¶æ–¹æ¡ˆç†è§£ç¬”è®°ï¼ˆ3ï¼‰â€”â€”Mini Cheetah 19å¹´çš„MPC+WBCæ§åˆ¶æ–¹æ¡ˆ</a></p><p><a href="https://zhuanlan.zhihu.com/p/641297823">ã€å¹²è´§|å¼€æºMIT Min cheetahæœºæ¢°ç‹—è®¾è®¡(ä¹)ã€‘|WBCæ§åˆ¶å™¨è®¾è®¡</a></p><p><a href="https://blog.csdn.net/qq_46304090/article/details/126603897">æœºå™¨äººå†—ä½™è‡ªç”±åº¦ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„é›¶ç©ºé—´æ¦‚å¿µ</a></p><p><a href="https://blog.csdn.net/weixin_42235171/article/details/126447926">ETHæœºå™¨äººåŠ¨åŠ›å­¦è®²ä¹‰ï¼šåŸºäºé›¶ç©ºé—´æ–¹æ³•çš„å…¨èº«è¿åŠ¨æ§åˆ¶ï¼ˆWBCï¼‰-1</a></p><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>Computationally-Robust and Efficient Prioritized Whole-Body Controller with Contact Constraints</p><h3 id="æœºå™¨äººå­¦ç›¸å…³ä¹¦ç±"><a href="#æœºå™¨äººå­¦ç›¸å…³ä¹¦ç±" class="headerlink" title="æœºå™¨äººå­¦ç›¸å…³ä¹¦ç±"></a>æœºå™¨äººå­¦ç›¸å…³ä¹¦ç±</h3><p>Robot Modeling and Controlï¼ˆæœºå™¨äººå»ºæ¨¡å’Œæ§åˆ¶ï¼‰</p><p>Robotics, Vision and Control Fundamental Algorithms In MATLABï¼ˆæœºå™¨äººå­¦ æœºå™¨è§†è§‰ä¸æ§åˆ¶ MATLABç®—æ³•åŸºç¡€ï¼‰</p><p>Introduction to Robotics Mechanics and Controlï¼ˆæœºå™¨äººå­¦å¯¼è®ºï¼‰</p><p>Modern Robotic Mechanics, Planning, and Controlï¼ˆç°ä»£æœºå™¨äººå­¦ï¼šæœºæ„ã€è§„åˆ’ä¸æ§åˆ¶ï¼‰</p><p>Control of Robot Manipulators in Joint Space</p><p>Rigid-Body Dynamics Algorithms</p><p>Springer Handbook of Roboticsï¼ˆæœºå™¨äººæ‰‹å†Œï¼‰</p><p>Theory of applied robotics: kinematics, dynamics, and control.ï¼ˆåº”ç”¨æœºå™¨äººå­¦ï¼šè¿åŠ¨å­¦ã€åŠ¨åŠ›å­¦ä¸æ§åˆ¶æŠ€æœ¯ï¼‰</p><p>Robot Dynamics Lecture Notesï¼ˆæœºå™¨äººåŠ¨åŠ›å­¦è¯¾ç¨‹ç¬”è®°ï¼‰</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.robotsfan.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æœºå™¨äºº" scheme="https://www.robotsfan.com/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
  </entry>
  
  <entry>
    <title>ETHæœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘</title>
    <link href="https://www.robotsfan.com/posts/ffad622d.html"/>
    <id>https://www.robotsfan.com/posts/ffad622d.html</id>
    <published>2024-02-01T11:00:00.000Z</published>
    <updated>2024-07-17T03:05:20.639Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ETHæœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘"><a href="#ETHæœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘" class="headerlink" title="ETHæœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘"></a>ETHæœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘</h1><p>å®˜ç½‘ï¼š<a href="https://center-for-robotics.ethz.ch/education/robotics-student-fellowship.html">https://center-for-robotics.ethz.ch/education/robotics-student-fellowship.html</a></p><p>æœºå™¨äººå­¦å·²ç»æˆä¸ºå…¨çƒæ•™è‚²å’Œç ”ç©¶é¢†åŸŸä¸­å½±å“æ·±è¿œçš„ä¸€ä¸ªé‡è¦é¢†åŸŸï¼Œå¯¹ç¤¾ä¼šå’Œç»æµäº§ç”Ÿäº†å¼ºå¤§çš„å½±å“ã€‚è‹é»ä¸–è”é‚¦ç†å·¥å­¦é™¢ï¼ˆETHï¼‰æœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘ï¼ˆETH RSFï¼‰è®¡åˆ’ä¸ºç ”ç©¶ç”Ÿæä¾›äº†åœ¨ä»–ä»¬é€‰æ‹©çš„æœºå™¨äººå­¦ç‰¹å®šä¸»é¢˜ä¸Šä¸ä¸“å®¶ä¸€èµ·ç ”ç©¶çš„æœºä¼šã€‚è¯¥å¥–å­¦é‡‘ä¸»è¦åœ¨å¤å­£ï¼ˆ7æœˆ - 8æœˆï¼‰è¿›è¡Œï¼Œå¯¹å…¨çƒæ‰€æœ‰å­¦ç”Ÿå¼€æ”¾ã€‚è‹é»ä¸–ETHå¤§å­¦çš„RobotXå€¡è®®è‡´åŠ›äºåŸ¹å…»å’Œä¿ƒè¿›å¤šæ ·æ€§å’Œå¹³ç­‰æ–‡åŒ–ã€‚</p><h2 id="ç”³è¯·å‘¨æœŸï¼š"><a href="#ç”³è¯·å‘¨æœŸï¼š" class="headerlink" title="ç”³è¯·å‘¨æœŸï¼š"></a>ç”³è¯·å‘¨æœŸï¼š</h2><p>2024å¹´1æœˆ15æ—¥è‡³2æœˆ29æ—¥åˆå¤œï¼ˆä¸­æ¬§æ—¶é—´ï¼‰ã€‚</p><h2 id="è®¡åˆ’æ—¥æœŸï¼š"><a href="#è®¡åˆ’æ—¥æœŸï¼š" class="headerlink" title="è®¡åˆ’æ—¥æœŸï¼š"></a>è®¡åˆ’æ—¥æœŸï¼š</h2><p>è¯¥è®¡åˆ’å°†äº2024å¹´7æœˆ3æ—¥è‡³8æœˆ31æ—¥æœŸé—´è¿›è¡Œã€‚</p><h2 id="èµ„æ ¼ï¼š"><a href="#èµ„æ ¼ï¼š" class="headerlink" title="èµ„æ ¼ï¼š"></a>èµ„æ ¼ï¼š</h2><p>æ‰€æœ‰æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„ç”³è¯·äººå‡æœ‰èµ„æ ¼å‚åŠ è¯¥è®¡åˆ’ï¼š</p><ul><li>æ‚¨å¯ä»¥åœ¨7æœˆ3æ—¥è‡³8æœˆ31æ—¥æœŸé—´å‚åŠ æ•´ä¸ªå¥–å­¦é‡‘æœŸã€‚</li><li>æ‚¨ç›®å‰æ­£æ³¨å†Œåœ¨ç¡•å£«è¯¾ç¨‹ä¸­ï¼Œé¢„è®¡æ¯•ä¸šæ—¥æœŸæœ€æ—©ä¸ºå¥–å­¦é‡‘åçš„æ˜¥å­£ï¼ˆåœ¨ä¸€æ‰€é¡¶å°–å­¦æ ¡è¡¨ç°å‡ºè‰²çš„å¤§å››å­¦ç”Ÿä¹Ÿæœ‰èµ„æ ¼ï¼‰ã€‚</li></ul><h1 id="è®¡åˆ’ç»“æ„"><a href="#è®¡åˆ’ç»“æ„" class="headerlink" title="è®¡åˆ’ç»“æ„"></a>è®¡åˆ’ç»“æ„</h1><p>è‹é»ä¸–ETH RobotXå€¡è®®çš„æœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘è®¡åˆ’è‡´åŠ›äºåœ¨è®¡åˆ’ç›¸å…³å®éªŒå®¤ä¹‹ä¸€è¿›è¡Œç ”ç©¶ã€‚</p><ul><li><strong>æ—¶é—´èŒƒå›´ï¼š7æœˆ1æ—¥è‡³8æœˆ31æ—¥ã€‚</strong> è¯·æ³¨æ„ï¼Œå¥–å­¦é‡‘çš„æ—¶é—´å’ŒæŒç»­æ—¶é—´æ˜¯å›ºå®šçš„ï¼Œæ²¡æœ‰ä¾‹å¤–ã€‚</li><li><strong>èµ„æ ¼ã€‚</strong> é¢„è®¡åœ¨2ä¸ªæœˆå¥–å­¦é‡‘åæœ€æ—©åœ¨æ˜¥å­£å­¦æœŸæ¯•ä¸šçš„å…¨çƒç¡•å£«ç”Ÿï¼ˆåœ¨ä¸€æ‰€é¡¶å°–å­¦æ ¡è¡¨ç°å‡ºè‰²çš„å¤§å››å­¦ç”Ÿä¹Ÿæœ‰èµ„æ ¼ï¼‰ã€‚</li><li><strong>ç ”ç©¶ç»éªŒã€‚</strong> å¥–å­¦é‡‘è·å¾—è€…å°†ä½œä¸ºRobotXå€¡è®®ç ”ç©¶å°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œå¼€å±•ä¸å…¶å…´è¶£ç›¸å…³çš„ç ”ç©¶é¡¹ç›®ã€‚è¿™åŒ…æ‹¬ä¸å°ç»„æˆå‘˜äº’åŠ¨å’Œåˆä½œã€‚</li><li><strong>ç¤¾äº¤ä¸äº¤å¾€ã€‚</strong> å°†ä¸¾åŠä¸€ç³»åˆ—ç°åœºç¤¾äº¤æ´»åŠ¨ï¼Œå¸®åŠ©å¥–å­¦é‡‘è·å¾—è€…ä¸ä»–ä»¬æ‰€åœ¨ç ”ç©¶å°ç»„ä»¥å¤–çš„äººå»ºç«‹è”ç³»ï¼ŒåŒ…æ‹¬ETHæœ¬ç§‘å’Œç ”ç©¶ç”Ÿæ°´å¹³çš„å­¦ç”Ÿã€‚</li><li><strong>ç»æµå¥–åŠ±ã€‚</strong> å¥–å­¦é‡‘è·å¾—è€…å°†è·å¾—4000ç‘å£«æ³•éƒçš„æ´¥è´´ï¼Œç”¨äºæ”¯ä»˜ä½æˆ¿å’Œç”Ÿæ´»è´¹ç”¨ã€‚</li><li><strong>æ—…è¡Œè´¹ç”¨ã€‚</strong> å°†æ”¯ä»˜æ—…è¡Œå’Œç­¾è¯è´¹ç”¨ã€‚å­¦ç”Ÿå¯ä»¥åœ¨è®¡åˆ’å¼€å§‹æ—¶æ ¹æ®ç¥¨æ®ç”³è¯·æ—…è¡Œè´¹ç”¨ï¼Œæµ·å¤–èˆªç­æœ€é«˜ä¸º1200ç‘å£«æ³•éƒï¼ŒçŸ­é€”èˆªç­æœ€é«˜ä¸º500ç‘å£«æ³•éƒã€‚åªæœ‰ç»æµèˆ±ï¼ˆå¸¦ä¸€ä¸ªæ‰˜è¿è¡Œæï¼‰å’ŒäºŒç­‰ç«è½¦ç¥¨æ‰æœ‰èµ„æ ¼è·å¾—æŠ¥é”€ã€‚æœ€ç»ˆé‡‘é¢å°†æ ¹æ®å…·ä½“æƒ…å†µç¡®å®šã€‚</li><li><strong>ä½å®¿ã€‚</strong> è¯¥è®¡åˆ’æä¾›æ‰€æœ‰å¥–å­¦é‡‘è·å¾—è€…çš„ä½å®¿ï¼Œå¹¶äº‹å…ˆä»å¥–å­¦é‡‘ä¸­æ”¯ä»˜ã€‚</li></ul><h1 id="å¦‚ä½•ç”³è¯·"><a href="#å¦‚ä½•ç”³è¯·" class="headerlink" title="å¦‚ä½•ç”³è¯·"></a>å¦‚ä½•ç”³è¯·</h1><p><strong>åœ¨åœ¨çº¿æäº¤ç”³è¯·ä¹‹å‰ï¼Œè¯·ä»”ç»†é˜…è¯»ä»¥ä¸‹ä¿¡æ¯å¹¶å‡†å¤‡æ‰€æœ‰æ‰€éœ€æ–‡ä»¶ã€‚</strong></p><h2 id="èµ„æ ¼"><a href="#èµ„æ ¼" class="headerlink" title="èµ„æ ¼"></a>èµ„æ ¼</h2><p>å¦‚æœæ‚¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼Œåˆ™ç¬¦åˆæœºå™¨äººå­¦ç”Ÿå¥–å­¦é‡‘çš„èµ„æ ¼ï¼š</p><ul><li>æ‚¨å·²æ³¨å†Œåœ¨æœºå™¨äººå­¦æˆ–ç›¸å…³é¢†åŸŸï¼ˆä¾‹å¦‚ç”µæ°”å·¥ç¨‹ï¼Œæœºæ¢°å·¥ç¨‹ï¼‰çš„ç¡•å£«å­¦ä¹ è®¡åˆ’ä¸­ã€‚åœ¨ä¸€æ‰€é¡¶å°–å­¦æ ¡è¡¨ç°å‡ºè‰²çš„å¤§å››å­¦ç”Ÿä¹Ÿæœ‰èµ„æ ¼ã€‚</li><li>æ‚¨çš„é¢„è®¡æ¯•ä¸šæ—¥æœŸä¸º2025å¹´1æœˆæˆ–ä¹‹åã€‚</li><li>æ‚¨å¯ä»¥å‚åŠ ä»7æœˆ3æ—¥åˆ°8æœˆ31æ—¥æœŸé—´çš„æ•´ä¸ªå¥–å­¦é‡‘æœŸã€‚</li></ul><p><strong>å½•å–æµç¨‹ï¼š</strong><br>å°†æ ¹æ®æä¾›çš„æ–‡ä»¶è¯„ä¼°æ‚¨çš„ç”³è¯·ã€‚ç”³è¯·è¿‡ç¨‹çš„æœ€åä¸€æ­¥å¯èƒ½åŒ…æ‹¬ä¸å…¥é€‰å€™é€‰äººè¿›è¡Œçš„é¢è¯•ã€‚</p><h2 id="è¯­è¨€è¦æ±‚"><a href="#è¯­è¨€è¦æ±‚" class="headerlink" title="è¯­è¨€è¦æ±‚"></a>è¯­è¨€è¦æ±‚</h2><p>è¯¥è®¡åˆ’å®Œå…¨ä»¥è‹±è¯­è¿›è¡Œã€‚ä¸éœ€è¦æ­£å¼è¯æ˜ã€‚ä½†æ˜¯ï¼Œå¥–å­¦é‡‘éœ€è¦å¯¹è‹±è¯­å…·æœ‰è‰¯å¥½çš„å·¥ä½œçŸ¥è¯†ã€‚æ‚¨çš„è¯­è¨€èƒ½åŠ›å¯èƒ½ä¼šåœ¨é¢è¯•è¿‡ç¨‹ä¸­è¿›è¡Œè¯„ä¼°ã€‚</p><h2 id="å‡†å¤‡ç”³è¯·"><a href="#å‡†å¤‡ç”³è¯·" class="headerlink" title="å‡†å¤‡ç”³è¯·"></a>å‡†å¤‡ç”³è¯·</h2><p>è¯·é¦–å…ˆæ¢ç´¢å‚ä¸ä¸»åŠå®éªŒå®¤çš„æ•™èŒæˆå‘˜åŠå…¶ç ”ç©¶ä¸»é¢˜ã€‚</p><p>åœ¨æ‚¨çš„ç”³è¯·ä¸­ï¼Œå°†è¦æ±‚æ‚¨æŒ‡å®šä¸‰ä¸ªå®éªŒå®¤ä»¥è¿›è¡Œç ”ç©¶ï¼ˆæŒ‰ä¼˜å…ˆé¡ºåºï¼‰ã€‚è¿™å°†å¸®åŠ©è®¡åˆ’åè°ƒæœ€ä½³çš„å®éªŒå®¤å®‰ç½®ã€‚</p><p><strong>å¤‡æ³¨ï¼šè¯·ä¸è¦ç›´æ¥è”ç³»æ•™èŒæˆå‘˜ã€‚</strong></p><p>åœ¨ç”³è¯·ä¹‹å‰ï¼Œè¯·å‡†å¤‡æ‰€æœ‰æ‰€éœ€æ–‡ä»¶ï¼ˆä»¥è‹±è¯­ä¸ºPDFæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶æœ€å¤§10MBï¼‰ï¼š</p><ul><li>æ‚¨çš„ç®€å†ã€‚è¯·ä½¿ç”¨ <a href="https://europass.cedefop.europa.eu/documents/curriculum-vitae">å¤–éƒ¨é“¾æ¥Europassæ ¼å¼</a>ã€‚</li><li>æ‚¨æ‰€åœ¨å¤§å­¦çš„å®˜æ–¹å­¦æœ¯æˆç»©å•</li><li>åŠ¨æœºä¿¡/ä¸ªäººé™ˆè¿°ï¼ˆæœ€å¤š1é¡µï¼‰ã€‚ç”¨æ‚¨è‡ªå·±çš„è¯­è¨€æè¿°ä¸ºä½•é€‰æ‹©äº†æ‚¨æå‡ºçš„ç§‘å­¦ç ”ç©¶é¢†åŸŸã€‚è§£é‡Šæ‚¨å¸Œæœ›é€šè¿‡æ¥åˆ°ETHå®ç°ä»€ä¹ˆç›®æ ‡ï¼Œä»¥åŠå®ƒå°†å¦‚ä½•æ”¯æŒæ‚¨çš„å­¦æœ¯ç”Ÿæ¶¯å¹¶ä¸ºä»äº‹ç ”ç©¶å·¥ä½œåšå¥½å‡†å¤‡ã€‚è‰¯å¥½çš„ä¸ªäºº</li></ul><p>é™ˆè¿°å¯ä»¥åœ¨åŠé¡µçº¸ä¸Šå†™å‡ºï¼Œæ‚¨åº”è¯¥åŠªåŠ›ä¸è¶…è¿‡ä¸€æ•´é¡µA4ã€‚è¯·æ³¨æ„æ•´ç†å¾—ä½¿å…¶æ˜“äºé˜…è¯»ã€‚</p><ul><li><p>ä¸¤ä½å­¦æœ¯æ¨èäººã€‚</p><p>åœ¨åœ¨çº¿ç”³è¯·ä¸­ï¼Œæ‚¨åº”æä¾›è¿™ä¸¤ä½å­¦æœ¯æ¨èäººçš„è”ç³»æ–¹å¼ã€‚æ‚¨åº”èƒ½å¤Ÿä¸ºæ¯ä½å­¦æœ¯æ¨èäººæä¾›ä»¥ä¸‹ä¿¡æ¯ï¼šiï¼‰å§“åï¼Œiiï¼‰èŒç§°ï¼Œiiiï¼‰èŒåŠ¡ï¼Œivï¼‰ç½‘ç«™/è°·æ­Œå­¦è€…ï¼Œvï¼‰å¤§å­¦/å…¬å¸ï¼Œviï¼‰ç”µå­é‚®ä»¶ã€‚ä»¥ä¸‹æ˜¯è¢«æ¥å—çš„â€œå­¦æœ¯æ¨èäººâ€çš„ä¾‹å­ï¼š</p><ul><li>ç¡•å£«/å­¦å£«è®ºæ–‡å¯¼å¸ˆ</li><li>ç¡•å£«/å­¦å£«å¯¼å¸ˆ</li><li>ç¡•å£«/å­¦å£«é¡¹ç›®åè°ƒå‘˜</li><li>æ‚¨å·²å‚åŠ è¿‡çš„é¡¹ç›®è¯¾ç¨‹çš„è´Ÿè´£æ•™æˆ</li></ul></li><li><p>æ¨èä¿¡ï¼Œç”±æ‚¨çš„å­¦æœ¯æ¨èäººä¹‹ä¸€æäº¤ï¼ˆæ¯ä½æ¨èäººä¸€ä¸ªï¼‰è‡³ <a href="mailto:robotics-student-fellowship@ethz.ch">robotics-student-fellowship@ethz.ch</a>ï¼Œä¸»é¢˜ä¸º <strong>{å­¦ç”Ÿå}-{å­¦ç”Ÿå§“}-reference-letter-{æ¨èäººå§“}</strong>ã€‚æ¨èäººåº”ä½¿ç”¨ <a href="https://ethz.ch/content/dam/ethz/special-interest/dual/robotics-dam/documents/Forms/ETH-RSF_RecommendationLetter-Form.pdf">ä¸‹è½½ç›¸å…³è¡¨æ ¼ï¼ˆPDFï¼Œ438 KBï¼‰</a>ã€‚ä»–ä»¬å¯ä»¥ä½¿ç”¨ç”µå­ç­¾åç­¾ç½²æ¨èï¼Œæˆ–è€…æ‰“å°ï¼Œç­¾ç½²ï¼Œå¹¶æ‰«æè¡¨æ ¼ã€‚è¿™ä¸¤å°ä¿¡å¿…é¡»åœ¨ç”³è¯·å‘¨æœŸç»“æŸä¹‹å‰æäº¤ã€‚</p></li></ul><p><strong>åªæœ‰å…·æœ‰æ‰€æœ‰å¿…éœ€æ–‡ä»¶çš„å®Œæ•´ç”³è¯·æ‰èƒ½è¢«è€ƒè™‘å½•å–ã€‚</strong></p><h2 id="åœ¨çº¿ç”³è¯·"><a href="#åœ¨çº¿ç”³è¯·" class="headerlink" title="åœ¨çº¿ç”³è¯·"></a>åœ¨çº¿ç”³è¯·</h2><p>åœ¨ç”³è¯·ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²é˜…è¯» <a href>å‡†å¤‡ç”³è¯·</a>ï¼Œå¹¶å°†æ‰€æœ‰æ‰€éœ€æ–‡ä»¶å‡†å¤‡ä¸ºPDFæ–‡ä»¶ã€‚</p><ol><li><p>é¦–å…ˆï¼Œæ‚¨éœ€è¦ <a href="https://sirop.org/app/register">å¤–éƒ¨é“¾æ¥åœ¨SiROPæ³¨å†Œ</a></p><p>åœ¨æ³¨å†Œæ—¶ï¼Œæœç´¢æ‚¨çš„æœ¬æ ¡å¤§å­¦å¹¶é€‰æ‹©åˆ—è¡¨ä¸­çš„å­¦æ ¡ï¼Œæˆ–ä½¿ç”¨ç”µå­é‚®ä»¶åœ°å€åˆ›å»ºå¸æˆ·ã€‚æ³¨å†Œåï¼ŒSiROPå°†é‚€è¯·æ‚¨ä¸æ‚¨è‡ªå·±çš„æœºæ„åˆä½œã€‚<strong>å¦‚æœæ‚¨æƒ³ç”³è¯·ï¼Œåˆ›å»ºè¿™ç§å…³è”å¹¶ä¸æ˜¯å¿…éœ€çš„æ­¥éª¤ã€‚</strong></p></li><li><p>å®ŒæˆSiROPæ³¨å†Œåï¼Œè¯·æŒ‰ç…§æ­¤é“¾æ¥æ“ä½œï¼š</p><p><a href="https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl">https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl</a> </p><p>ç”³è¯·é“¾æ¥ï¼š</p><p><a href="https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl">https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl</a></p><p>ç”³è¯·æˆªæ­¢æ—¥æœŸä¸º2024å¹´2æœˆ29æ—¥åˆå¤œï¼ˆä¸­æ¬§æ—¶é—´ï¼‰ã€‚</p></li><li><p>å•å‡»é“¾æ¥SiROPæœºä¼šé¡¶éƒ¨çš„â€œç«‹å³ç”³è¯·â€æŒ‰é’®ã€‚</p><p><strong>åªæœ‰å…·æœ‰æ‰€æœ‰å¿…éœ€æ–‡ä»¶çš„å®Œæ•´ç”³è¯·æ‰èƒ½è¢«è€ƒè™‘å½•å–ã€‚</strong></p></li></ol><h1 id="å¸¸è§é—®é¢˜è§£ç­”"><a href="#å¸¸è§é—®é¢˜è§£ç­”" class="headerlink" title="å¸¸è§é—®é¢˜è§£ç­”"></a>å¸¸è§é—®é¢˜è§£ç­”</h1><p>å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œæœªåœ¨å¦‚ä½•ç”³è¯·éƒ¨åˆ†æˆ–æˆ‘ä»¬çš„å¸¸è§é—®é¢˜è§£ç­”ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼Œè¯·å‘é€ç”µå­é‚®ä»¶è‡³è®¡åˆ’ç®¡ç†äººå‘˜ <a href="mailto:robotics-student-fellowship@ethz.ch">robotics-student-fellowship@ethz.ch</a>ã€‚</p><ul><li><p>é¡¹ç›®åœ¨å¼€å§‹/ç»“æŸæ—¥æœŸæ–¹é¢æœ‰å¤šå¤§çš„çµæ´»æ€§ï¼Ÿ</p><p>å¾ˆé—æ†¾ï¼Œæ²¡æœ‰çµæ´»æ€§ã€‚</p></li><li><p>åœ¨è®¡åˆ’æœŸé—´æ˜¯å¦å¯ä»¥çŸ­æ—¶é—´ç¦»å¼€ï¼Ÿ</p><p>ä¸ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚è¯·æ³¨æ„ï¼Œå¯¹æ‚¨çš„æœ€å¤§æ‰¿è¯ºæ˜¯æœŸæœ›çš„ã€‚å¦‚æœæ‚¨æ— æ³•å±¥è¡Œï¼Œè¯·ç»™å…¶ä»–å­¦ç”Ÿæä¾›æœºä¼šã€‚</p></li><li><p>æ˜¯å¦éœ€è¦æˆä¸ºç‰¹å®šå›½å®¶çš„å…¬æ°‘æ‰èƒ½ç”³è¯·ï¼Ÿ</p><p>ä¸ï¼Œè¯¥è®¡åˆ’å¯¹æ‰€æœ‰å›½ç±çš„å­¦ç”Ÿå¼€æ”¾ã€‚</p></li><li><p>å¦‚æœé€‚ç”¨ï¼Œæ˜¯å¦éœ€è¦è·å¾—é€‚å½“çš„ç­¾è¯å‚ä¸è¯¥è®¡åˆ’ï¼Ÿ</p><p>æ˜¯çš„ï¼Œè·å¾—å¿…è¦ç­¾è¯æ˜¯æ‚¨çš„è´£ä»»ã€‚ETHå­¦ç”Ÿäº¤æµåŠå…¬å®¤å°†ååŠ©å¥–å­¦é‡‘è·å¾—è€…è¿›è¡Œæ­¤è¿‡ç¨‹ã€‚</p></li><li><p>ä»€ä¹ˆæ˜¯å®˜æ–¹å­¦æœ¯æˆç»©å•ï¼Ÿ</p><p>å®˜æ–¹å­¦æœ¯æˆç»©å•æ˜¯æ€»ç»“å­¦ç”Ÿè¿„ä»Šä¸ºæ­¢çš„å­¦æœ¯è¿›å±•å’Œè¡¨ç°çš„æ–‡ä»¶ï¼Œåº”åŒ…æ‹¬å¤§å­¦å’Œå­¦ä½è¯¾ç¨‹æ ‡é¢˜ï¼Œä»¥åŠæ¯é—¨è¯¾ç¨‹æ¨¡å—çš„æˆç»©ã€‚</p><p>æ‚¨å¯èƒ½éœ€è¦å‘æ‚¨çš„å¤§å­¦æå‡ºè¯·æ±‚ï¼Œä»–ä»¬å¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´æ¥ç”Ÿæˆã€‚</p></li><li><p>æˆ‘éœ€è¦è‡ªå·±å®‰æ’ä½æˆ¿å—ï¼Ÿ</p><p>ä¸ï¼Œä½å®¿å°†ä¼šè¢«ç»„ç»‡å¥½ã€‚æˆ‘ä»¬ä¸ºæ‰€æœ‰å¥–å­¦é‡‘è·å¾—è€…æä¾›åœ¨åŒä¸€å­¦ç”Ÿå®¿èˆçš„ä½å®¿ã€‚ä½æˆ¿è´¹ç”¨å°†ä»å¥–å­¦é‡‘ä¸­æ‰£é™¤ã€‚</p></li><li><p>å¥–å­¦é‡‘æ´¥è´´æ˜¯å¦åŒ…æ‹¬è‹é»ä¸–çš„ç”Ÿæ´»è´¹ï¼Ÿ</p><p>æ˜¯çš„ï¼Œå¥–å­¦é‡‘è¶³å¤Ÿåœ¨è‹é»ä¸–ä½œä¸ºå­¦ç”Ÿèˆ’é€‚åœ°ç”Ÿæ´»ã€‚</p></li><li><p>æˆ‘æ‹…å¿ƒåœ¨è‹é»ä¸–ç”Ÿæ´»ï¼Œå› ä¸ºæˆ‘ä¸ä¼šè¯´å¾·è¯­ã€‚è‹é»ä¸–çš„ç”Ÿæ´»æ˜¯ä»€ä¹ˆæ ·å­ï¼Ÿ</p><p>ä¸ä¼šè¯´å¾·è¯­ä¹Ÿæ²¡å…³ç³»ã€‚è‹é»ä¸–éå¸¸å›½é™…åŒ–ï¼ˆè¶…è¿‡30%ä¸ºå¤–å›½äººï¼‰ï¼Œå¤§å¤šæ•°äººè®²è‹±è¯­å¹¶èƒ½ç†è§£è‹±è¯­ã€‚æ­¤å¤–ï¼Œè‹±è¯­æ˜¯ETHçš„é€šç”¨è¯­è¨€ã€‚</p></li><li><p>è‹é»ä¸–çš„é€šå‹¤æ—¶é—´æœ‰å¤šé•¿ï¼Ÿ</p><p>ä½å®¿åœ°ç‚¹ç›¸å½“é è¿‘ï¼Œé€šå‹¤æ—¶é—´çº¦ä¸ºåŠå°æ—¶ã€‚å…¬å…±äº¤é€šå¯é ï¼Œæ¸…æ´ï¼Œå®‰å…¨ä¸”æ˜“äºä½¿ç”¨ã€‚</p></li></ul><h1 id="ETH-Robotics-Student-Fellowship"><a href="#ETH-Robotics-Student-Fellowship" class="headerlink" title="ETH Robotics Student Fellowship"></a>ETH Robotics Student Fellowship</h1><p>Robotics has become one of the biggest fields of education and research worldwide with strong societal and economic impact. The ETH Robotics Student Fellowship (ETH RSF) program offers graduate students the opportunity to research alongside experts on the specific topic of robotics of their choice. This fellowship takes place mainly during summer (July - August) and is open to all students worldwide. The RobotX initiative at ETH Zurich is committed to fostering and cultivating a culture of diversity and equality. </p><h2 id="Application-period"><a href="#Application-period" class="headerlink" title="Application period:"></a>Application period:</h2><p>15 January to 29 February 2024 at midnight (Central European Time).</p><h2 id="Program-dates"><a href="#Program-dates" class="headerlink" title="Program dates:"></a>Program dates:</h2><p>The program will take place from 03 July to 31 August 2024</p><h2 id="Eligibility"><a href="#Eligibility" class="headerlink" title="Eligibility:"></a>Eligibility:</h2><p>All applicants fulfilling the following conditions are eligible for the program:</p><ul><li>You can attend the entire fellowship period from July 3rd to August 31st. (Note that this time is fixed and cannot be changed)</li><li>You are currently enrolled in a master program and your expected graduation date is earliest in spring the year after the fellowship (Last-year undergrad students with outstanding performance at a top school are also eligible).</li></ul><h1 id="Program-structure"><a href="#Program-structure" class="headerlink" title="Program structure"></a>Program structure</h1><p>The Robotics Student Fellowship program at ETH RobotX initiative is devoted to carrying out research in one of the labs associated to the program.</p><ul><li><strong>Time frame: 01 July â€“ 31 August.</strong> Please note that the time and duration of the fellowship is fixed and there are not exceptions.</li><li><strong>Eligibility.</strong> Masterâ€™s students worldwide with an expected graduation date earliest during the spring semester the year after the 2-month fellowship (Last-year undergrad students with outstanding performance at a top school are also eligible).</li><li><strong>Research experience.</strong> Fellows will pursue a research project that aligns with a chosen lab of their interest as part of a research group within the RobotX initiative. This includes interacting and collaborating with group members.</li><li><strong>Networking and socializing.</strong> A number of on-site socializing events will help fellows to get to know people outside their respective research groups, including current ETH students at both undergraduate and graduate levels.</li><li><strong>Financial award.</strong> Fellows will receive a stipend of CHF 4,000 to cover housing and living expenses. </li><li><strong>Travel costs.</strong> Travel and visa expenses will be covered. Students can claim the travel costs against receipts at the beginning of the program up to CHF 1,200 for overseas flights and CHF 500 for shorter distances. Only Economic class (with one checked baggage) and 2nd class train tickets are eligible for reimbursement. The final amount is determined on a per case basis.</li><li><strong>Accommodation.</strong> The program provides accommodation for all fellows and paid for out of the stipends beforehand.</li></ul><h1 id="How-to-apply"><a href="#How-to-apply" class="headerlink" title="How to apply"></a>How to apply</h1><p><strong>Please read the information below carefully and prepare all required documents before submitting your application online.</strong></p><h2 id="Eligibility-1"><a href="#Eligibility-1" class="headerlink" title="Eligibility"></a>Eligibility</h2><p>You are eligible for the Robotics Student Fellowship if you satisfy the following conditions:</p><ul><li>You are enrolled in a Masterâ€™s study program in Robotics or a closely related field (e.g., electrical engineering, mechanical engineering). Last-year undergrad students with outstanding performance at a top school are also eligible.</li><li>Your expected graduation date is January 2025 or later.</li><li>You can attend the entire fellowship period from July 3rd to August 31st.</li></ul><p><strong>Admission process:</strong><br> Your application will be evaluated on the basis of the documents provided. The last step of the application process may include an interview conducted with the shortlisted candidates.</p><h2 id="Language-requirements"><a href="#Language-requirements" class="headerlink" title="Language requirements"></a>Language requirements</h2><p>The program is fully conducted in English. Formal evidence is not required. However, the fellowship requires a good working knowledge of English. Your language ability may be assessed during an interview.</p><h2 id="Preparing-your-application"><a href="#Preparing-your-application" class="headerlink" title="Preparing your application"></a>Preparing your application</h2><p>Please begin by exploring the faculty members in the participating hosting labs and their research topics.</p><p>You will be asked in your application to indicate three labs to conduct your research (with a preferential order). This will help the program to coordinate optimal lab placements.</p><p><strong>Remark: Please do not contact faculty members directly.</strong></p><p>Before applying please prepare all required documents (in English) as PDF files (max 10mb per file):</p><ul><li><p>Your CV. Please use the <a href="https://europass.cedefop.europa.eu/documents/curriculum-vitae">external pageEuropass format</a>.</p></li><li><p>Official academic transcript from your home university</p></li><li><p>Letter of motivation/Personal statement (max 1 page). Describe in your own words why you have chosen your proposed scientific area of research. Explain what you hope to accomplish by coming to ETH and how it will support your academic career and prepare you for a career in research. A good personal statement can be written in half a page and you should aim not to write more than a full A4 page. Lay it out carefully to make it easy to read.</p></li><li><p>Two academic referees. </p><p>During the online application you should provide the contact details of these two academic referees. You should be able to provide the following information for each academic referee: i) Name, ii) Title, iii) Position, iv) Website/Google Scholar, v) University/Company, and  vi) e-mail. The following are examples of accepted â€œacademic refereesâ€:</p><ul><li>Master/Bachelor thesis supervisor</li><li>Master/Bachelor tutor</li><li>Master/Bachelor program coordinator</li><li>Professor in charge of a project-based course you have taken</li></ul></li><li><p>Letter of recommendation to be submitted by your academic referees (one per referee) to <a href="mailto:robotics-student-fellowship@ethz.ch">robotics-student-fellowship@ethz.ch</a> with the subject <strong>{student firstname}-{student lastname}-reference-letter-{referee lastname}</strong>. Referees should use the <a href="https://ethz.ch/content/dam/ethz/special-interest/dual/robotics-dam/documents/Forms/ETH-RSF_RecommendationLetter-Form.pdf">Downloadrespective form (PDF, 438 KB)</a>. They can sign the recommendation using an electronic signature, or they can print, sign, and scan the form. These two letters have to be submitted before the end of the application period.  </p></li></ul><p><strong>Only complete applications with all the required documents can be considered for admission.</strong></p><h2 id="Apply-online"><a href="#Apply-online" class="headerlink" title="Apply online"></a>Apply online</h2><p>Before applying make sure you have read <a href>Preparing your application</a> and prepared all required documents as PDF files.</p><ol><li><p>First you need to <a href="https://sirop.org/app/register">external pageregister with SiROP</a></p><p> To register search for your home university in the list provided or create an account using an email address. After your registration SiROP offers you to affiliate with your own institution. <strong>To create such an affiliation is NOT a required step if you want to apply.</strong></p></li><li><p>After completing your SiROP registration follow this link: </p><p> <a href="https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl">https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl</a> </p><p> Link to application:</p><p> <a href="https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl">https://sirop.org/app/b9f5d562-79b2-484c-b65d-2442bdb78181?_k=VbFjQh9Bqj07ApIl</a></p><p> Application ends at 29 February 2024 at midnight (Central European Time).</p></li><li><p>Click the Â«Apply nowÂ» button at the top of the linked SiROP opportunity</p><p> <strong>Only complete applications with all the required documents can be considered for admission.</strong></p></li></ol><h1 id="Frequently-asked-questions"><a href="#Frequently-asked-questions" class="headerlink" title="Frequently asked questions"></a>Frequently asked questions</h1><p>Should you have a question, not answered by the how to apply section or by our FAQs, please send an e-mail to the program administration at <a href="mailto:robotics-student-fellowship@ethz.ch">robotics-student-fellowship@ethz.ch</a>.</p><ul><li><p>How flexible is the program when it comes to the start/end date?</p><p>  Unfortunately, there is no flexibility.</p></li><li><p>Is it possible to be absent for a short period of time during the program?</p><p>  No, this is not possible. Note that the utmost commitment is expected from your side. Please give the room to another student if you are not able to do so.</p></li><li><p>Do I need to be a citizen of a specific country to be eligible for application?</p><p>  No, this program is open to students of all nationalities.</p></li><li><p>If applicable, am I required to obtain the appropriate visa to participate in the program?</p><p>  Yes, it is your responsibility to acquire the necessary visa. The ETH Student Exchange office will help fellows with the process. </p></li><li><p>What is an official academic transcript?</p><p>  An official academic transcript is a document that summarises a studentâ€™s academic progress and performance to date, and should include the University and degree programme title, and grades for each course module taken.</p><p>You will probably need to ask your university to provide you with one and it may take a while to produce.</p></li><li><p>Do I need to organize housing by myself?</p><p>  No, accommodation will be organized. We provide accomodation for all fellows in the same student house. Housing expenses will be deducted from the scholarship.</p></li><li><p>Does the fellowship allowance cover living expenses in Zurich?</p><p>  Yes, the allowance is enough to live comfortably as student in Zurich.</p></li><li><p>I worry about living in Zurich since I do not speak any German. What is life in Zurich like?</p><p>  Not speaking German is fine. Zurich is very international (more than 30% are foreigners) and the majority of people speak and understand English. Furthermore, English is the common language at ETH.</p></li><li><p>How long are the commute times in Zurich?</p><p>  The accommodations are quite close with a commute time of about half an hour. Public transportation is reliable, clean, safe, and easy to use.</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å…¶ä»–" scheme="https://www.robotsfan.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="æœºå™¨äºº" scheme="https://www.robotsfan.com/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
  </entry>
  
  <entry>
    <title>DreamWaQè®ºæ–‡åˆ†æ</title>
    <link href="https://www.robotsfan.com/posts/4b2e8826.html"/>
    <id>https://www.robotsfan.com/posts/4b2e8826.html</id>
    <published>2024-01-07T05:00:00.000Z</published>
    <updated>2024-01-07T05:19:16.850Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="DreamWaQè®ºæ–‡åˆ†æ"><a href="#DreamWaQè®ºæ–‡åˆ†æ" class="headerlink" title="DreamWaQè®ºæ–‡åˆ†æ"></a>DreamWaQè®ºæ–‡åˆ†æ</h1><h2 id="å‰ç½®å‡†å¤‡"><a href="#å‰ç½®å‡†å¤‡" class="headerlink" title="å‰ç½®å‡†å¤‡"></a>å‰ç½®å‡†å¤‡</h2><p>ç¯å¢ƒå»ºæ¨¡ä¸ºPOMDPï¼Œå®šä¹‰ä¸º</p><script type="math/tex; mode=display">\begin{aligned}\mathcal{M}&=(\mathcal{S},\mathcal{O},\mathcal{A},d_0,p,r,\gamma)\end{aligned}</script><p>å…¶ä¸­å®Œæ•´çŠ¶æ€ã€éƒ¨åˆ†è§‚æµ‹ã€åŠ¨ä½œéƒ½æ˜¯è¿ç»­çš„</p><script type="math/tex; mode=display">\mathbf{s}\in\mathcal{S},\mathbf{o}\in\mathcal{O},\mathbf{a}\in\mathcal{A}</script><p>ç¯å¢ƒä»åˆå§‹çŠ¶æ€åˆ†å¸ƒ $\begin{aligned}d_0(\mathbf{s}_0)\end{aligned}$ å¼€å§‹ï¼Œä»¥ä¸‹è¿°çŠ¶æ€è½¬ç§»æ¦‚ç‡è¿›è¡Œ</p><script type="math/tex; mode=display">p(\mathbf{s}_{t+1}|\mathbf{s}_t,\mathbf{a}_t)</script><p>æ¯æ¬¡transitionè·å¾—ä¸‹è¿°å¥–åŠ±å‡½æ•°å®šä¹‰çš„å¥–åŠ±</p><script type="math/tex; mode=display">r:\mathcal{S}\times\mathcal{A}\to\mathcal{R}</script><p>æŠ˜æ‰£å› å­å®šä¹‰ä¸º</p><script type="math/tex; mode=display">\gamma\in[0,1)</script><p>å°†tæ—¶åˆ»çš„è¿‡å»Hæ¬¡æµ‹é‡å€¼çš„æ—¶é—´è§‚æµ‹å€¼å®šä¹‰ä¸º</p><script type="math/tex; mode=display">\mathbf{o}_t^H=\begin{bmatrix}\mathbf{o}_t&\mathbf{o}_{t-1}\ldots\mathbf{o}_{t-H}\end{bmatrix}^T</script><p>åŒæ—¶å®šä¹‰ä¸€ä¸ªä¸Šä¸‹æ–‡å‘é‡ $\mathbf{z}_{t}$ ï¼Œå…¶ä¸­åŒ…å«äº†æè¿°ç¯å¢ƒçŠ¶æ€çš„éšå«è¡¨ç¤ºï¼ˆé«˜ç¨‹ä¿¡æ¯ï¼‰</p><h2 id="éšå¼çš„åœ°å½¢æƒ³è±¡"><a href="#éšå¼çš„åœ°å½¢æƒ³è±¡" class="headerlink" title="éšå¼çš„åœ°å½¢æƒ³è±¡"></a>éšå¼çš„åœ°å½¢æƒ³è±¡</h2><p>å…¶ä»–å·¥ä½œåˆ©ç”¨äº†teacher-studentè®­ç»ƒæ–¹æ³•ï¼Œè¿™ç§â€è¡Œä¸ºå…‹éš†â€œå°†å­¦ç”Ÿæ”¿ç­–çš„è¡¨ç°ä¸æ•™å¸ˆæ”¿ç­–é™åˆ¶åœ¨ä¸€èµ·ï¼Œä¸”é¡ºåºè®­ç»ƒæ•™å¸ˆå’Œå­¦ç”Ÿç½‘ç»œçš„æ•°æ®æ•ˆç‡ä½ä¸‹ã€‚å­¦ç”Ÿç­–ç•¥å¯èƒ½æ— æ³•æ¢ç´¢æ•™å¸ˆç­–ç•¥åœ¨æ—©æœŸRLé˜¶æ®µå­¦åˆ°çš„å¤±è´¥çŠ¶æ€ï¼Œå› ä¸ºåœ¨è¡Œä¸ºå…‹éš†æœŸé—´å­¦ç”Ÿç­–ç•¥ä»…å—åˆ°æ•™å¸ˆç­–ç•¥çš„è‰¯å¥½è¡ŒåŠ¨ç›‘ç£ã€‚<br>ä¸ºäº†å­¦ä¹ éšå¼çš„åœ°å½¢æƒ³è±¡ï¼Œé‡‡ç”¨ä¸å¯¹ç§°çš„actor-criticæ¶æ„ã€‚actor-criticä¸­çš„ç­–ç•¥å’Œä»·å€¼ç½‘ç»œä¹‹é—´çš„ç›¸äº’ä½œç”¨å¯ä»¥è®­ç»ƒä¸€ç§ç­–ç•¥ï¼Œè¿™ç§ç­–ç•¥å¯ä»¥åœ¨ç»™å®šéƒ¨åˆ†æ—¶é—´è§‚æµ‹çš„æƒ…å†µä¸‹éšå¼åœ°â€œæƒ³è±¡â€ç‰¹æƒè§‚å¯Ÿã€‚<br>ç­–ç•¥ï¼ˆactorï¼‰æ¥æ”¶éƒ¨åˆ†æ—¶é—´è§‚æµ‹ $\mathbf{o}_t^H$ ä½œä¸ºè¾“å…¥ï¼Œä»·å€¼ç½‘ç»œï¼ˆcriticï¼‰æ¥æ”¶å®Œæ•´çŠ¶æ€ $\mathbf{s}_t$ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå®šä¹‰H=5<br><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/20240106220514.png" alt><br>ç”±äºåªéœ€è¦â¼€ä¸ªè®­ç»ƒé˜¶æ®µï¼Œè®­ç»ƒæœŸé—´çš„æ•°æ®æ•ˆç‡æ˜¾è‘—æâ¾¼ã€‚æ­¤å¤–ï¼Œè¯¥ç­–ç•¥å¯ä»¥åœ¨è®­ç»ƒæœŸé—´æ¢ç´¢æ‰€æœ‰å¯èƒ½çš„è½¨è¿¹ï¼Œé€šè¿‡æ³›åŒ–æâ¾¼å…¶ç¨³å¥æ€§ã€‚ä½¿ç”¨PPOç®—æ³•ä¼˜åŒ–ç­–ç•¥ã€‚</p><h3 id="ç­–ç•¥ç½‘ç»œ"><a href="#ç­–ç•¥ç½‘ç»œ" class="headerlink" title="ç­–ç•¥ç½‘ç»œ"></a>ç­–ç•¥ç½‘ç»œ</h3><p>ç­–ç•¥ $\pi_\phi(\mathbf{a}_t|\mathbf{o}_t,\mathbf{v}_t,\mathbf{z}_t)$ æ˜¯åœ¨æœ¬ä½“æ„ŸçŸ¥è§‚æµ‹ $\mathbf{o}_t$ ã€æœºèº«çº¿é€Ÿåº¦ $\mathbf{v}_t$ ã€éšå«çŠ¶æ€ $\mathbf{z}_t$ çš„æƒ…å†µä¸‹ï¼Œé‡‡å–åŠ¨ä½œ $\mathbf{a}_t$ æ—¶ç”± $\phi$ å‚æ•°åŒ–çš„ç¥ç»ç½‘ç»œã€‚<br> $\mathbf{o}_t$ æ˜¯ä¸€ä¸ª $n \times 1$ çš„å‘é‡ï¼Œç›´æ¥ä»å…³èŠ‚ç¼–ç å™¨å’ŒIMUä¸­æµ‹é‡å¾—åˆ°ï¼Œè¡¨ç¤ºä¸º</p><script type="math/tex; mode=display">\mathbf{o}_t=\begin{bmatrix}\omega_t&\mathbf{g}_t&\mathbf{c}_t&\theta_t&\dot{\theta}_t&\mathbf{a}_{t-1}\end{bmatrix}^T</script><p>å…¶ä¸­ï¼š</p><ul><li>$\omega_t$ ï¼šæœºèº«è§’é€Ÿåº¦</li><li>$\mathbf{g}_t$ ï¼šæœºèº«åæ ‡ç³»ä¸‹çš„é‡åŠ›å‘é‡</li><li>$\mathbf{c}_t$ ï¼šæœºèº«é€Ÿåº¦æŒ‡ä»¤</li><li>$\theta_t$ ï¼šå…³èŠ‚è§’åº¦</li><li>$\dot{\theta}_t$ ï¼šå…³èŠ‚è§’é€Ÿåº¦</li><li>$\mathbf{a}_{t-1}$ ï¼šä¹‹å‰çš„åŠ¨ä½œ<br>$\mathbf{v}_t$ å’Œ $\mathbf{z}_t$ ç”±ä¸Šä¸‹æ–‡è¾…åŠ©ä¼°è®¡ç½‘ç»œcontext-aided estimator networkï¼ˆCENetï¼‰ä¼°è®¡ï¼Œä¸‹æ–‡ä¼šè®²åˆ°ã€‚<h3 id="ä»·å€¼ç½‘ç»œ"><a href="#ä»·å€¼ç½‘ç»œ" class="headerlink" title="ä»·å€¼ç½‘ç»œ"></a>ä»·å€¼ç½‘ç»œ</h3>ä»·å€¼ç½‘ç»œç»è¿‡è®­ç»ƒè¾“å‡ºçŠ¶æ€å€¼ $V(\mathbf{s}_{t})$ çš„ä¼°è®¡ã€‚ä¸ç­–ç•¥ç½‘ç»œä¸åŒçš„æ˜¯ï¼Œä»·å€¼ç½‘ç»œæ¥æ”¶ç‰¹æƒè§‚æµ‹ $\mathbf{s}_t$ ï¼Œå®šä¹‰ä¸ºï¼š<script type="math/tex; mode=display">\mathbf{s}_t=\begin{bmatrix}\mathbf{o}_t&\mathbf{v}_t&\mathbf{d}_t&\mathbf{h}_t\end{bmatrix}^T</script>å…¶ä¸­ï¼š</li><li>$\mathbf{o}_t$ ï¼šå‰æ–‡æåˆ°çš„æœ¬ä½“æ„ŸçŸ¥è§‚æµ‹</li><li>$\mathbf{v}_t$ ï¼šå‰æ–‡æåˆ°çš„æœºèº«çº¿é€Ÿåº¦</li><li>$\mathbf{d}_t$ ï¼šéšæœºæ–½åŠ åœ¨æœºèº«ä¸Šçš„â¼²æ‰°â¼’</li><li>$\mathbf{h}_t$ ï¼šæœºå™¨â¼ˆå‘¨å›´ç¯å¢ƒçš„é«˜ç¨‹å›¾ï¼Œä½œä¸ºä»·å€¼â½¹ç»œæ„Ÿå—å¤–ç•Œçš„è¾“å…¥<br>ç­–ç•¥ç½‘ç»œç»è¿‡è®­ç»ƒå¯ä»¥ä»æœ¬ä½“æ„ŸçŸ¥éšå¼åœ°æ¨æ–­ $\mathbf{d}_t$ å’Œ $\mathbf{h}_t$ <h3 id="åŠ¨ä½œç©ºé—´"><a href="#åŠ¨ä½œç©ºé—´" class="headerlink" title="åŠ¨ä½œç©ºé—´"></a>åŠ¨ä½œç©ºé—´</h3>åŠ¨ä½œç©ºé—´ $\mathbf{a}_t$ æ˜¯ä¸€ä¸ª $12 \times 1$ çš„å‘é‡ï¼Œå¯¹åº”æœºå™¨äºº12ä¸ªå…³èŠ‚çš„è§’åº¦ã€‚ä¸ºäº†ä½¿å­¦ä¹ æ›´åŠ å®¹æ˜“ï¼Œç­–ç•¥çš„è¾“å‡ºä¸ºæœºå™¨äººå½“å‰å§¿æ€ä¸é™æ­¢å§¿æ€å¯¹åº”å…³èŠ‚è§’åº¦çš„å·®å€¼ï¼Œå³ä¸º<script type="math/tex; mode=display">\mathbf{\theta}_{\mathrm{des}}=\mathbf{\theta}_{\mathrm{stand}}+\mathbf{a}_t</script>ç„¶åä½¿ç”¨PDæ§åˆ¶å™¨è·Ÿè¸ªæœŸæœ›çš„å…³èŠ‚è§’åº¦ã€‚<h3 id="å¥–åŠ±å‡½æ•°"><a href="#å¥–åŠ±å‡½æ•°" class="headerlink" title="å¥–åŠ±å‡½æ•°"></a>å¥–åŠ±å‡½æ•°</h3>å¥–åŠ±å‡½æ•°ä¸å…¶ä»–å·¥ä½œç›¸åŒï¼Œä¸åšè¿‡å¤šçš„ä¿®æ”¹ï¼Œä»¥çªå‡ºDreamWaQçš„æ•ˆæœï¼Œå®šä¹‰å¦‚ä¸‹ï¼š<br><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/20240106224109.png" alt><br>å…¶ä¸­ï¼š</li><li>expä¸ºæŒ‡æ•°è¿ç®—ï¼Œvarä¸ºæ–¹å·®è¿ç®—ï¼›</li><li>desä¸ºæœŸæœ›å€¼ï¼Œcmdä¸ºå‘½ä»¤å€¼ï¼›</li><li>xyzå®šä¹‰åœ¨æœºå™¨äººåæ ‡ç³»ä¸­ï¼Œxä¸ºå‰æ–¹ï¼Œzä¸ºä¸Šæ–¹ï¼›</li><li>$\mathbf{g}$ ï¼šé‡åŠ›å‘é‡åœ¨æœºèº«åæ ‡ç³»ä¸Šçš„æŠ•å½±</li><li>$\mathbf{v}_{xy}$ ï¼šxyå¹³é¢ä¸Šçš„çº¿é€Ÿåº¦</li><li>$\omega_{\mathrm{yaw}}$ ï¼šyawè½´è§’åŠ é€Ÿåº¦</li><li>$h$ ï¼šæœºèº«ç›¸å¯¹åœ°é¢çš„é«˜åº¦</li><li>$p_{f,z,k}$ ï¼šè¶³ç«¯é«˜åº¦</li><li>$v_{f,xy,k}$ ï¼šè¶³ç«¯æ¨ªå‘é€Ÿåº¦</li><li>$\mathrm{\tau}$ ï¼šå…³èŠ‚æ‰­çŸ©<br>å¥–åŠ±å‡½æ•°åŒ…æ‹¬è·Ÿè¸ªå‘½ä»¤é€Ÿåº¦çš„ä»»åŠ¡å¥–åŠ±å’Œç¨³å®šæ€§å¥–åŠ±ã€‚åœ¨æ¯ä¸ªçŠ¶æ€é‡‡å–åŠ¨ä½œçš„ç­–ç•¥çš„æ€»å¥–åŠ±å®šä¹‰ä¸º<script type="math/tex; mode=display">r_t(\mathbf{s}_t,\mathbf{a}_t)=\sum r_iw_i</script>å¯¹æœ€åä¸€é¡¹Powerå¥–åŠ±å‡½æ•°çš„è§£é‡Šï¼šç”¨äºå­¦ä¹ è¿åŠ¨ç­–ç•¥çš„å¤æ‚å¥–åŠ±å‡½æ•°é€šå¸¸åŒ…æ‹¬ç”µæœºåŠŸç‡æœ€å°åŒ–é¡¹ã€‚ç„¶è€Œè¿™ç§å¥–åŠ±åœ¨ä¸è€ƒè™‘æ¯ä¸ªç”µæœºçš„åŠŸç‡å¹³è¡¡çš„æƒ…å†µä¸‹æœ€å¤§é™åº¦åœ°å‡å°‘äº†æ€»åŠŸç‡ã€‚ å› æ­¤ä»é•¿è¿œæ¥çœ‹æŸäº›ç”µæœºå¯èƒ½ä¼šæ¯”å…¶ä»–ç”µæœºæ›´å¿«è¿‡çƒ­ã€‚å› æ­¤å¼•å…¥åŠŸç‡åˆ†é…å¥–åŠ±ï¼Œé€šè¿‡æƒ©ç½šæœºå™¨äººä¸Šä½¿ç”¨çš„æ‰€æœ‰ç”µæœºçš„é«˜æ–¹å·®ç”µæœºåŠŸç‡æ¥å‡å°‘ç°å®ä¸–ç•Œä¸­çš„ç”µæœºè¿‡çƒ­ã€‚<h3 id="è¯¾ç¨‹å­¦ä¹ "><a href="#è¯¾ç¨‹å­¦ä¹ " class="headerlink" title="è¯¾ç¨‹å­¦ä¹ "></a>è¯¾ç¨‹å­¦ä¹ </h3>åœ¨å›°éš¾åœ°å½¢ä¸Šè¿›è¡Œæ¸è¿›çš„è¿åŠ¨ç­–ç•¥å­¦ä¹ ã€‚åœ°å½¢ç”±å…‰æ»‘ã€ç²—ç³™ã€ç¦»æ•£å’Œé˜¶æ¢¯åœ°å½¢ç»„æˆï¼Œå€¾æ–œåº¦åœ¨0Â°-22Â°èŒƒå›´å†…æœ‰åçº§çš„å˜åŒ–ã€‚åˆ©ç”¨ç½‘æ ¼è‡ªé€‚åº”è¯¾ç¨‹è¿›è¡Œä½é€Ÿè¿åŠ¨å¯ä»¥å®ç°æ›´å¥½ã€æ›´ç¨³å®šçš„è½¬å¼¯ï¼Œä»è€Œé˜²æ­¢è¶³ç«¯ç»Šå€’ã€‚<h2 id="ä¸‹æ–‡è¾…åŠ©ä¼°è®¡ç½‘ç»œï¼ˆCENetï¼‰"><a href="#ä¸‹æ–‡è¾…åŠ©ä¼°è®¡ç½‘ç»œï¼ˆCENetï¼‰" class="headerlink" title="ä¸‹æ–‡è¾…åŠ©ä¼°è®¡ç½‘ç»œï¼ˆCENetï¼‰"></a>ä¸‹æ–‡è¾…åŠ©ä¼°è®¡ç½‘ç»œï¼ˆCENetï¼‰</h2>ä¸Šé¢çš„è®­ç»ƒæ–¹æ³•éœ€è¦æœºèº«çº¿é€Ÿåº¦ $\mathbf{v}_t$ ã€éšå«çŠ¶æ€ $\mathbf{z}_t$ ä½œä¸ºè¾“å…¥ï¼Œå¯ä»¥é€šè¿‡æœ¬ä½“æ„ŸçŸ¥è¿›è¡Œä¼°è®¡ã€‚ï¼ˆï¼Ÿï¼‰å…¶ä»–å·¥ä½œå°† $\mathbf{z}_t$ è§†ä¸ºåœ°å½¢éšå«å˜é‡ã€‚æ­¤å¤–é€šè¿‡å­¦ä¹ ç½‘ç»œä¼°è®¡ $\mathbf{v}_t$ é€šè¿‡æ¶ˆé™¤ç´¯è®¡çš„ä¼°è®¡æ¼‚ç§»ï¼Œæ˜¾è‘—æé«˜è¿åŠ¨ç­–ç•¥çš„é²æ£’æ€§ã€‚<br>é€šè¿‡è¿™äº›å…ˆå‰çš„å·¥ä½œå¯ä»¥å‘ç°ï¼Œåœ°å½¢å’Œèº«ä½“çŠ¶æ€ä¼°è®¡ä¹‹é—´çš„ç›¸äº’ä½œç”¨æ˜¾ç€æé«˜äº†èº«ä½“çŠ¶æ€ä¼°è®¡çš„å‡†ç¡®æ€§ã€‚å› æ­¤æå‡ºäº†ä¸Šä¸‹æ–‡è¾…åŠ©ä¼°è®¡ç½‘ç»œï¼ˆCENetï¼‰æ¶æ„æ¥å…±åŒå­¦ä¹ ä¼°è®¡å’Œæ¨æ–­çš„éšå«ç¯å¢ƒä¿¡æ¯ï¼Œè€Œä¸æ˜¯ä»…ä»…æ˜¾å¼ä¼°è®¡æœºå™¨äººçš„çŠ¶æ€ã€‚ CENetçš„ä¼˜ç‚¹æ˜¯ï¼š</li></ul><ol><li>ç”±äºå…±äº«ç¼–ç å™¨æ¶æ„ï¼Œç½‘ç»œæ¶æ„æ˜¾è‘—ç®€åŒ–å¹¶åœ¨æ¨ç†è¿‡ç¨‹ä¸­åŒæ­¥è¿è¡Œï¼›</li><li>ç¼–ç å™¨ç½‘ç»œå¯ä»¥é€šè¿‡è‡ªåŠ¨ç¼–ç æœºåˆ¶æ¥è”åˆå­¦ä¹ æœºå™¨äººçš„å‰å‘å’Œåå‘åŠ¨åŠ›å­¦ï¼Œä»è€Œæé«˜å…¶ç²¾åº¦ã€‚<br>CENetç”±å•ç¼–ç å™¨å’Œå¤šéƒ¨åˆ†è§£ç å™¨ç»„æˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚CENetçš„æ¶æ„ç”±æœºèº«é€Ÿåº¦ä¼°è®¡æ¨¡å‹å’Œå…±äº«ç»Ÿä¸€ç¼–ç å™¨çš„è‡ªåŠ¨ç¼–ç å™¨æ¨¡å‹ç»„æˆã€‚å…±äº«ç¼–ç å™¨ç»è¿‡è®­ç»ƒå¯ä»¥è”åˆæä¾›é²æ£’çš„èº«ä½“çŠ¶æ€å’Œä¸Šä¸‹æ–‡ä¼°è®¡ã€‚<br><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/20240107122725.png" alt><br>ç¼–ç å™¨ç½‘ç»œå°† $\mathbf{o}_t^H$ ç¼–ç ä¸º $\mathbf{v}_t$ å’Œ $\mathbf{z}_t$ ã€‚ ç¬¬ä¸€éƒ¨åˆ†ä¼°è®¡ $\mathbf{v}_t$ ï¼Œç¬¬äºŒéƒ¨åˆ†é‡å»º  $\mathbf{o}_{t+1}$ ã€‚ æˆ‘ä»¬åˆ©ç”¨Î²-å˜åˆ†è‡ªåŠ¨ç¼–ç å™¨ï¼ˆÎ²-VAEï¼‰ä½œä¸ºè‡ªåŠ¨ç¼–ç å™¨æ¶æ„ã€‚ CENet ä½¿ç”¨æ··åˆæŸå¤±å‡½æ•°è¿›è¡Œä¼˜åŒ–ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š<script type="math/tex; mode=display">\mathcal{L}_{\mathrm{CE}}=\mathcal{L}_{\mathrm{est}}+\mathcal{L}_{\mathrm{VAE}}</script>å…¶ä¸­ $\mathcal{L}_{\mathrm{est}}$ æ˜¯èº«ä½“é€Ÿåº¦ä¼°è®¡ï¼Œ $\mathcal{L}_{\mathrm{VAE}}$ æ˜¯VAEæŸå¤±ã€‚å¯¹äºæ˜¾å¼çŠ¶æ€ä¼°è®¡ï¼Œä¼°è®¡çš„ç‰©ä½“é€Ÿåº¦ $\tilde{\mathbf{v}}_t$ å’Œæ¥è‡ªæ¨¡æ‹Ÿå™¨å®é™…çš„ $\mathbf{v}_{t}$ ä¹‹é—´é‡‡ç”¨äº†å‡æ–¹è¯¯å·® (MSE) æŸå¤±ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š<script type="math/tex; mode=display">\mathcal{L}_{\mathrm{est}}=MSE(\tilde{\mathbf{v}}_t,\mathbf{v}_t)</script>VAEç½‘ç»œä½¿ç”¨æ ‡å‡† Î²-VAE æŸå¤±è¿›è¡Œè®­ç»ƒï¼Œå…¶ä¸­åŒ…æ‹¬é‡å»ºæŸå¤±å’Œéšå«æŸå¤±ã€‚ä½¿ç”¨ MSE ä½œä¸ºé‡å»ºæŸå¤±ï¼Œä½¿ç”¨ Kullback-Leibler (KL) æ•£åº¦ä½œä¸ºæ½œåœ¨æŸå¤±ã€‚VAE æŸå¤±çš„å…¬å¼ä¸ºï¼š<script type="math/tex; mode=display">\begin{aligned}\mathcal{L}_{\text{VAE}} = M S E ( \tilde { \mathbf{o}}_{t+1},\mathbf{o}_{t+1})+\beta D_{\text{KL}}(q(\mathbf{z}_t|\mathbf{o}_t^H)\parallel p(\mathbf{z}_t))\end{aligned}</script>å…¶ä¸­ï¼š</li></ol><ul><li>$\tilde { \mathbf{o}}_{t+1}$ ä¸ºé‡å»ºçš„ä¸‹ä¸€ä¸ªè§‚æµ‹å€¼</li><li>$q(\mathbf{z}_t|\mathbf{o}_t^H)$ ä¸ºç»™å®š $\mathbf{o}_t^H$ æ—¶ $\mathbf{z}_t$ çš„åéªŒåˆ†å¸ƒ</li><li>$p(\mathbf{z}_t)$ ä¸ºç”±é«˜æ–¯åˆ†å¸ƒå‚æ•°åŒ–çš„ä¸Šä¸‹æ–‡å…ˆéªŒåˆ†å¸ƒ<br>é€‰æ‹©æ ‡å‡†æ­£æ€åˆ†å¸ƒä½œä¸ºå…ˆéªŒåˆ†å¸ƒï¼Œå› ä¸ºæ‰€æœ‰è§‚æµ‹å€¼å‡å·²æ ‡å‡†åŒ–ä¸ºé›¶å‡å€¼å’Œå•ä½æ–¹å·®ã€‚<br>æ­¤å¤–ï¼Œåœ¨ç­–ç•¥ç½‘ç»œè®­ç»ƒæœŸé—´ä»ä¼°è®¡å™¨ç½‘ç»œå¼•å¯¼ï¼ˆbootstrapï¼‰å¯ä»¥æé«˜å­¦ä¹ ç­–ç•¥çš„sim-to-realé²æ£’æ€§ã€‚ç„¶è€Œç”±äºå­¦ä¹ æ—©æœŸé˜¶æ®µçš„å­¦ä¹ å™ªå£°è¾ƒå¤§ï¼Œå¼•å¯¼ä¹Ÿå¯èƒ½ä¼šæŸå®³ç­–ç•¥çš„æ€§èƒ½ã€‚ å› æ­¤æå‡ºä¸€ç§è‡ªé€‚åº”å¼•å¯¼ï¼ˆAdaBootï¼‰æ–¹æ³•ï¼Œå¯ä»¥åœ¨è®­ç»ƒæœŸé—´è‡ªé€‚åº”åœ°è°ƒæ•´å¼•å¯¼æ¦‚ç‡ã€‚ AdaBoot ç”±å˜å¼‚ç³»æ•°ï¼ˆCVï¼‰æ§åˆ¶ï¼Œå³mä¸ªç»è¿‡éšæœºåŒ–çš„ç¯å¢ƒä¸­çš„æƒ…æ™¯å¥–åŠ±çš„æ ‡å‡†å·®ä¸å¹³å‡å€¼çš„æ¯”ç‡ã€‚ å…³é”®æ€æƒ³æ˜¯ï¼Œå½“mä¸ªagentçš„å¥–åŠ±çš„CVè¾ƒå°æ—¶ï¼Œéœ€è¦è¿›è¡Œå¼•å¯¼ï¼Œä»¥ä½¿ç­–ç•¥å¯¹ä¸å‡†ç¡®çš„ä¼°è®¡æ›´åŠ ç¨³å¥ã€‚ ä½†æ˜¯å½“agentå­¦ä¹ å¾—ä¸å¤Ÿå¥½æ—¶ä¸åº”è¯¥å¼•å¯¼ï¼Œç”¨å¥–åŠ±ä¸­çš„è¾ƒå¤§CVå€¼è¡¨ç¤ºã€‚ å°†æ¯æ¬¡å­¦ä¹ è¿­ä»£çš„å¼•å¯¼æ¦‚ç‡å®šä¹‰å¦‚ä¸‹ï¼š<script type="math/tex; mode=display">p_{\mathrm{boot}}=1-\tanh(CV(\mathbf{R}))</script>å…¶ä¸­ï¼š</li><li>$p_{\mathrm{boot}}\in[0,1]$ æ˜¯å¼•å¯¼æ¦‚ç‡</li><li>$\mathbf{R}$ æ˜¯æ¥è‡ªmä¸ªè¿›è¿‡éšæœºåŒ–çš„ç¯å¢ƒçš„æƒ…æ™¯å¥–åŠ±çš„ $m\times1$ å‘é‡</li><li>CVä¸ºå˜å¼‚ç³»æ•°è¿ç®—</li><li>tanhä¸ºåŒæ›²æ­£åˆ‡è¿ç®—ï¼Œç”¨äºå°† $CV(\mathbf{R})$ çš„ä¸Šé™å¹³æ»‘åœ°å˜ä¸º1<h2 id="ä»¿çœŸ"><a href="#ä»¿çœŸ" class="headerlink" title="ä»¿çœŸ"></a>ä»¿çœŸ</h2>ä½¿ç”¨isaac gymåŒæ­¥è®­ç»ƒpolicyã€valueã€CENetç½‘ç»œã€‚è®­ç»ƒå‚æ•°å¦‚ä¸‹ï¼š</li><li>agentsï¼š4096</li><li>iterationsï¼š1000</li><li>ç­–ç•¥ç½‘ç»œï¼šPPOï¼Œå…¶clipèŒƒå›´è®¾ç½®ä¸º0.2ï¼Œâ¼´ä¹‰ä¼˜åŠ¿ä¼°è®¡å› â¼¦è®¾ç½®ä¸º0.95ï¼ŒæŠ˜æ‰£å› â¼¦è®¾ç½®ä¸º0.99</li><li>éšå«å±‚çš„æ¿€æ´»å‡½æ•°ï¼šæŒ‡æ•°çº¿æ€§å•å…ƒï¼ˆELUï¼‰</li><li>ä½¿â½¤ Adam ä¼˜åŒ–å™¨ä¼˜åŒ–â½¹ç»œï¼Œå­¦ä¹ ç‡ä¸º $10^{-3}$ </li><li>ç¯å¢ƒå‚æ•°éšæœºåŒ–è§ä¸‹è¡¨<br><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/20240107125948.png" alt><h2 id="è¿ç§»åˆ°å®ç‰©"><a href="#è¿ç§»åˆ°å®ç‰©" class="headerlink" title="è¿ç§»åˆ°å®ç‰©"></a>è¿ç§»åˆ°å®ç‰©</h2>è¿ç§»åˆ°Unitree A1å››è¶³æœºå™¨äººä¸Šï¼Œç­–ç•¥ä¸CENetä»¥50Hzçš„é¢‘ç‡åŒæ­¥è¿â¾ã€‚ä½¿â½¤200Hzçš„PDæ§åˆ¶å™¨è·Ÿè¸ªæ‰€éœ€çš„å…³èŠ‚â»†åº¦ï¼ŒKp=28ã€Kd=0.7ã€‚<br>åœ¨æ¥¼æ¢¯ç¯å¢ƒä¸­ï¼ŒCENetå¯ä»¥å‡†ç¡®ä¼°è®¡â¾ä½“é€Ÿåº¦ï¼Œä½¿æœºå™¨â¼ˆèƒ½å®‰å…¨çˆ¬æ¥¼æ¢¯ã€‚å‡è®¾è¿™ç”±ä¸¤ä¸ªå› ç´ å®ç°ï¼š</li><li>å‰å‘-åå‘åŠ¨æ€å­¦ä¹ åœ¨æ‰€æœ‰åœ°å½¢ä¸­æä¾›æ›´å‡†ç¡®çš„ä¼°è®¡</li><li>ä½¿â½¤ DreamWaQï¼Œè”åˆè®­ç»ƒç¼–ç å™¨æ¥é¢„æµ‹åœ°å½¢å±æ€§<br>å› æ­¤ï¼Œå¯ä»¥éšå¼æ¨æ–­åœ°å½¢å±æ€§ï¼Œæœ‰åŠ©äºè°ƒèŠ‚æ˜¾å¼ä¼°è®¡ã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="RL" scheme="https://www.robotsfan.com/categories/RL/"/>
    
    
    <category term="RL" scheme="https://www.robotsfan.com/tags/RL/"/>
    
  </entry>
  
  <entry>
    <title>C++è·å–å½“å‰å·¥ä½œç©ºé—´ä¸‹æŸæ–‡ä»¶çš„è·¯å¾„</title>
    <link href="https://www.robotsfan.com/posts/efbbd14c.html"/>
    <id>https://www.robotsfan.com/posts/efbbd14c.html</id>
    <published>2023-09-11T12:30:00.000Z</published>
    <updated>2023-11-30T14:13:42.956Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="C-è·å–å½“å‰å·¥ä½œç©ºé—´ä¸‹æŸæ–‡ä»¶çš„è·¯å¾„"><a href="#C-è·å–å½“å‰å·¥ä½œç©ºé—´ä¸‹æŸæ–‡ä»¶çš„è·¯å¾„" class="headerlink" title="C++è·å–å½“å‰å·¥ä½œç©ºé—´ä¸‹æŸæ–‡ä»¶çš„è·¯å¾„"></a>C++è·å–å½“å‰å·¥ä½œç©ºé—´ä¸‹æŸæ–‡ä»¶çš„è·¯å¾„</h1><h2 id="ä½¿ç”¨Cmakeç¼–è¯‘"><a href="#ä½¿ç”¨Cmakeç¼–è¯‘" class="headerlink" title="ä½¿ç”¨Cmakeç¼–è¯‘"></a>ä½¿ç”¨Cmakeç¼–è¯‘</h2><p>åœ¨CmakeLists.txtä¸­å®šä¹‰é¢„å¤„ç†å®</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">add_definitions</span>(-DCMAKE_CURRENT_SOURCE_DIR=<span class="string">&quot;$&#123;CMAKE_CURRENT_SOURCE_DIR&#125;&quot;</span>)</span><br></pre></td></tr></table></figure><p>åœ¨æºæ–‡ä»¶ä¸­ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YOUR_FILE_PATH CMAKE_CURRENT_SOURCE_DIR <span class="meta-string">&quot;/xxx/YOUR_FILE_NAME.xxx&quot;</span></span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨ROSç¯å¢ƒ"><a href="#ä½¿ç”¨ROSç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨ROSç¯å¢ƒ"></a>ä½¿ç”¨ROSç¯å¢ƒ</h2><p>ç›´æ¥åœ¨æºæ–‡ä»¶ä¸­å†™ï¼š</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::string package_path = ros::package::<span class="built_in">getPath</span>(<span class="string">&quot;YOUR_PACKAGE_NAME&quot;</span>);</span><br><span class="line">std::string file_path = package_path + <span class="string">&quot;/xxx/YOUR_FILE_NAME.xxx&quot;</span>;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="C++" scheme="https://www.robotsfan.com/categories/C/"/>
    
    
    <category term="C++" scheme="https://www.robotsfan.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>æ˜¾å¡bugè§£å†³æ€è·¯ Failed to initialize NVML Driver/library version mismatch</title>
    <link href="https://www.robotsfan.com/posts/2038292b.html"/>
    <id>https://www.robotsfan.com/posts/2038292b.html</id>
    <published>2023-07-08T02:44:00.000Z</published>
    <updated>2024-07-17T03:04:00.618Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ˜¾å¡bugè§£å†³æ€è·¯ï¼šFailed-to-initialize-NVML-Driver-library-version-mismatch"><a href="#æ˜¾å¡bugè§£å†³æ€è·¯ï¼šFailed-to-initialize-NVML-Driver-library-version-mismatch" class="headerlink" title="æ˜¾å¡bugè§£å†³æ€è·¯ï¼šFailed to initialize NVML: Driver/library version mismatch"></a>æ˜¾å¡bugè§£å†³æ€è·¯ï¼šFailed to initialize NVML: Driver/library version mismatch</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>åœ¨ç»ˆç«¯è¾“å…¥<a href="https://so.csdn.net/so/search?q=nvidia-smi&amp;spm=1001.2101.3001.7020">nvidia-smi</a>å‡ºç°ä»¥ä¸‹é”™è¯¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Failed to initialize NVML: Driver/library version mismatch</span><br></pre></td></tr></table></figure><h2 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h2><p>NVIDIAå†…æ ¸é©±åŠ¨ç‰ˆæœ¬ä¸ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ä¸ä¸€è‡´</p><p>æŸ¥çœ‹æ›´æ–°æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/<span class="built_in">log</span>/dpkg.log | grep nvidia</span><br></pre></td></tr></table></figure><p>è‹¥æœ‰æ›´æ–°ä¼šæ˜¾ç¤ºï¼š<code>upgrade nvidia-driver-515:amd64 515,86,01-0ubuntug,20.04,1 525,125.06-0ubuntuo.20.04.3</code>ï¼Œå¯ä»¥çœ‹å‡ºå†…æ ¸é©±åŠ¨ç‰ˆæœ¬ä»515è‡ªåŠ¨å‡çº§æˆäº†525</p><p>æŸ¥çœ‹æ˜¾å¡é©±åŠ¨å†…æ ¸ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/driver/nvidia/version</span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤ºï¼š<code>NVRM version: NVIDIA UNIX X86 64 Kernel ModuleGcc version:515.86.01Wed 0ct 26 99:12:38 UTC 2022</code>ï¼Œå¯ä»¥å‘ç°æ˜¾å¡é©±åŠ¨å†…æ ¸ç‰ˆæœ¬è¿˜æ˜¯525ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>ç¬¬ä¸€ç§ï¼šé‡å¯æœåŠ¡å™¨</p><p>ç¬¬äºŒç§ï¼š<a href="https://huaweicloud.csdn.net/63560f1dd3efff3090b5939c.html?spm=1001.2101.3001.6650.4&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~activity-4-122349627-blog-118105194.pc_relevant_aa2&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~activity-4-122349627-blog-118105194.pc_relevant_aa2&amp;utm_relevant_index=4">ä¸ç”¨é‡å¯çš„æ–¹æ¡ˆ</a></p><p>ç¬¬ä¸‰ç§ï¼š<a href="https://cloud.tencent.com/developer/article/2066902">é‡æ–°å®‰è£…æ˜¾å¡é©±åŠ¨</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å…¶ä»–" scheme="https://www.robotsfan.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="NVIDIA" scheme="https://www.robotsfan.com/tags/NVIDIA/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨c++ä¸­ä½¿ç”¨yaml-cppåŠ¨æ€è°ƒå‚</title>
    <link href="https://www.robotsfan.com/posts/534bf7d1.html"/>
    <id>https://www.robotsfan.com/posts/534bf7d1.html</id>
    <published>2023-06-20T06:46:00.000Z</published>
    <updated>2024-07-17T03:02:57.516Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åœ¨c-ä¸­ä½¿ç”¨yaml-cppåŠ¨æ€è°ƒå‚"><a href="#åœ¨c-ä¸­ä½¿ç”¨yaml-cppåŠ¨æ€è°ƒå‚" class="headerlink" title="åœ¨c++ä¸­ä½¿ç”¨yaml-cppåŠ¨æ€è°ƒå‚"></a>åœ¨c++ä¸­ä½¿ç”¨yaml-cppåŠ¨æ€è°ƒå‚</h1><p>ä½¿ç”¨yaml-cppå¯ä»¥è¿›è¡ŒåŠ¨æ€è°ƒå‚ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘ï¼ŒèŠ‚çœè°ƒè¯•æ—¶é—´ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>å®‰è£…yaml-cpp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/jbeder/yaml-cpp.git</span><br><span class="line"><span class="built_in">cd</span> yaml-cpp &amp;&amp; mkdir build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line">cmake -DYAML_BUILD_SHARED_LIBS=on ..</span><br><span class="line">sudo make</span><br><span class="line">sudo make install</span><br><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure><p>å¤´æ–‡ä»¶åœ¨/usr/local/includeï¼Œåº“æ–‡ä»¶åœ¨/usr/local/lib</p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><ol><li><p>CmakeLists.txt</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(yaml-cpp REQUIRED)</span><br><span class="line"><span class="keyword">include_directories</span>(<span class="variable">$&#123;YAML_CPP_INCLUDE_DIR&#125;</span>)</span><br><span class="line"><span class="keyword">target_link_libraries</span>(your_file_name yaml-cpp)</span><br></pre></td></tr></table></figure></li><li><p>yamlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">kp:</span></span><br><span class="line">  <span class="attr">a:</span> <span class="number">500</span></span><br><span class="line">  <span class="attr">b:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">c:</span> <span class="number">200</span></span><br><span class="line"><span class="attr">kd:</span></span><br><span class="line">  <span class="attr">a:</span> <span class="number">30</span></span><br><span class="line">  <span class="attr">b:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">c:</span> <span class="number">10</span></span><br></pre></td></tr></table></figure></li><li><p>æºæ–‡ä»¶</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;yaml-cpp/yaml.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> YAML_PATH <span class="meta-string">&quot;xxx.yaml&quot;</span></span></span><br><span class="line"></span><br><span class="line">Mat3 _Kp, _Kd;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">read_yaml</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">YAML::Node config;</span><br><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">config = YAML::<span class="built_in">LoadFile</span>(YAML_PATH);</span><br><span class="line">&#125; <span class="built_in"><span class="keyword">catch</span></span>(YAML::BadFile &amp;e)</span><br><span class="line">&#123;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;read error, please change YAML_PATH in file State_Towr.cpp&quot;</span> &lt;&lt; std::endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_Kp = <span class="built_in">Vec3</span>(config[<span class="string">&quot;kp&quot;</span>][<span class="string">&quot;a&quot;</span>].as&lt;<span class="keyword">int</span>&gt;(), config[<span class="string">&quot;kp&quot;</span>][<span class="string">&quot;b&quot;</span>].as&lt;<span class="keyword">int</span>&gt;(), config[<span class="string">&quot;kp&quot;</span>][<span class="string">&quot;c&quot;</span>].as&lt;<span class="keyword">int</span>&gt;()).<span class="built_in">asDiagonal</span>();</span><br><span class="line">_Kd = <span class="built_in">Vec3</span>(config[<span class="string">&quot;kd&quot;</span>][<span class="string">&quot;a&quot;</span>].as&lt;<span class="keyword">int</span>&gt;(), config[<span class="string">&quot;kd&quot;</span>][<span class="string">&quot;b&quot;</span>].as&lt;<span class="keyword">int</span>&gt;(), config[<span class="string">&quot;kd&quot;</span>][<span class="string">&quot;c&quot;</span>].as&lt;<span class="keyword">int</span>&gt;()).<span class="built_in">asDiagonal</span>();</span><br><span class="line"></span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Change kp to [&quot;</span></span><br><span class="line">          &lt;&lt; config[<span class="string">&quot;kp&quot;</span>][<span class="string">&quot;a&quot;</span>].as&lt;<span class="keyword">int</span>&gt;() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">          &lt;&lt; config[<span class="string">&quot;kp&quot;</span>][<span class="string">&quot;b&quot;</span>].as&lt;<span class="keyword">int</span>&gt;() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">          &lt;&lt; config[<span class="string">&quot;kp&quot;</span>][<span class="string">&quot;c&quot;</span>].as&lt;<span class="keyword">int</span>&gt;() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">          &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Change kd to [&quot;</span></span><br><span class="line">          &lt;&lt; config[<span class="string">&quot;kd&quot;</span>][<span class="string">&quot;a&quot;</span>].as&lt;<span class="keyword">int</span>&gt;() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">          &lt;&lt; config[<span class="string">&quot;kd&quot;</span>][<span class="string">&quot;b&quot;</span>].as&lt;<span class="keyword">int</span>&gt;() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">          &lt;&lt; config[<span class="string">&quot;kd&quot;</span>][<span class="string">&quot;c&quot;</span>].as&lt;<span class="keyword">int</span>&gt;() &lt;&lt; <span class="string">&quot;, &quot;</span></span><br><span class="line">          &lt;&lt; <span class="string">&quot;]&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">read_yaml</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="C++" scheme="https://www.robotsfan.com/categories/C/"/>
    
    
    <category term="C++" scheme="https://www.robotsfan.com/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ç®¡ç†gitçš„submodule</title>
    <link href="https://www.robotsfan.com/posts/95374dd8.html"/>
    <id>https://www.robotsfan.com/posts/95374dd8.html</id>
    <published>2023-04-25T04:37:00.000Z</published>
    <updated>2024-07-17T03:04:24.383Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç®¡ç†gitçš„submodule"><a href="#ç®¡ç†gitçš„submodule" class="headerlink" title="ç®¡ç†gitçš„submodule"></a>ç®¡ç†gitçš„submodule</h1><h2 id="æ·»åŠ å­ä»“åº“"><a href="#æ·»åŠ å­ä»“åº“" class="headerlink" title="æ·»åŠ å­ä»“åº“"></a>æ·»åŠ å­ä»“åº“</h2><p>åœ¨ä¸»ä»“åº“éœ€è¦æ·»åŠ submoduleçš„åœ°æ–¹æ–°å»ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add https://github.com/xxx/sub_xxx.git</span><br></pre></td></tr></table></figure><p>æ³¨ï¼š<code>-b your_branch</code>å¯é€‰</p><p>æ›´æ–°ä¸»ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;add submodule&quot;</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="è‡ªåŠ¨æ›´æ–°ä¸»ä»“åº“"><a href="#è‡ªåŠ¨æ›´æ–°ä¸»ä»“åº“" class="headerlink" title="è‡ªåŠ¨æ›´æ–°ä¸»ä»“åº“"></a>è‡ªåŠ¨æ›´æ–°ä¸»ä»“åº“</h2><p>æ‰“å¼€githubï¼Œåˆ›å»ºæ–°token</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230425114629665.png" alt="image-20230425114629665"></p><p>è®°å½•ä¸‹è¿™ä¸ªtokenï¼Œåªä¼šæ˜¾ç¤ºä¸€é</p><p>åœ¨éœ€è¦è‡ªåŠ¨æ›´æ–°çš„submoduleä¸­ç‚¹å‡»</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230425114446598.png" alt="image-20230425114446598"></p><p>æ·»åŠ secret</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230425114520685.png" alt="image-20230425114520685"></p><p>å›åˆ°ä»“åº“çš„Actionï¼Œç‚¹å‡»<code>set up a workflow yourself -&gt;</code>ï¼Œéšæ„èµ·åï¼Œç²˜è´´ä¸‹è¿°ä»£ç ä¸­çš„repositoryå’Œbranchesï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Send</span> <span class="string">submodule</span> <span class="string">updates</span> <span class="string">to</span> <span class="string">parent</span> <span class="string">repo</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> </span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">update:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v2</span></span><br><span class="line">        <span class="attr">with:</span> </span><br><span class="line">          <span class="attr">repository:</span> <span class="string">xxx/parent_xxx</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.PRIVATE_TOKEN_GITHUB</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Pull</span> <span class="string">&amp;</span> <span class="string">update</span> <span class="string">submodules</span> <span class="string">recursively</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git submodule update --init --recursive</span></span><br><span class="line"><span class="string">          git submodule update --recursive --remote</span></span><br><span class="line"><span class="string"></span>      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Commit</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config user.email &quot;actions@github.com&quot;</span></span><br><span class="line"><span class="string">          git config user.name &quot;GitHub Actions - update submodules&quot;</span></span><br><span class="line"><span class="string">          git add --all</span></span><br><span class="line"><span class="string">          git commit -m &quot;Update submodules&quot; || echo &quot;No changes to commit&quot;</span></span><br><span class="line"><span class="string">          git push</span></span><br></pre></td></tr></table></figure><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20230425115003220.png" alt="image-20230425115003220"></p><h2 id="ä½¿ç”¨ä¸»ä»“åº“"><a href="#ä½¿ç”¨ä¸»ä»“åº“" class="headerlink" title="ä½¿ç”¨ä¸»ä»“åº“"></a>ä½¿ç”¨ä¸»ä»“åº“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/xxx/parent_xxx</span><br></pre></td></tr></table></figure><p>è‹¥å­ä»“åº“æœ‰æ›´æ–°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹‰å–å¯¹åº”çš„åˆ†æ”¯</span></span><br><span class="line">git pull</span><br><span class="line"><span class="comment"># æ›´æ–°å¯¹åº”ä»£ç </span></span><br><span class="line">git submodule update --remote --recursive</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Git" scheme="https://www.robotsfan.com/categories/Git/"/>
    
    
    <category term="Git" scheme="https://www.robotsfan.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Githubçš„Contributionæ²¡æœ‰å¢åŠ çš„é—®é¢˜</title>
    <link href="https://www.robotsfan.com/posts/e5b94435.html"/>
    <id>https://www.robotsfan.com/posts/e5b94435.html</id>
    <published>2023-04-17T07:44:00.000Z</published>
    <updated>2024-07-17T03:04:29.529Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="è§£å†³Githubçš„Contributionæ²¡æœ‰å¢åŠ çš„é—®é¢˜"><a href="#è§£å†³Githubçš„Contributionæ²¡æœ‰å¢åŠ çš„é—®é¢˜" class="headerlink" title="è§£å†³Githubçš„Contributionæ²¡æœ‰å¢åŠ çš„é—®é¢˜"></a>è§£å†³Githubçš„Contributionæ²¡æœ‰å¢åŠ çš„é—®é¢˜</h1><blockquote><p>è½¬è½½äº<a href="https://blog.csdn.net/Liven_Zhu/article/details/80800162">https://blog.csdn.net/Liven_Zhu/article/details/80800162</a></p></blockquote><p>æœ€è¿‘åœ¨çœ‹è‡ªå·±çš„Githubæ—¶ï¼Œå¶ç„¶é—´å‘ç°ï¼Œè‡ªå·±çš„è®¸å¤šConmmitéƒ½æ²¡æœ‰è®¡ç®—åœ¨Contributionå†…ï¼Œç„¶åçœ‹è‡ªå·±åº“ä¸­çš„Commitè®°å½•æ—¶ï¼Œå‘ç°æ²¡æœ‰è¢«è®°å½•åœ¨Contribution Graphä¸­çš„Commitå¹¶ä¸æ˜¾ç¤ºè‡ªå·±çš„å¤´åƒï¼ŒåŒæ—¶æ˜¾ç¤ºçš„ç”¨æˆ·åå’Œè‡ªå·±åˆ›å»ºGithubè´¦å·æ—¶å¡«çš„ç”¨æˆ·åä¹Ÿä¸ä¸€æ ·ã€‚äºæ˜¯åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›èµ„æ–™ï¼Œå…¶ä¸­Githubå®˜æ–¹ç»™å‡ºäº†ä¸€ä¸ªå®˜æ–¹æ–‡ä»¶ï¼Œå‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆæ ·çš„Commitå¯ä»¥è¢«è®°å…¥Contributionï¼Œè¯·ç‚¹å‡»æ­¤å¤„æŸ¥çœ‹ã€‚</p><p>åœ¨å®˜æ–¹çš„å¸®åŠ©æ–‡æ¡£ä¸­ï¼Œæœ‰ä¸€æ¡æ˜¯Commitè¢«è®°å…¥Contributionä¸­å¿…é¡»æ»¡è¶³ç”¨äºCommitçš„é‚®ä»¶åœ°å€å¿…é¡»ä¸Githubè´¦æˆ·ç›¸å…³è”ã€‚å…¶å®ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘çš„Commitæ²¡æœ‰è¢«è®°å…¥Contributionå’Œä¸æ˜¾ç¤ºå¤´åƒçš„åŸå› ï¼Œä¹Ÿæ˜¯å¤§å¤šæ•°äººä¹Ÿæ˜¯è¿™ä¸ªåŸå› ã€‚</p><p>åŸå› å°±æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨ç”µè„‘ä¸­ä¸‹è½½äº†Gitå®¢æˆ·ç«¯åï¼Œæˆ‘ä»¬ä¼šç”¨æœ¬åœ°gitå‘½ä»¤è¡Œé…ç½®ä¸€ä¸ªç”¨æˆ·åå’Œé‚®ç®±åœ°å€ï¼Œè¿™ä¸ªç”¨æˆ·åå’Œé‚®ç®±åœ°å€åªæœ‰ä¸åˆ›å»ºGithubæ—¶çš„é‚®ç®±å’Œåœ°å€ç›¸åŒæ—¶ï¼Œæ¯æ¬¡å¾€Githubä¸Šcommitæ—¶ï¼ŒGithubå°±ä¼šè¯†åˆ«å‡ºcommitçš„å°±æ˜¯ä½ æœ¬äººï¼Œæ­¤æ—¶è¿™æ¬¡commitæ‰ä¼šè¢«è®°å…¥Contributionã€‚å¥½äº†çŸ¥é“åŸå› äº†ï¼Œæˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸€ä¸‹ï¼Œå¦‚ä½•æ“ä½œï¼š</p><p>é¦–å…ˆï¼Œä½ éœ€è¦çŸ¥é“ï¼Œåœ¨ä½ å®‰è£…gitå®¢æˆ·ç«¯æ—¶ï¼Œä½ é…ç½®çš„ç”¨æˆ·åå’Œé‚®ç®±åœ°å€æ˜¯ä»€ä¹ˆï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¾ç¤ºå‡ºæ¯æ¬¡commitæ—¶çš„æ—¥å¿—ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit <span class="built_in">log</span></span><br></pre></td></tr></table></figure></p><p>åœ¨æ—¥å¿—ä¸Šå¯ä»¥çœ‹åˆ°æ¯æ¬¡commitæ—¶ï¼Œä½ æ˜¯ç”¨çš„ç”¨æˆ·åå’Œé‚®ç®±åœ°å€ï¼Œå¦‚æœä¸Githubä¸Šçš„ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆé—®é¢˜å°±åœ¨äºæ­¤äº†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬è¦æŠŠcommitæ—¶çš„ç”¨æˆ·åå’Œé‚®ç®±åœ°å€æ”¹ä¸ºä¸Githubæ³¨å†Œæ—¶çš„ä¸€è‡´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &lt;your username <span class="keyword">for</span> Github&gt;</span><br><span class="line">git config --global user.email &lt;your email address <span class="keyword">for</span> Github&gt;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹åï¼Œä½ ä»¥åå†å‘Githubæäº¤ä»£ç æ—¶ï¼Œå°±ä¼šçœ‹åˆ°commitè¢«è®°å…¥Contributionäº†ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ç§è¡¥æ•‘æ–¹æ³•ï¼Œå¯ä»¥å°†ä»¥å‰ä¸æ²¡æœ‰è¢«è®°å…¥Contributionçš„commitså…³è”çš„é‚®ç®±ä¿®æ”¹ä¸ºæ–°çš„é‚®ç®±ï¼Œé‚£ä¹ˆï¼Œä»¥å‰æ²¡æœ‰è®°å…¥Contributionçš„commitsï¼Œä¹Ÿä¼šé‡æ–°è¢«è®°å…¥Contributionã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>å°†è¦ä¿®æ”¹çš„repoå…‹éš†åˆ°æœ¬åœ°</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --bare &lt;the repo address&gt;</span><br></pre></td></tr></table></figure></li><li><p>å°†å‘½ä»¤è¡Œçš„å½“å‰ç›®å½•åˆ‡æ¢åˆ°æ–°å…‹éš†çš„åº“ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> &lt;the repo path&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®ä½ çš„ä¿¡æ¯ä¿®æ”¹ä»¥ä¸‹å˜é‡ï¼Œå¤åˆ¶ç²˜è´´å›è½¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git filter-branch --env-filter <span class="string">&#x27;</span></span><br><span class="line"><span class="string">OLD_EMAIL=&lt;æ—§é‚®ç®±åœ°å€&gt;</span></span><br><span class="line"><span class="string">CORRECT_NAME=&lt;æ­£ç¡®ç”¨æˆ·å&gt;</span></span><br><span class="line"><span class="string">CORRECT_EMAIL=&lt;æ­£ç¡®é‚®ç®±åœ°å€&gt;</span></span><br><span class="line"><span class="string">if [ &quot;$GIT_COMMITTER_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]</span></span><br><span class="line"><span class="string">then</span></span><br><span class="line"><span class="string">export GIT_COMMITTER_NAME=&quot;$CORRECT_NAME&quot;</span></span><br><span class="line"><span class="string">export GIT_COMMITTER_EMAIL=&quot;$CORRECT_EMAIL&quot;</span></span><br><span class="line"><span class="string">fi</span></span><br><span class="line"><span class="string">if [ &quot;$GIT_AUTHOR_EMAIL&quot; = &quot;$OLD_EMAIL&quot; ]</span></span><br><span class="line"><span class="string">then</span></span><br><span class="line"><span class="string">export GIT_AUTHOR_NAME=&quot;$CORRECT_NAME&quot;</span></span><br><span class="line"><span class="string">export GIT_AUTHOR_EMAIL=&quot;$CORRECT_EMAIL&quot;</span></span><br><span class="line"><span class="string">fi&#x27;</span> --tag-name-filter cat -- --branches --tags</span><br></pre></td></tr></table></figure></li><li><p>ç”¨<code>git log</code>æŸ¥çœ‹ç”¨æˆ·åå’Œé‚®ç®±åœ°å€æœ‰æ²¡æœ‰æ”¹è¿‡æ¥</p></li><li><p>æŠŠæ­£ç¡®å†å²pushåˆ°Githubä¸Š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push --force --tags origin <span class="string">&#x27;refs/heads/*&#x27;</span></span><br></pre></td></tr></table></figure></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Git" scheme="https://www.robotsfan.com/categories/Git/"/>
    
    
    <category term="Git" scheme="https://www.robotsfan.com/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>Windows+Opencv+Clionçš„é…ç½®</title>
    <link href="https://www.robotsfan.com/posts/69395e08.html"/>
    <id>https://www.robotsfan.com/posts/69395e08.html</id>
    <published>2022-09-18T08:30:00.000Z</published>
    <updated>2024-07-17T03:00:26.588Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Windows-Opencv-Clionçš„é…ç½®"><a href="#Windows-Opencv-Clionçš„é…ç½®" class="headerlink" title="Windows+Opencv+Clionçš„é…ç½®"></a>Windows+Opencv+Clionçš„é…ç½®</h1><h2 id="ä¸‹è½½OpenCVæºç "><a href="#ä¸‹è½½OpenCVæºç " class="headerlink" title="ä¸‹è½½OpenCVæºç "></a>ä¸‹è½½OpenCVæºç </h2><p><a href="https://opencv.org/releases/">https://opencv.org/releases/</a></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918154832306.png" alt="image-20220918154832306" style="zoom:50%;"></p><p>è§£å‹åˆ°å–œæ¬¢çš„ä½ç½®ï¼Œåœ¨<code>opencv</code> æ ¹ç›®å½•ä¸‹æ–°å»º<code>mingw_build</code>æ–‡ä»¶å¤¹</p><h2 id="ä¸‹è½½MinGW-W64"><a href="#ä¸‹è½½MinGW-W64" class="headerlink" title="ä¸‹è½½MinGW-W64"></a>ä¸‹è½½MinGW-W64</h2><p><a href="https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/">https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/</a></p><p>æ³¨æ„ä¸€å®šè¦ä¸‹è½½<code>x86_64-posix-sehMinGW</code>ç‰ˆæœ¬ çš„MinGWï¼Œå¦åˆ™åé¢ç¼–è¯‘ä¼šå‡ºé”™</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918155015462.png" alt="image-20220918155015462" style="zoom:50%;"></p><p>è§£å‹åˆ°å–œæ¬¢çš„ä½ç½®</p><h2 id="ä¸‹è½½Cmake"><a href="#ä¸‹è½½Cmake" class="headerlink" title="ä¸‹è½½Cmake"></a>ä¸‹è½½Cmake</h2><p><a href="https://cmake.org/download/">https://cmake.org/download/</a></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918155143589.png" alt="image-20220918155143589" style="zoom:50%;"></p><p>å®‰è£…æ—¶é€‰æ‹©ä¸ºæ‰€æœ‰ç”¨æˆ·æ·»åŠ ç¯å¢ƒå˜é‡</p><h2 id="ç”Ÿæˆopencvçš„makefileæ–‡ä»¶"><a href="#ç”Ÿæˆopencvçš„makefileæ–‡ä»¶" class="headerlink" title="ç”Ÿæˆopencvçš„makefileæ–‡ä»¶"></a>ç”Ÿæˆopencvçš„makefileæ–‡ä»¶</h2><p>æ‰“å¼€<code>cmake-gui</code></p><p>ç‚¹å‡»<code>Browse Source</code>é€‰æ‹©é€‰æ‹© <code>opencv</code> ä¸‹çš„ <code>sources</code>æ–‡ä»¶å¤¹</p><p>ç‚¹å‡»<code>Browse Build</code>é€‰æ‹©é€‰æ‹© <code>opencv</code> ä¸‹çš„ <code>mingw_build</code>æ–‡ä»¶å¤¹</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918155621342.png" alt="image-20220918155621342" style="zoom:50%;"></p><p>ç‚¹å‡»Configureï¼ŒæŒ‡å®šç¼–è¯‘å™¨</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918155658087.png" alt="image-20220918155658087" style="zoom:50%;"></p><p>åˆ†åˆ«é€‰æ‹©åˆšåˆšä¸‹è½½çš„posixç‰ˆæœ¬MinGW-W64ä¸‹çš„gccå’Œg++</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918155721214.png" alt="image-20220918155721214" style="zoom:50%;"></p><p>ç‚¹å‡»Finishï¼Œç­‰å¾…å®Œæˆ</p><p>å¦‚é‡åˆ°ä¸€ä¸‹é—®é¢˜ï¼Œè¯·æ‰“å¼€ä¸‹é¢çš„æ–‡ä»¶</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918155936331.png" alt="image-20220918155936331" style="zoom:50%;"></p><p>æŒ‰ç…§æ—¥å¿—é‡Œçš„ä¸‹è½½åœ°å€åˆ†åˆ«ä¸‹è½½è¿™ä¸‰ä¸ªæ–‡ä»¶å¹¶æ”¾å…¥<code>/source/.cache/ffmpeg</code>ä¸­ï¼Œä½¿ç”¨<code>certutil -hashfile æ–‡ä»¶å MD5</code>è·å–æ¯ä¸ªæ–‡ä»¶çš„MD5ï¼Œä»¥<code>MD5-æ–‡ä»¶å</code>é‡æ–°å‘½åè¿™ä¸‰ä¸ªæ–‡ä»¶ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918160038962.png" alt="image-20220918160038962" style="zoom:50%;"></p><p>å›åˆ°cmake-guiï¼Œé‡æ–°ç‚¹å‡»Configureï¼Œè‹¥æ— å…¶ä»–æŠ¥é”™åˆ™ç‚¹å‡»Generateç”ŸæˆMakefileæ–‡ä»¶ã€‚</p><h2 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h2><p>æ‰“å¼€å‘½ä»¤è¡Œè¿›å…¥<code>mingw-build</code>æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨<code>mingw32-make -j8</code>ç¼–è¯‘ï¼ˆ8ä¸ºæ ¸å¿ƒæ•°ï¼Œè¯·è‡ªè¡Œè°ƒæ•´ï¼‰ï¼Œç¼–è¯‘é€Ÿåº¦å¤§æ¦‚10åˆ†é’Ÿå·¦å³ã€‚</p><p>ç¼–è¯‘æˆåŠŸåï¼Œä½¿ç”¨<code>mingw32-make install</code>å‘½ä»¤å°†ç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶æ•´åˆåˆ°<code>opencv/mingw_build/install</code>ç›®å½•ä¸­</p><h2 id="é…ç½®ç¯å¢ƒå˜é‡"><a href="#é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="é…ç½®ç¯å¢ƒå˜é‡"></a>é…ç½®ç¯å¢ƒå˜é‡</h2><p>é…ç½®ç¯å¢ƒå˜é‡ï¼Œå°†<code>opencv/mingw_build/install/x64/mingw/bin</code>åŠ å…¥ç¯å¢ƒå˜é‡ä¸­çš„pathä¸­ã€‚</p><h2 id="åœ¨clioné¡¹ç›®ä¸­ä½¿ç”¨opencv"><a href="#åœ¨clioné¡¹ç›®ä¸­ä½¿ç”¨opencv" class="headerlink" title="åœ¨clioné¡¹ç›®ä¸­ä½¿ç”¨opencv"></a>åœ¨clioné¡¹ç›®ä¸­ä½¿ç”¨opencv</h2><p>æ–°å»ºé¡¹ç›®ï¼Œç¼–è¾‘<code>CMakeLists.txt</code></p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.22</span>)</span><br><span class="line"><span class="keyword">project</span>(OpenCV_Test)</span><br><span class="line"></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">14</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">add_executable</span>(OpenCV_Test main.cpp)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®OpenCVç›®å½•</span></span><br><span class="line"><span class="keyword">set</span>(OpenCV_DIR E:/<span class="keyword">Install</span>/Tools/opencv/mingw_build/<span class="keyword">install</span>)</span><br><span class="line"><span class="comment"># æœç´¢OpenCVç›®å½•</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenCV REQUIRED)</span><br><span class="line"><span class="comment"># é“¾æ¥OpenCVåº“æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(OpenCV_Test <span class="variable">$&#123;OpenCV_LIBS&#125;</span>)</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘<code>main.cpp</code></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui/highgui.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Mat img = <span class="built_in">imread</span>(<span class="string">&quot;test.jpg&quot;</span>);</span><br><span class="line"><span class="built_in">namedWindow</span>(<span class="string">&quot;test&quot;</span>, WINDOW_AUTOSIZE);</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;test&quot;</span>, img);</span><br><span class="line"><span class="built_in">waitKey</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘è¿è¡Œ</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220918162039679.png" alt="image-20220918162039679" style="zoom:50%;"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="OpenCV" scheme="https://www.robotsfan.com/categories/OpenCV/"/>
    
    
    <category term="OpenCV" scheme="https://www.robotsfan.com/tags/OpenCV/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ ç”µæœºFOCæ§åˆ¶</title>
    <link href="https://www.robotsfan.com/posts/d99d1c1a.html"/>
    <id>https://www.robotsfan.com/posts/d99d1c1a.html</id>
    <published>2022-09-15T16:30:00.000Z</published>
    <updated>2024-07-17T03:20:07.175Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ‰‹æŠŠæ‰‹æ•™ä½ ç”µæœºFOCæ§åˆ¶"><a href="#æ‰‹æŠŠæ‰‹æ•™ä½ ç”µæœºFOCæ§åˆ¶" class="headerlink" title="æ‰‹æŠŠæ‰‹æ•™ä½ ç”µæœºFOCæ§åˆ¶"></a>æ‰‹æŠŠæ‰‹æ•™ä½ ç”µæœºFOCæ§åˆ¶</h1><h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><p><strong>2024.07.17 ä½œè€…å·²å¾ˆä¹…æ²¡åšè¿‡ç”µæœºäº†ï¼Œæ­¤æ–‡åœæ›´</strong></p><p>2022.09.16 å®Œå–„å›¾ç‰‡å†…å®¹ä¸ä»£ç ï¼Œæ›´æ–°åˆ°é€Ÿåº¦é—­ç¯</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220916003234988.png" alt="image-20220916003234988" style="zoom: 25%;"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220916003249372.png" alt="image-20220916003249372" style="zoom: 25%;"></p><h2 id="FOCæ¡†æ¶å¼•å…¥"><a href="#FOCæ¡†æ¶å¼•å…¥" class="headerlink" title="FOCæ¡†æ¶å¼•å…¥"></a>FOCæ¡†æ¶å¼•å…¥</h2><p>ä¸‰å‘ç”µæœºï¼Œåˆ†åˆ«ä¸ºUVWä¸‰å‘ï¼Œè§’åº¦äº’å·®120åº¦ã€‚è‹¥ä½¿ç”¨BLDCæ§åˆ¶æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾æ¯æ¬¡æ¢å‘å¢åŠ 60åº¦ï¼Œè½¬å­åªèƒ½åˆ°è¾¾å…­ä¸ªä½ç½®ï¼Œæ‰€ä»¥å…­æ­¥æ¢å‘æ—¶ä¼šæœ‰æŒ¯åŠ¨ã€‚ä½¿ç”¨FOCæ§åˆ¶æ–¹æ³•å¯ä»¥ä½¿è½¬å­åˆ°è¾¾ä»»æ„è§’åº¦ï¼Œæ‰€ä»¥è¿è¡Œèµ·æ¥ä¼šæ›´åŠ å¹³æ»‘ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/ED2759D27293A18F51A49E35A2A46EB0.png" alt="ED2759D27293A18F51A49E35A2A46EB0" style="zoom:50%;"></p><p>å¦‚æœæƒ³åˆ°è¾¾40åº¦çš„ä½ç½®ï¼Œåªéœ€è¦åœ¨0åº¦æ–¹å‘é€šç”µä¸€æ®µæ—¶é—´ï¼Œåœ¨60åº¦æ–¹å‘é€šç”µä¸€æ®µæ—¶é—´ï¼Œå†åœ¨ç©ºçŸ¢é‡çš„çŠ¶æ€ä¸‹é€šç”µä¸€æ®µæ—¶é—´ï¼ˆå…¨æ¡¥000æˆ–111çš„ä½ç½®ä¸ºç©ºçŸ¢é‡ï¼Œç©ºçŸ¢é‡çš„æ—¶é•¿ç”¨æ¥è°ƒèŠ‚æ‰­çŸ©ã€‚åé¢ä¼šè®²åˆ°ï¼‰ï¼Œä¸‰æ®µæ—¶é—´ç»„æˆä¸€ä¸ªå‘¨æœŸï¼Œä»¥è¿™ä¸ªå‘¨æœŸå¾ªç¯äº§ç”ŸPWMï¼Œå³å¯é”å®šè‡³40åº¦ã€‚è‹¥æƒ³åˆ°è¾¾å…¶ä»–è§’åº¦ï¼Œåªéœ€æ”¹å˜0åº¦å’Œ60åº¦çš„é€šç”µæ—¶é•¿æ¯”ä¾‹ã€‚</p><p>è¦æƒ³ä½¿ç£åœºæ—‹è½¬èµ·æ¥ï¼Œå°±éœ€è¦è¾“å…¥æ­£å¼¦ç”µå‹ï¼Œä½†æˆ‘ä»¬è¾“å…¥çš„æ˜¯ç›´æµç”µï¼Œæˆ‘ä»¬é©¬ä¸Šæƒ³åˆ°å¯ä»¥ä½¿ç”¨PWMæ³¢ã€‚é€šè¿‡ä¸æ–­æ”¹å˜<strong>PWMè„‰å®½</strong>å°±å¯ä»¥æ¨¡æ‹Ÿæ­£å¼¦ç”µå‹ï¼Œä½“ç°åœ¨ç”µæµä¸Šåˆ™ä¸ºæ­£å¼¦ç”µæµã€‚</p><p>ä¸‹å›¾ä¸ºä¸€ä¸ªå®Œæ•´çš„FOCæµç¨‹å›¾ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220418110757084.png" alt="image-20220418110757084" style="zoom: 80%;"></p><p>æˆ‘ä»¬å…ˆæ¥çœ‹æ­£å‘é€šè·¯ï¼šè¾“å…¥ $I_{d_ref}$ å’Œ $I_{q_ref}$ ä¸ä¸‹æ–‡åé¦ˆé€šè·¯é‡‡æ ·å¾—åˆ°çš„ç”µæµ $I_d$ å’Œ $I_q$ è¿›è¡ŒPIDæ§åˆ¶è¾“å‡º $U_d$ å’Œ $U_q$ ï¼ˆè¾“å…¥çš„ $I_{d_ref}$ é€šå¸¸ä¸º0ï¼Œ $I_{q_ref}$ å‰é€šå¸¸è¿˜éœ€è¦æ¥å…¥ä¸€ä¸ªé€Ÿåº¦PIDæ„æˆé€Ÿåº¦ç¯ï¼‰ï¼Œå†é€šè¿‡åParkå˜æ¢è½¬æ¢æˆ $U_\alpha$ å’Œ $U_\beta$ ï¼Œé€šè¿‡SVPWMæ¨¡å—æ§åˆ¶å®šæ—¶å™¨äº§ç”Ÿå…­è·¯äº’è¡¥çš„PWMä¿¡å·ï¼Œæœ€åä½¿ç”¨PWMä¿¡å·æ§åˆ¶å…¨æ¡¥MOSç®¡çš„é€šæ–­ï¼Œäº§ç”Ÿä¸‰å‘ç”µå‹ä½¿ç”µæœºè½¬åŠ¨ã€‚</p><p>å†æ¥çœ‹åé¦ˆé€šè·¯ï¼šé€šè¿‡é‡‡æ ·ç”µé˜»é‡‡é›†ä»»æ„ä¸¤ç›¸ç”µæµï¼Œæ ¹æ®åŸºå°”éœå¤«ç”µæµå®šå¾‹å¯ä»¥ç®—å‡ºç¬¬ä¸‰ç›¸ç”µæµï¼Œå°†ä¸‰å‘ç”µæµé€šè¿‡Clarkå˜æ¢è½¬åŒ–æˆ $I_\alpha$ å’Œ $I_\beta$ ï¼Œå†é€šè¿‡Parkå˜æ¢è½¬æ¢æˆ $I_d$ å’Œ $I_q$ ï¼Œä½œä¸ºåé¦ˆä¼ å…¥PIDæ§åˆ¶å™¨æ„æˆç”µæµç¯ã€‚</p><p>ä¸Šå›¾ä¸­çš„Parkå˜æ¢å’ŒåParkå˜æ¢éœ€è¦å½“å‰çš„è§’åº¦ä½œä¸ºè¾“å…¥ï¼›é€Ÿåº¦PIDéœ€è¦é€Ÿåº¦ä½œä¸ºåé¦ˆã€‚æ‰€ä»¥éœ€è¦è·å¾—ç”µæœºçš„é€Ÿåº¦ä¸è§’åº¦ã€‚è§’åº¦å’Œé€Ÿåº¦çš„è·å–æ–¹æ³•åˆ†ä¸ºæœ‰æ„Ÿå’Œæ— æ„Ÿã€‚æœ‰æ„Ÿæ–¹å¼ä½¿ç”¨éœå°”å…ƒä»¶ï¼ˆHall Sensorï¼‰ï¼Œå®‰è£…åœ¨ç”µæœºä¸Šå°±å¯ä»¥æ£€æµ‹ç”µæœºç£é“çš„ä½ç½®ã€‚æ— æ„Ÿä½¿ç”¨è§‚æµ‹å™¨ï¼ˆobserverï¼‰è·å¾—è§’åº¦é€Ÿåº¦ä¿¡æ¯ï¼Œæœ¬æ–‡å°†ä½¿ç”¨æ‰©å±•å¡å°”æ›¼æ»¤æ³¢è§‚æµ‹å™¨ï¼ˆEKFï¼‰ï¼Œè¾“å…¥ä¸º  $U_\alpha$ ã€ $U_\beta$ ã€ $I_\alpha$ ã€ $I_\beta$ ã€‚ä½¿ç”¨æ— æ„Ÿæ–¹å¼ä¸éœ€è¦éœå°”ä¼ æ„Ÿå™¨ï¼Œå¯ä»¥å‡å°‘è¿æ¥çº¿çš„æ•°é‡ï¼Œä¹Ÿå¯ä»¥å‡å°æˆæœ¬ã€‚</p><h2 id="åæ ‡å˜æ¢"><a href="#åæ ‡å˜æ¢" class="headerlink" title="åæ ‡å˜æ¢"></a>åæ ‡å˜æ¢</h2><p>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åæ ‡å˜æ¢ï¼Ÿç”µæœºæ§åˆ¶å¤§å¤šæ˜¯åœ¨æ§åˆ¶é€Ÿåº¦/è½¬çŸ©ï¼Œéœ€è¦ç”¨PIDé—­ç¯æ§åˆ¶æ­£å¼¦äº¤æµç”µå‹çš„å¹…å€¼å’Œè§’åº¦ï¼Œä¸æ˜¯å¾ˆå®¹æ˜“å®ç°ï¼Œæ‰€ä»¥é€šè¿‡åæ ‡å˜åŒ–æŠŠæ­£å¼¦äº¤æµä¿¡æ¯åˆ†è§£æˆè§’åº¦ä¿¡æ¯ï¼ˆQè½´æ§åˆ¶è½¬çŸ©ï¼‰å’Œå¹…å€¼ä¿¡æ¯ï¼ˆDè½´æ§åˆ¶ç£åœºï¼‰å•ç‹¬æ§åˆ¶ã€‚</p><p><strong>FOCçš„å˜æ¢ä¸­è¦æ»¡è¶³ç­‰å¹…å€¼å˜æ¢ï¼Œå³å˜æ¢å‰åå¹…å€¼ä¸å˜ã€‚</strong></p><p>åæ ‡å˜æ¢éƒ½åˆ†ä¸ºæ­£å‘å˜æ¢å’Œåå‘å˜æ¢ï¼Œæ­£å‘å˜æ¢éƒ½æ˜¯å¯¹ç”µæµè¿›è¡Œæ“ä½œçš„ï¼Œåå‘å˜æ¢éƒ½æ˜¯å¯¹ç”µå‹è¿›è¡Œæ“ä½œçš„ã€‚</p><p>ä¸‹é¢çš„å˜æ¢å‡é‡‡ç”¨è”ç«‹å’ŒçŸ©é˜µä¸¤ç§å½¢å¼è¡¨ç¤ºï¼Œä»¥æ–¹ä¾¿ä½¿ç”¨ã€‚</p><h3 id="Clarkå˜æ¢"><a href="#Clarkå˜æ¢" class="headerlink" title="Clarkå˜æ¢"></a>Clarkå˜æ¢</h3><p>Clarkå˜æ¢å®ç°äº†ä¸‰å‘åæ ‡ç³» $(a,b,c)$ ä¸ç›´è§’åæ ‡ç³» $(\alpha,\beta)$ é—´çš„è½¬æ¢ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/7C602099D7A9549EDA9C24D13AB98072.png" alt="7C602099D7A9549EDA9C24D13AB98072" style="zoom: 67%;"></p><h4 id="æ­£å‘Clarkå˜æ¢"><a href="#æ­£å‘Clarkå˜æ¢" class="headerlink" title="æ­£å‘Clarkå˜æ¢"></a>æ­£å‘Clarkå˜æ¢</h4><p>Clarkå˜æ¢å°†ä¸‰ç›¸ä¿¡å·è½¬æ¢ä¸ºä¸¤ç›¸ä¿¡å·ã€‚å·²çŸ¥ä¸‰ç›¸åæ ‡ç³» $(I_a,I_b,I_c)$ ï¼Œè¿™ä¸‰ä¸ªåŸºå‘é‡ä¸æ˜¯æ­£äº¤çš„ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶æ­£äº¤åŒ–ä¸ºä¸€ä¸ªç›´è§’åæ ‡ç³»ï¼Œå‘½åä¸º $\alpha-\beta$ åæ ‡ç³»ï¼Œå˜æ¢å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}    \begin{aligned}    I_\alpha&=I_a-I_b\text{cos}60-I_c\text{cos}60 \\            &=I_a-\frac{1}{2}I_b-\frac{1}{2}I_c    \end{aligned} \\    \begin{aligned}    I_\beta&=I_b\text{cos}30-I_c\text{cos}30 \\           &=\frac{\sqrt3}{2}I_b-\frac{\sqrt3}{2}I_c    \end{aligned}\end{array}\right.</script><p>è¡¨ç¤ºä¸ºçŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{c}    I_{\alpha} \\    I_{\beta}\end{array}\right]=\left[\begin{array}{ccc}    1 & -\frac{1}{2}       & -\frac{1}{2} \\    0 & \frac{\sqrt{3}}{2} & -\frac{\sqrt{3}}{2}\end{array}\right]\left[\begin{array}{c}    I_{a} \\    I_{b} \\    I_{c}\end{array}\right]</script><p>æˆ‘ä»¬ä¸€èˆ¬åœ¨ç”µè·¯ä¸­åªé‡‡é›†ä¸¤ç›¸ç”µæµï¼Œç¬¬ä¸‰ç›¸ç”µæµå¯ä»¥ä½¿ç”¨åŸºå°”éœå¤«ç”µæµå®šå¾‹å¾—å‡ºï¼ˆ $I_a+I_b+I_c=0$ ï¼‰ï¼Œæ•…ä¸Šå¼ä¹Ÿå¯æ•´ç†ä¸ºä»¥ä¸‹å½¢å¼ï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}    I_\alpha=\frac{3}{2}I_a \\    I_\beta=\frac{\sqrt3}{2}I_a+\sqrt3I_b\end{array}\right.</script><p>çŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{c}    I_{\alpha} \\    I_{\beta}\end{array}\right]=\left[\begin{array}{cc}    \frac{3}{2} & 0\\    \frac{\sqrt{3}}{2} & \sqrt{3}\end{array}\right]\left[\begin{array}{c}    I_{a} \\    I_{b} \end{array}\right]</script><p>ç”±äºå˜æ¢å‰å $I_a$ å’Œ $I_\alpha$ å¹…å€¼è¦ç›¸åŒï¼Œæ‰€ä»¥è¦è¿›è¡Œç­‰å¹…å€¼å˜æ¢ï¼Œå˜æ¢ç³»æ•°ä¸º $\frac{2}{3}$ ï¼Œå³å˜ä¸º</p><script type="math/tex; mode=display">\left\{\begin{array}{l}    I_\alpha=I_a \\    I_\beta=\frac{1}{\sqrt3}(I_a+2I_b)\end{array}\right.</script><p>çŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{c}    I_{\alpha} \\    I_{\beta}\end{array}\right]=\left[\begin{array}{cc}    1 & 0\\    \frac{1}{\sqrt{3}} & \frac{2}{\sqrt{3}}\end{array}\right]\left[\begin{array}{c}    I_{a} \\    I_{b} \end{array}\right]</script><p>ï¼ˆè¿™é‡Œçš„ç³»æ•°åœ¨åæ–‡SVPWMé‡Œç›¸ç”µå‹çš„å¹…å€¼ä¸ç”µå‹ç©ºé—´çŸ¢é‡ä¹‹é—´æœ‰ä¸€ä¸ª $\frac{3}{2}$ çš„ç³»æ•°ç›¸æŠµæ¶ˆï¼‰</p><p>MATLABå®ç°ä¸ºï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330103933845.png" alt="image-20220330103933845" style="zoom: 80%;"></p><h4 id="åå‘Clarkå˜æ¢"><a href="#åå‘Clarkå˜æ¢" class="headerlink" title="åå‘Clarkå˜æ¢"></a>åå‘Clarkå˜æ¢</h4><p>Clarkåå˜æ¢åˆ™å°†ä¸¤ç›¸ä¿¡å·è½¬æ¢ä¸ºä¸‰ç›¸ä¿¡å·ã€‚æ ¹æ®å›¾å¯ä»¥å†™å‡ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}U_{a} =  U_{\alpha} \\U_{b} = -\frac{1}{2}U_{\alpha} + \frac{\sqrt3}{2}U_{\beta}\\U_{c} = -\frac{1}{2}U_{\alpha} - \frac{\sqrt3}{2}U_{\beta}\end{array}\right.</script><p>çŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{c}    U_{a} \\    U_{b} \\    U_{c}\end{array}\right]=\left[\begin{array}{ccc}    1  & 0       \\    -\frac{1}{2} & \frac{\sqrt{3}}{2} \\    -\frac{1}{2} & -\frac{\sqrt{3}}{2}\end{array}\right]\left[\begin{array}{c}    U_{\alpha} \\    U_{\beta}\end{array}\right]</script><p>MATLABå®ç°ä¸ºï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330103915885.png" alt="image-20220330103915885" style="zoom:80%;"></p><h3 id="Parkå˜æ¢"><a href="#Parkå˜æ¢" class="headerlink" title="Parkå˜æ¢"></a>Parkå˜æ¢</h3><p>Parkå˜æ¢å®ç°äº†ä¸¤ç›¸åæ ‡ç³» $(\alpha,\beta)$ ä¸è½¬å­åæ ‡ç³» $(d,q)$ é—´çš„è½¬æ¢ï¼Œæ­¤å˜æ¢å¯ä»¥å°†æ­£å¼¦å˜é‡çº¿æ€§åŒ–ã€‚å…¶ä¸­ $d$ æŒ‡å‘è½¬å­ä¸­å¿ƒï¼Œ $q$ æŒ‡å‘åˆ‡çº¿æ–¹å‘ï¼Œ $\theta$ æ˜¯è½¬å­å½“å‰çš„è§’åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ $d-q$ åæ ‡ç³»å§‹ç»ˆè·Ÿç€è½¬å­åŒæ­¥æ—‹è½¬ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/A20BC4DCAD2986A86187F746C2EDE88A.png" alt="A20BC4DCAD2986A86187F746C2EDE88A" style="zoom: 67%;"></p><h4 id="æ­£å‘Parkå˜æ¢"><a href="#æ­£å‘Parkå˜æ¢" class="headerlink" title="æ­£å‘Parkå˜æ¢"></a>æ­£å‘Parkå˜æ¢</h4><p>åˆ™æ ¹æ®ä¸Šå›¾å¯ä»¥å†™å‡º</p><script type="math/tex; mode=display">\left\{\begin{array}{l}I_{d}=I_{\alpha} \cos\theta+I_{\beta} \sin\theta \\I_{q}=-I_{\alpha} \sin\theta+I_{\beta} \cos\theta\end{array}\right.</script><p>å¾ˆæ˜æ˜¾ä¸Šè¿°å˜æ¢å¯ä»¥ç”¨æ—‹è½¬çŸ©é˜µæ¥è¡¨ç¤ºï¼Œä½¿ç”¨çŸ©é˜µå½¢å¼å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å†™å‡ºï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{l}    I_{d} \\    I_{q}\end{array}\right]=\left[\begin{array}{cc}     \cos \theta & \sin \theta \\    -\sin \theta & \cos \theta\end{array}\right]\left[\begin{array}{l}    I_{\alpha} \\    I_{\beta}\end{array}\right]</script><p>ï¼ˆå¦‚æœ $d$ è½´ä¸º0ï¼Œåˆ™åŠŸç‡å…¨éƒ¨è¾“å‡ºåœ¨ $q$ è½´ä¸Šã€‚ï¼‰</p><p>MATLABå®ç°ä¸º</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330104003922.png" alt="image-20220330104003922" style="zoom:80%;"></p><h4 id="åParkå˜æ¢"><a href="#åParkå˜æ¢" class="headerlink" title="åParkå˜æ¢"></a>åParkå˜æ¢</h4><p>æ ¹æ®ä¸Šé¢çš„æ¨å¯¼å¯ä»¥æ±‚å¾—åParkå˜æ¢</p><script type="math/tex; mode=display">\left\{\begin{array}{l}U_{\alpha}=U_{d} \cos\theta-U_{q} \sin\theta \\U_{\beta}= U_{d} \sin\theta+U_{q} \cos\theta\end{array}\right.</script><p>åŒç†ï¼Œä½¿ç”¨æ—‹è½¬çŸ©é˜µå¯ä»¥æ±‚å‡ºåå˜æ¢çš„ç³»æ•°çŸ©é˜µï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{l}    U_{\alpha} \\    U_{\beta}\end{array}\right]=\left[\begin{array}{cc}     \cos \theta & -\sin \theta \\     \sin \theta & \cos \theta\end{array}\right]\left[\begin{array}{l}    U_{d} \\    U_{q}\end{array}\right]</script><p>MATLABå®ç°ä¸º</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330103857619.png" alt="image-20220330103857619" style="zoom:80%;"></p><h3 id="MATLABä»¿çœŸ"><a href="#MATLABä»¿çœŸ" class="headerlink" title="MATLABä»¿çœŸ"></a>MATLABä»¿çœŸ</h3><p>ä¸ºäº†æ›´æ¸…æ¥šåœ°ä»¿çœŸï¼Œè¿™é‡Œä¸ç”¨çŸ©é˜µå½¢å¼è¡¨ç¤ºï¼Œå¦‚éœ€çŸ©é˜µå½¢å¼å¯ä»¥çœ‹æˆ‘å†™çš„å¦ä¸€ç¯‡æ–‡ç« ã€‚</p><p>è¯·æ³¨æ„ï¼Œæ­£å‘å˜æ¢éƒ½æ˜¯å¯¹ç”µæµè¿›è¡Œæ“ä½œçš„ï¼Œåå‘å˜æ¢éƒ½æ˜¯å¯¹ç”µå‹è¿›è¡Œæ“ä½œçš„ã€‚ä½†æ˜¯åœ¨è¿™èŠ‚çš„ä»¿çœŸä¸­ï¼ŒæŠŠæ­£å˜æ¢å’Œåå˜æ¢è¿åœ¨ä¸€èµ·ï¼Œè¿™æ ·åšæ²¡æœ‰å®é™…æ„ä¹‰ï¼Œåªæ˜¯ä¸ºäº†éªŒè¯å˜åŒ–ç®—æ³•ã€‚</p><p>è¾“å…¥Vdä¸º0ï¼ŒVqä¸º1ï¼Œè§’åº¦ä¸ºç”±0åˆ°2piçš„è¿ç»­å€¼ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330103716603.png" alt="image-20220330103716603" style="zoom: 80%;"></p><p>å†æ¥çœ‹å­æ¨¡å—å†…éƒ¨ï¼Œè¾“å…¥ç»è¿‡ä¸¤ä¸ªé€†å˜æ¢ï¼Œå†ç»è¿‡ä¸¤ä¸ªæ­£å˜æ¢ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330103816443.png" alt="image-20220330103816443" style="zoom:80%;"></p><p>è¿è¡ŒæŸ¥çœ‹æ³¢å½¢ï¼ˆæ–°ç‰ˆæœ¬MATLABå¸¸å€¼è¾“å…¥ä¸ºä¸€ä¸ªåœ†åœˆï¼‰</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330104412589.png" alt="image-20220330104412589" style="zoom:50%;"></p><h2 id="SVPWM"><a href="#SVPWM" class="headerlink" title="SVPWM"></a>SVPWM</h2><p>æ ¹æ®BLDCçš„å…­æ­¥æ¢å‘ï¼Œå¯ä»¥å°†ä¸€åœˆåˆ†ä¸ºå…­ä¸ªæ‰‡åŒºï¼Œå‰æ–‡FOCå¼•å…¥ç« èŠ‚å·²ç»è®²è¿‡ï¼Œåªéœ€è¦æ§åˆ¶æ¯ä¸ªçŠ¶æ€é€šç”µçš„æ—¶é—´å°±å¯ä»¥æ§åˆ¶è½¬å­åˆ°è¾¾ä»»æ„è§’åº¦ã€‚è¿™å°±æ˜¯SVPWMã€‚</p><p>SVPWMçš„è¾“å…¥ä¸º $U_{\alpha}$ å’Œ $U_{\beta}$ ï¼Œè¾“å‡ºä¸ºä¸‰å‘è®¡æ•°å™¨çš„æ¯”è¾ƒå€¼ã€‚æ‰€ä»¥åº”è¯¥é¦–å…ˆåˆ¤æ–­ç”¨å“ªä¸¤ä¸ªç›¸é‚»çŸ¢é‡ï¼Œç„¶åè®¡ç®—ä¸¤ä¸ªç›¸é‚»çŸ¢é‡çš„ä½œç”¨æ—¶é•¿ï¼Œç„¶åå°†ä½œç”¨æ—¶é•¿è½¬åŒ–æˆè®¡æ•°å™¨çš„æ¯”è¾ƒæ•°å€¼é€å…¥å®šæ—¶å™¨ã€‚ä¸‹é¢å¯¹è¿™ä¸‰ä¸ªæ­¥éª¤è¿›è¡Œè®²è§£ã€‚</p><h3 id="æ‰‡åŒºåˆ¤æ–­"><a href="#æ‰‡åŒºåˆ¤æ–­" class="headerlink" title="æ‰‡åŒºåˆ¤æ–­"></a>æ‰‡åŒºåˆ¤æ–­</h3><p>ä¸‰ç›¸ç”µå‹å¯ä»¥è¡¨ç¤ºä¸ºï¼ˆ $U_{m}$ ä¸ºç”µå‹å¹…å€¼ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}U_a = U_{m}cos\theta \\U_b = U_{m}cos(\theta-\frac{2}{3}\pi) \\U_c = U_{m}cos(\theta+\frac{2}{3}\pi)\end{array}</script><p>å°†å…¶è½¬æ¢ä¸º $\alpha-\beta$ åæ ‡ç³»ï¼Œå¯ä»¥ç®—å‡º</p><script type="math/tex; mode=display">\begin{array}{l}U_{\alpha} = U_{m}cos\theta \\U_{\beta} = U_{m}sin\theta\end{array}</script><p>ä»è¿™ä¸ªå¼å­å‘ç°ï¼Œå¯ä»¥ä»ä¸­ç®—å‡ºè§’åº¦ä¿¡æ¯ä»è€Œå¯ä»¥åˆ¤æ–­åœ¨å“ªä¸ªæ‰‡åŒº</p><script type="math/tex; mode=display">\theta = arctan(\frac{U_{\beta}}{U_{\alpha}})</script><p>ç”±äºé™¤æ³•å’Œåä¸‰è§’å‡½æ•°å¯¹äºMCUæ¥è¯´è®¡ç®—é‡æ¯”è¾ƒå¤§ã€‚æˆ‘ä»¬æ¥æ‰¾ä¸€ä¸ªç®€ä¾¿ç®—æ³•ã€‚</p><p> $U_{\alpha}$ æ˜¯å…³äºcosçš„ä¸‰è§’å‡½æ•°ï¼Œ $U_{\beta}$ æ˜¯å…³äºsinçš„ä¸‰è§’å‡½æ•°ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}æ‰‡åŒº1:& U_{\alpha} > 0&,& U_{\beta} > 0\\æ‰‡åŒº2:& U_{\alpha} >or< 0&,& U_{\beta} > 0\\æ‰‡åŒº3:& U_{\alpha} < 0&,& U_{\beta} > 0\\æ‰‡åŒº4:& U_{\alpha} < 0&,& U_{\beta} < 0\\æ‰‡åŒº5:& U_{\alpha} >or< 0&,& U_{\beta} < 0\\æ‰‡åŒº6:& U_{\alpha} > 0&,& U_{\beta} < 0\end{array}</script><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ $U_{\beta}$ çš„æ­£è´Ÿå¯ä»¥åˆ¤æ–­å‡ºæ˜¯1/2/3æ‰‡åŒºè¿˜æ˜¯4/5/6æ‰‡åŒºã€‚</p><p>è¿™ä¸ªæ¡ä»¶åªå°†æ‰‡åŒºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å‡ ä¸ªæ¡ä»¶æ¥æ›´ç»†è‡´åœ°åˆ†ã€‚å°†æ¯ä¸ªæ‰‡åŒºçš„åä¸‰è§’å‡½æ•°èŒƒå›´è®¡ç®—å‡ºæ¥ï¼š</p><script type="math/tex; mode=display">\begin{aligned}æ‰‡åŒº1:& tan0^{\circ} >   \frac{U_{\beta}}{U_{\alpha}} > tan60^{\circ} &\Rightarrow& 0 &>&        \frac{U_{\beta}}{U_{\alpha}} >& \sqrt{3}  \\æ‰‡åŒº2:& tan60^{\circ} >  \frac{U_{\beta}}{U_{\alpha}} > tan120^{\circ} &\Rightarrow& \sqrt{3} &>& \frac{U_{\beta}}{U_{\alpha}} >& -\sqrt{3} \\æ‰‡åŒº3:& tan120^{\circ} > \frac{U_{\beta}}{U_{\alpha}} > tan180^{\circ} &\Rightarrow&-\sqrt{3} &>& \frac{U_{\beta}}{U_{\alpha}} >& 0        \\æ‰‡åŒº4:& tan180^{\circ} > \frac{U_{\beta}}{U_{\alpha}} > tan240^{\circ} &\Rightarrow&0        &>& \frac{U_{\beta}}{U_{\alpha}} >& \sqrt{3}  \\æ‰‡åŒº5:& tan240^{\circ} > \frac{U_{\beta}}{U_{\alpha}} > tan300^{\circ} &\Rightarrow&\sqrt{3} &>& \frac{U_{\beta}}{U_{\alpha}} >& -\sqrt{3} \\æ‰‡åŒº6:& tan300^{\circ} > \frac{U_{\beta}}{U_{\alpha}} > tan360^{\circ} &\Rightarrow& -\sqrt{3} &>& \frac{U_{\beta}}{U_{\alpha}} >& 0\end{aligned}</script><p>è§‚å¯Ÿè¿™ä¸ªç»“è®ºï¼Œ $U_{\beta}$ å’Œ $\sqrt{3}U_{\alpha}$ ä¼¼ä¹æœ‰å…³ç³»ï¼Œå›é¡¾åClarkå˜æ¢ï¼Œ $U_{b}$ å’Œ $U_{c}$ çš„å¼å­å°±æ˜¯è¿™ç§å…³ç³»ã€‚æ‰€ä»¥å¯ä»¥æŠŠä¸Šé¢çš„ç»“è®ºå¾€åClarkå˜æ¢ä¸Šå‡‘ã€‚çœ‹ä¸€ä¸‹åClarkå˜æ¢çš„å›¾åƒï¼Œæ³¨æ„æˆ‘ä»¬éœ€è¦çš„å…³ç³»é‡Œçš„ $\sqrt{3}$ æ˜¯ä¹˜åœ¨ $U_{\alpha}$ ä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ $U_{\beta}$ å’Œ $U_{\alpha}$ åä¸€ä¸‹ï¼Œå¯¹åº”çš„å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}U_{a} =  U_{\beta} \\U_{b} = -\frac{1}{2}U_{\beta} + \frac{\sqrt3}{2}U_{\alpha}\\U_{c} = -\frac{1}{2}U_{\beta} - \frac{\sqrt3}{2}U_{\alpha}\end{array}\right.</script><p>ç”Ÿæˆä¸Šè¿°å…¬å¼çš„å›¾åƒï¼Œå…¶ä¸­é»„è‰²çš„çº¿ä¸º $U_{a}$ ä¸º $U_{\beta}$ ï¼Œè“è‰²çš„çº¿ $U_{b}$ ä¸º $\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}$ ï¼Œçº¢è‰²çš„çº¿ $U_{c}$ ä¸º $-\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}$ ï¼Œ</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330145027064.png" alt="image-20220330145027064" style="zoom:50%;"></p><p>å¯ä»¥çœ‹åˆ°åœ¨æ¯ä¸ªæ‰‡åŒºå†…æ€»æœ‰ä¸€å‘å¤§äº0ï¼Œä¸¤å‘å°äº0ï¼Œæ‰€ä»¥ $U_{b}$ å’Œ $U_{c}$ çš„æ­£è´Ÿå¯ä»¥å½“åšåˆ¤æ–­æ¡ä»¶ä¹‹ä¸€ã€‚æˆ‘ä»¬é¡ºä¾¿è¿˜åˆä¸€æ¬¡å¾—åˆ°äº† $U_{\beta}$ è¿™ä¸ªåˆ¤æ–­æ¡ä»¶ã€‚æ•´ç†ä¸€ä¸‹ä¸Šé¢çš„å¼å­</p><script type="math/tex; mode=display">\begin{aligned}æ‰‡åŒº1:U_{\beta} > 0 , \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} >0 , -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} < 0\\æ‰‡åŒº2:U_{\beta} > 0 , \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} <0 , -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} < 0\\æ‰‡åŒº3:U_{\beta} > 0 , \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} <0 , -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} > 0\\æ‰‡åŒº4:U_{\beta} < 0 , \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} <0 , -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} > 0\\æ‰‡åŒº5:U_{\beta} < 0 , \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} >0 , -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} > 0\\æ‰‡åŒº6:U_{\beta} < 0 , \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} >0 , -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta} < 0\end{aligned}</script><p>æ‰€ä»¥é€šè¿‡è®¡ç®— $\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}$ å’Œ $-\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}$ çš„æ­£è´Ÿå¯ä»¥åˆ¤æ–­å‡ºæ˜¯1/6æ‰‡åŒºï¼Œ3/4æ‰‡åŒºï¼Œ2æ‰‡åŒºï¼Œ5æ‰‡åŒºçš„å“ªä¸€ç»„ã€‚</p><p>ç»¼ä¸Šï¼Œæˆ‘ä»¬çš„åˆ¤æ–­æ¡ä»¶æœ‰ï¼š $U_{\beta}$ ã€ $\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}$ å’Œ $-\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}$ ã€‚æˆ‘ä»¬åˆ†åˆ«å®šä¹‰ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}U_a = U_{\beta} \\U_b = \frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}\\U_c = -\frac{\sqrt3}{2}U_{\alpha} - \frac{1}{2}U_{\beta}\end{array}</script><p>ç»¼åˆè¿™ä¸‰ä¸ªæ¡ä»¶å°±å¯ä»¥åˆ¤æ–­æ˜¯åœ¨å“ªä¸ªæ‰‡åŒº ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç®—æ³•å¯ä»¥å°†è¿™ä¸€å †åˆ¤æ–­æ•°å€¼åŒ–å¹¶è½¬æ¢æˆ1~6çš„æ•°å­—å‘¢ï¼Ÿå¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼ï¼š</p><script type="math/tex; mode=display">N=A+2B+4C</script><p>å¼ä¸­Aä»£è¡¨ $U_a$ çš„æ­£è´Ÿï¼ŒBä»£è¡¨ $U_b$ çš„æ­£è´Ÿï¼ŒCä»£è¡¨ $U_c$ çš„æ­£è´Ÿï¼Œå¤§äº0ä¸º1ï¼Œå°äº0ä¸º0ã€‚æœ€åè½¬æ¢å‡ºæ¥çš„çš„Nå³ä¸º1~6çš„æ•°å­—ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}æ‰‡åŒº & 1 & 2 & 3 & 4 & 5 & 6 & \\N   & 3 & 1 & 5 & 4 & 6 & 2 &\end{array}</script><p>è‡³æ­¤ï¼Œæˆ‘ä»¬æˆåŠŸå®Œæˆäº†æ‰‡åŒºåˆ¤æ–­ã€‚</p><h3 id="è®¡ç®—ç›¸é‚»çŸ¢é‡ä½œç”¨æ—¶é•¿"><a href="#è®¡ç®—ç›¸é‚»çŸ¢é‡ä½œç”¨æ—¶é•¿" class="headerlink" title="è®¡ç®—ç›¸é‚»çŸ¢é‡ä½œç”¨æ—¶é•¿"></a>è®¡ç®—ç›¸é‚»çŸ¢é‡ä½œç”¨æ—¶é•¿</h3><p>æ§åˆ¶ç›¸é‚»çŸ¢é‡ä½œç”¨æ—¶é•¿å°±å¯ä»¥æ§åˆ¶è½¬å­åˆ°è¾¾ä»»æ„æ–¹å‘ï¼Œä¸‹é¢è¿›è¡Œåˆ†æã€‚</p><h4 id="å…­ä¸ªçŸ¢é‡çš„å¤§å°"><a href="#å…­ä¸ªçŸ¢é‡çš„å¤§å°" class="headerlink" title="å…­ä¸ªçŸ¢é‡çš„å¤§å°"></a>å…­ä¸ªçŸ¢é‡çš„å¤§å°</h4><p>å…­ä¸ªMOSç®¡å¯ä»¥äº§ç”Ÿ8ç§çŠ¶æ€</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330152650462.png" alt="image-20220330152650462" style="zoom:50%;"></p><p>è®¾ä¸Šå¼€ä¸‹åˆä¸º0ï¼ˆç”µæµä»Oå¾€å¯¹åº”çš„å‘æµï¼‰ï¼Œä¸Šåˆä¸‹å¼€ä¸º1ï¼ˆç”µæµä»å¯¹åº”çš„å‘å¾€Oæµï¼‰ï¼Œè¡¨ç¤ºå…¶ä¸­çš„å…­ä¸ªçŸ¢é‡ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330152634407.png" alt="image-20220330152634407" style="zoom:50%;"></p><p>æ”¾åœ¨ä¸€å¼ å›¾ä¸­å³ä¸ºï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330152741018.png" alt="image-20220330152741018" style="zoom:50%;"></p><p>è¿˜æœ‰ä¸¤ä¸ªé›¶çŸ¢é‡ï¼ˆ000å’Œ111ï¼‰ï¼Œæ— ç”µæµï¼Œä¸äº§ç”Ÿç£åœºã€‚</p><p>å¯¹äº100çš„çŠ¶æ€ï¼Œå¯ä»¥ç­‰æ•ˆä¸ºä¸‹é¢çš„ç”µè·¯å›¾ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220330154344462.png" alt="image-20220330154344462" style="zoom: 25%;"></p><p>å¯ä»¥è®¡ç®—å‡ºç”µæœºä¸­ä¸‰ä¸ªç›¸ç”µå‹ï¼ˆæ¯ç›¸ç›¸å¯¹äºç”µæœºä¸­é—´è¿æ¥ç‚¹çš„ç”µå‹ï¼‰</p><script type="math/tex; mode=display">\begin{aligned}U_{AN} &=U_{A}-U_{N}=\frac{2}{3} U_{d c} \\U_{BN} &=U_{B}-U_{N}=-\frac{1}{3} U_{d c} \\U_{CN} &=U_{C}-U_{N}=-\frac{1}{3} U_{d c}\end{aligned}</script><p>åŒç†å¯ä»¥è®¡ç®—å…¶ä»–æ‰€æœ‰æ–¹å‘çŸ¢é‡çš„ç›¸ç”µå‹ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå…­ä¸ªçŸ¢é‡çš„å¤§å°å‡ä¸º $\frac{2}{3} U_{d c}$ ï¼Œå³<strong>SVPWMç›¸ç”µå‹å¹…å€¼ä¸º $\frac{2}{3} U_{d c}$</strong> </p><h4 id="ç”µå‹åˆ©ç”¨ç‡"><a href="#ç”µå‹åˆ©ç”¨ç‡" class="headerlink" title="ç”µå‹åˆ©ç”¨ç‡"></a>ç”µå‹åˆ©ç”¨ç‡</h4><p>ç”µå‹åˆ©ç”¨ç‡ç­‰äºåˆæˆçŸ¢é‡çš„ç”µå‹é™¤ä»¥æ¯çº¿ç”µå‹ã€‚ä¸‹é¢åœ¨å¤å¹³é¢è®¡ç®—åˆæˆçŸ¢é‡çš„ç”µå‹ $U_{out}$ ï¼š</p><script type="math/tex; mode=display">U_{out} = U_a +U_{b}\cdot e^{j\cdot \frac{2}{3}\pi}+U_{c}\cdot e^{j\cdot (-\frac{2}{3}\pi)}</script><p>æ ¹æ®æ¬§æ‹‰å…¬å¼å¯ä»¥æ¨å¯¼å‡ºï¼š</p><script type="math/tex; mode=display">e^{jx}=cosx+jsinx</script><p>åˆå› ä¸ºä¸‰ç›¸ç”µå‹ä¸ç›¸ç”µå‹å¹…å€¼ä¹‹é—´çš„å…³ç³»ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}U_a = U_{m}cos\theta \\U_b = U_{m}cos(\theta-\frac{2}{3}\pi) \\U_c = U_{m}cos(\theta+\frac{2}{3}\pi)\end{array}</script><p>å¸¦å…¥å¯ä»¥è®¡ç®—å‡º $U_{out}$ ï¼š</p><script type="math/tex; mode=display">U_{out}=\frac{3}{2}U_m\cdot e^{j\theta}</script><p>åˆæˆçŸ¢é‡çš„ç”µå‹æ˜¯ç›¸ç”µå‹å¹…å€¼çš„ $\frac{3}{2}$ å€ï¼Œè€ŒSVPWMç›¸ç”µå‹å¹…å€¼ $U_m$ ä¸º $\frac{2}{3} U_{d c}$ ï¼Œæ‰€ä»¥</p><script type="math/tex; mode=display">U_{out}=U_{dc}</script><p>å³<strong>åˆæˆçŸ¢é‡çš„ç”µå‹ç­‰äºæ¯çº¿ç”µå‹</strong>ã€‚æ‰€ä»¥<strong>SVPWMçš„ç”µå‹åˆ©ç”¨ç‡æ˜¯100%</strong>ã€‚</p><h4 id="SVPWMè¾“å‡ºç”µå‹æ˜¯é©¬éæ³¢"><a href="#SVPWMè¾“å‡ºç”µå‹æ˜¯é©¬éæ³¢" class="headerlink" title="SVPWMè¾“å‡ºç”µå‹æ˜¯é©¬éæ³¢"></a>SVPWMè¾“å‡ºç”µå‹æ˜¯é©¬éæ³¢</h4><p>ç”±äºä¸­é—´è¿æ¥ç‚¹Nçš„ç‚¹ä½ æ˜¯æµ®åŠ¨çš„ï¼Œä¸ºä¸‰è§’æ³¢ï¼Œè€Œç›¸ç”µå‹æ˜¯æ¯ç›¸ç›¸å¯¹äºç”µæœºä¸­é—´è¿æ¥ç‚¹Nçš„ç”µå‹ï¼Œæ‰€ä»¥ç›¸ç”µå‹ä¸æ˜¯ä¸€ä¸ªæ­£å¼¦æ³¢ï¼Œè€Œæ˜¯ä¸€ä¸ªæ­£å¼¦æ³¢ä¸ä¸€ä¸ªä¸‰è§’æ³¢å åŠ è€Œæˆçš„ï¼Œå³ä¸ºé©¬éæ³¢ã€‚ç½‘å›¾ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/d94c427b1d664ffe9b585d58e60482f6.jpg" alt="d94c427b1d664ffe9b585d58e60482f6" style="zoom:50%;"></p><h4 id="çŸ¢é‡ä½œç”¨æ—¶é•¿"><a href="#çŸ¢é‡ä½œç”¨æ—¶é•¿" class="headerlink" title="çŸ¢é‡ä½œç”¨æ—¶é•¿"></a>çŸ¢é‡ä½œç”¨æ—¶é•¿</h4><p>åˆæˆçŸ¢é‡çš„ç”µå‹æ˜¯æ‰€åœ¨æ‰‡åŒºä¸¤ä¸ªçŸ¢é‡ä¸ç©ºçŸ¢é‡ä¸åŒæ—¶é•¿çš„ç»„åˆï¼Œå…¶ä¸­ $T_N$ ä¸ºç©ºçŸ¢é‡ä½œç”¨æ—¶é•¿ï¼š</p><script type="math/tex; mode=display">U_{out}=U_x\frac{T_x}{T_s}+U_y\frac{T_y}{T_s}+U_N\frac{T_N}{T_s}</script><p>ç”±äºSVPWMçš„è¾“å…¥æ˜¯ $U_{\alpha}$ å’Œ $U_{\beta}$ ï¼Œä½†æ˜¯è¦æ§åˆ¶ $T_x$ å’Œ $T_y$ ï¼Œæ‰€ä»¥è¦æ‰¾åˆ°ä»–ä»¬çš„å¯¹åº”å…³ç³»ã€‚</p><p>å¯¹äºç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œå°† $U_{out}$ åœ¨ $\alpha-\beta$ åæ ‡ç³»ä¸­è¡¨ç¤ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}U_\alpha=|U_x|\frac{T_x}{T_s}+|U_y|\frac{T_y}{T_s}cos60^{\circ}\\U_\beta=|U_y|\frac{T_y}{T_s}sin60^{\circ}\end{array}</script><p>å…¶ä¸­ $|U_x|$ å’Œ $|U_y|$ æ ¹æ®å‰é¢çš„è®¡ç®—å‡ä¸º $\frac{2}{3} U_{d c}$ ï¼Œå¯ä»¥è§£å‡ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}T_x=\frac{\sqrt{3}T_S}{U_{dc}}(\frac{\sqrt{3}}{2}U_\alpha-\frac{1}{2}U_\beta)\\T_y=\frac{\sqrt{3}T_S}{U_{dc}}U_\beta\end{array}</script><p>åŒç†ï¼Œå¯ä»¥è®¡ç®—å‡ºæ‰€æœ‰å…­ä¸ªæ‰‡åŒºï¼š</p><p>ç¬¬äºŒæ‰‡åŒº</p><script type="math/tex; mode=display">\begin{array}{l}T_x=\frac{\sqrt{3}T_S}{U_{dc}}(-\frac{\sqrt{3}}{2}U_\alpha+\frac{1}{2}U_\beta)\\T_y=\frac{\sqrt{3}T_S}{U_{dc}}(\frac{\sqrt{3}}{2}U_\alpha+\frac{1}{2}U_\beta)\end{array}</script><p>ç¬¬ä¸‰æ‰‡åŒº</p><script type="math/tex; mode=display">\begin{array}{l}T_x=\frac{\sqrt{3}T_S}{U_{dc}}U_\beta\\T_y=\frac{\sqrt{3}T_S}{U_{dc}}(-\frac{\sqrt{3}}{2}U_\alpha-\frac{1}{2}U_\beta)\end{array}</script><p>ç¬¬å››æ‰‡åŒº</p><script type="math/tex; mode=display">\begin{array}{l}T_x=\frac{\sqrt{3}T_S}{U_{dc}}(-U_\beta)\\T_y=\frac{\sqrt{3}T_S}{U_{dc}}(-\frac{\sqrt{3}}{2}U_\alpha+\frac{1}{2}U_\beta)\end{array}</script><p>ç¬¬äº”æ‰‡åŒº</p><script type="math/tex; mode=display">\begin{array}{l}T_x=\frac{\sqrt{3}T_S}{U_{dc}}(-\frac{\sqrt{3}}{2}U_\alpha-\frac{1}{2}U_\beta)\\T_y=\frac{\sqrt{3}T_S}{U_{dc}}(\frac{\sqrt{3}}{2}U_\alpha-\frac{1}{2}U_\beta)\end{array}</script><p>ç¬¬å…­æ‰‡åŒº </p><script type="math/tex; mode=display">\begin{array}{l}T_x=\frac{\sqrt{3}T_S}{U_{dc}}(\frac{\sqrt{3}}{2}U_\alpha+\frac{1}{2}U_\beta)\\T_y=\frac{\sqrt{3}T_S}{U_{dc}}(-U_\beta)\end{array}</script><p>å…­ä¸ªæ‰‡åŒºä¸­éƒ½æœ‰ç›¸åŒçš„é¡¹ï¼Œå…¶ä¸­åŒ…å«å‰æ–‡åˆ¤æ–­æ‰‡åŒºæ‰€ç”¨çš„ $U_1$ ã€ $U_2$ ã€ $U_3$ ã€‚ç›´æ¥æŠŠå‰é¢å·²ç»è®¡ç®—è¿‡çš„å˜é‡æ‹¿è¿‡æ¥ä½¿ç”¨ï¼Œå¤§å¤§å‡å°‘äº†è®¡ç®—é‡ã€‚å¼ä¸­çš„ $\frac{\sqrt{3}T_S}{U_{dc}}$ ä¸ºè°ƒåˆ¶æ¯”ï¼Œå®šä¹‰ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}U_{mr} = \frac{\sqrt{3}T_S}{U_{dc}} \\X= \frac{\sqrt{3}T_S}{U_{dc}}U_\beta=U_{mr}U_1\\Y= \frac{\sqrt{3}T_S}{U_{dc}}(\frac{\sqrt{3}}{2}U_\alpha-\frac{1}{2}U_\beta)=U_{mr}U_2\\Z= \frac{\sqrt{3}T_S}{U_{dc}}(-\frac{\sqrt{3}}{2}U_\alpha-\frac{1}{2}U_\beta)=U_{mr}U_3\end{array}</script><p>å¯ä»¥å°†å…­ä¸ªæ‰‡åŒºè¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{c}& T_x & T_y  \\æ‰‡åŒº1&  Y  &  X  \\æ‰‡åŒº2& -Y  & -Z  \\æ‰‡åŒº3&  X  &  Z  \\æ‰‡åŒº4& -X  & -Y  \\æ‰‡åŒº5&  Z  &  Y  \\æ‰‡åŒº6& -Z  & -X  \\\end{array}</script><p>æ³¨æ„ï¼šå½“éé›¶çŸ¢é‡ä½œç”¨æ—¶é—´ $Tx+Ty&gt;Ts$ ï¼Œéœ€è¦è¿›è¡Œè¿‡é¥±å’Œå¤„ç†ï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}T_{x}=\frac{T_{x}}{T_{x}+T_{y}} T_{s} \\T_{y}=\frac{T_{y}}{T_{x}+T_{y}} T_{s}\end{array}\right.</script><h3 id="å®šæ—¶å™¨æ¯”è¾ƒå€¼è®¡ç®—"><a href="#å®šæ—¶å™¨æ¯”è¾ƒå€¼è®¡ç®—" class="headerlink" title="å®šæ—¶å™¨æ¯”è¾ƒå€¼è®¡ç®—"></a>å®šæ—¶å™¨æ¯”è¾ƒå€¼è®¡ç®—</h3><p>æˆ‘ä»¬å‰æ–‡ç®—å‡ºæ¥çš„ $T_x$ å’Œ $T_y$ ä»¥ç§’ä¸ºå•ä½ï¼Œåœ¨å•ç‰‡æœºä¸­ä½¿ç”¨å®šæ—¶å™¨æ§åˆ¶MOSç®¡çš„é€šæ–­éœ€è¦é…ç½®æ¯”è¾ƒå€¼ï¼Œæ‰€ä»¥éœ€è¦æŠŠ $T_x$ å’Œ $T_y$ è½¬æ¢ä¸ºä¸‰ä¸ªäº’è¡¥çš„å®šæ—¶å™¨æ¯”è¾ƒå€¼ $T_1$ ã€ $T_2$ å’Œ $T_3$ ã€‚</p><p>å®šæ—¶å™¨åº”è®¾ç½®ä¸ºä¸­å¿ƒå¯¹é½æ¨¡å¼ï¼Œè‹¥ä¸ºå‘ä¸Šè®¡æ•°ï¼Œè®¡æ•°å™¨ä¼šä»0å¼€å§‹è®¡æ•°åˆ°æœ€å¤§å€¼ï¼Œå†åå‘ä»æœ€å¤§å€¼è®¡æ•°åˆ°0ï¼›å‘ä¸‹è®¡æ•°åä¹‹ã€‚æ•…åªéœ€è¦æ§åˆ¶å‰åŠä¸ªå‘¨æœŸçš„æ¯”è¾ƒå€¼å°±å¯ä»¥äº§ç”Ÿç›¸å¯¹ä¸­å¿ƒå¯¹ç§°çš„PWMæ³¢ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/CB0D861C81399F86BFB03E925F9AF8AC.png" alt="CB0D861C81399F86BFB03E925F9AF8AC" style="zoom:50%;"></p><p>ä¸ºäº†å‡å°‘MOSç®¡çš„å¼€å…³æŸè€—ï¼Œæé«˜å…¶ä½¿ç”¨å¯¿å‘½ï¼Œåº”å°½é‡å‡å°‘MOSç®¡çš„å¼€å…³æ¬¡æ•°ã€‚åœ¨ä¸€ä¸ªæ‰‡åŒºå†…åˆ‡æ¢çŠ¶æ€çš„æ—¶å€™ï¼Œåˆç†ä½¿ç”¨é›¶çŸ¢é‡å¯ä»¥ä¿è¯æ¯æ¬¡åˆ‡æ¢åªæ”¹å˜ä¸€ä¸ªMOSç®¡ã€‚</p><p>å…ˆæ¥çœ‹ç¬¬ä¸€æ‰‡åŒºï¼Œä»¥æ¯æ¬¡åªæ”¹å˜ä¸€ä¸ªMOSç®¡ä¸ºåŸåˆ™ï¼Œåˆ™åˆ‡æ¢é¡ºåºä¸ºï¼š</p><script type="math/tex; mode=display">000 \to 100 \to 110 \to 111 \to 110 \to 100 \to 000</script><p>å¯ä»¥çœ‹åˆ°ï¼Œåˆ‡æ¢é¡ºåºæ„æˆäº†ä¸€ä¸ªç¯è·¯ã€‚åœ¨ä¸€ä¸ªå‘¨æœŸå†…æˆ‘ä»¬éœ€è¦æ§åˆ¶ä¸‰æ®µä½œç”¨æ—¶é•¿ï¼š</p><script type="math/tex; mode=display">T_s=T_x+T_y+T_N</script><p>å…­ä¸ªMOSéœ€è¦äº§ç”Ÿå…­è·¯PWMæ¥æ§åˆ¶ä»–ä»¬çš„çŠ¶æ€ã€‚ç”±äºä¸Šä¸‹åŠæ¡¥æ˜¯äº’è¡¥çš„ï¼Œæ‰€ä»¥åªéœ€è¦ç”Ÿæˆä¸‰ä¸ªPWMï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220331151522966.png" alt="image-20220331151522966" style="zoom:50%;"></p><p>ç”±äºæ˜¯ä¸­å¿ƒå¯¹é½æ¨¡å¼ï¼Œæ‰€ä»¥åªéœ€è¦æ§åˆ¶åŠä¸ªå‘¨æœŸçš„æ—¶é•¿ $\frac{T_x}{2}$ å’Œ $\frac{T_y}{2}$ ã€‚åœ¨åŠä¸ªå‘¨æœŸå†… $T_N$ å‡ºç°äº†ä¸¤æ¬¡ï¼Œåˆ†åˆ«ä¸º000å’Œ111ï¼Œåœ¨åŠä¸ªå‘¨æœŸå†…å°†è¿™ä¸¤æ®µæ—¶é—´å¹³å‡åˆ†é…ã€‚å³ä¸º $\frac{T_S-T_x-T_y}{4}$ ã€‚</p><p>è¿™æ ·å°±å¯ä»¥è®¡ç®—ä¸‰ä¸ªå®šæ—¶å™¨çš„æ¯”è¾ƒå€¼ $T_1$ ã€ $T_2$ å’Œ $T_3$ ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}T_1= \frac{T_S-T_x-T_y}{4}\\T_2=T_1+\frac{T_x}{2}\\T_3=T_2+\frac{T_y}{2}\end{array}</script><p>åŒç†ï¼Œå¯ä»¥è®¡ç®—å‡ºå…¨éƒ¨å…­ä¸ªæ‰‡åŒºçš„åˆ‡æ¢é¡ºåºï¼Œè¿™é‡Œè®¡ç®—è¿‡ç¨‹ä¸å†èµ˜è¿°ã€‚ç”±å›¾åƒå’Œè®¡ç®—ç»“æœå¯ä»¥åˆ†æå‡ºï¼Œæ— è®ºåœ¨å“ªä¸ªæ‰‡åŒºä¸­ï¼Œä¸‰ä¸ªå®šæ—¶å™¨åˆ‡æ¢çš„å›¾åƒéƒ½æ˜¯ç”±ä¸Šå›¾ä¸­ä¸‰ä¸ªæ–¹æ³¢æ„æˆï¼Œä¸‰ä¸ªå›¾åƒæ’åˆ—ç»„åˆä¹Ÿæ­£å¥½å°±æ˜¯å…­ä¸ªæ‰‡åŒºçš„ç»„åˆæ–¹å¼ã€‚æ•…ä¸ºäº†æ–¹ä¾¿ç¨‹åºè¿è¡Œï¼Œå°†å…­ä¸ªæ‰‡åŒºçš„å®šæ—¶å™¨æ¯”è¾ƒå€¼å½’çº³å¦‚ä¸‹ï¼š</p><p>è®¾</p><script type="math/tex; mode=display">\begin{array}{l}T_a= \frac{T_S-T_x-T_y}{4}\\T_b=T_a+\frac{T_x}{2}\\T_c=T_b+\frac{T_y}{2}\end{array}</script><p>æ­¤æ—¶å…­ä¸ªæ‰‡åŒºå¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{c}  & æ‰‡åŒº1 & æ‰‡åŒº2 & æ‰‡åŒº3 & æ‰‡åŒº4 & æ‰‡åŒº5 & æ‰‡åŒº6 & \\T1& T_a & T_b & T_c & T_c & T_b & T_a &\\T2& T_b & T_a & T_a & T_b & T_c & T_c &\\T3& T_c & T_c & T_b & T_a & T_a & T_b &\end{array}</script><p>ä¹Ÿå°±æ˜¯è¯´ç¼–ç¨‹æ—¶åªéœ€è¦è®¡ç®— $T_a$ ã€ $T_b$ å’Œ $T_c$ ï¼Œé€šè¿‡åˆ¤æ–­å°±å¯ä»¥å¾—åˆ°å¯¹åº”æ‰‡åŒºçš„æ¯”è¾ƒå€¼ã€‚</p><p>è‡³æ­¤ï¼ŒSVPWMè¾“å‡ºæ¯”è¾ƒå€¼ $T_1$ ã€ $T_2$ ã€ $T_3$ ï¼Œäº’è¡¥å¾—åˆ°å…­ä¸ªæ¯”è¾ƒå€¼ï¼Œè¾“å…¥åˆ°å®šæ—¶å™¨ï¼Œè¾“å‡ºä¸‰è·¯PWMã€‚</p><h4 id="MATLABä»¿çœŸ-1"><a href="#MATLABä»¿çœŸ-1" class="headerlink" title="MATLABä»¿çœŸ"></a>MATLABä»¿çœŸ</h4><p>å‡è®¾éœ€è¦äº§ç”Ÿ10Khzçš„PWMæ³¢ï¼Œåˆ™ä¸€ä¸ªå‘¨æœŸä¸º0.0001ç§’ã€‚è‹¥å•ç‰‡æœºä¸»é¢‘ä¸º180Mhzï¼Œé¢„åˆ†é¢‘ç³»æ•°ä¸º100-1ï¼Œç”±ä¸‹é¢è®¡ç®—å…¬å¼ï¼šï¼ˆå…¶ä¸­ $ARR$ æ˜¯è®¡æ•°å€¼ï¼Œ $PSC$ æ˜¯é¢„åˆ†é¢‘å€¼ï¼‰</p><script type="math/tex; mode=display">Fpwm(Hz) = \frac{ä¸»é¢‘(M)}{(ARR+1)*(PSC+1)}</script><p>180,000,000/(18,000*100)=10,000Hzï¼Œåˆ™å®šæ—¶å™¨çš„è®¡æ•°å€¼åº”è®¾ç½®ä¸º18000-1ã€‚</p><p>åœ¨æ¨¡å‹ä¸­è®¾å®š $Udc$ ä¸º24ï¼Œ $Tpwm$ ä¸º18000ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220331163919487.png" alt="image-20220331163919487" style="zoom:50%;"></p><p>åœ¨focå­æ¨¡å—ä¸­ï¼Œå°†parkåå˜æ¢çš„è¾“å‡ºè¾“å…¥åˆ°SVPWMæ¨¡å—ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220331163836635.png" alt="image-20220331163836635" style="zoom: 67%;"></p><p>SVPWMæ¨¡å—ä»£ç ä¸ºï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[T1,T2,T3,sector]</span> = <span class="title">fcn</span><span class="params">(Ualpha,Ubeta,Udc,Tpwm)</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">% åˆå§‹åŒ–</span></span><br><span class="line">sector = single(<span class="number">0</span>);</span><br><span class="line">T1 = single(<span class="number">0</span>);</span><br><span class="line">T2 = single(<span class="number">0</span>);</span><br><span class="line">T3 = single(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ç¬¬ä¸€æ­¥ï¼šæ‰‡åŒºåˆ¤æ–­</span></span><br><span class="line"><span class="comment">% è®¡ç®—ä¸‰ä¸ªä¸´æ—¶å˜é‡</span></span><br><span class="line">Ua = Ubeta;</span><br><span class="line">Ub = (<span class="built_in">sqrt</span>(<span class="number">3</span>)*Ualpha - Ubeta)/<span class="number">2</span>;</span><br><span class="line">Uc = (-<span class="built_in">sqrt</span>(<span class="number">3</span>)*Ualpha - Ubeta)/<span class="number">2</span>;</span><br><span class="line"><span class="comment">% è®¡ç®—åˆ¤æ–­æ‰‡åŒºæ‰€ç”¨çš„ABCçš„å€¼</span></span><br><span class="line">A=single(<span class="number">0</span>);B=single(<span class="number">0</span>);C=single(<span class="number">0</span>);N=single(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(Ua&gt;<span class="number">0</span>)</span><br><span class="line">    A = single(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">elseif</span>(Ua&lt;<span class="number">0</span>)</span><br><span class="line">    A = single(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span>(Ub&gt;<span class="number">0</span>)</span><br><span class="line">    B = single(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">elseif</span>(Ub&lt;<span class="number">0</span>)</span><br><span class="line">    B = single(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">if</span>(Uc&gt;<span class="number">0</span>)</span><br><span class="line">    C = single(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">elseif</span>(Uc&lt;<span class="number">0</span>)</span><br><span class="line">    C = single(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% è®¡ç®—åˆ¤æ–­æ‰‡åŒºæ‰€ç”¨çš„Nçš„å€¼</span></span><br><span class="line">N = A + <span class="number">2</span>*B + <span class="number">4</span>*C;</span><br><span class="line"><span class="comment">% æ‰‡åŒºåˆ¤æ–­</span></span><br><span class="line"><span class="keyword">switch</span> (N)   </span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">        sector = single(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span></span><br><span class="line">        sector = single(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span></span><br><span class="line">        sector = single(<span class="number">3</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span></span><br><span class="line">        sector = single(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span></span><br><span class="line">        sector = single(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span></span><br><span class="line">        sector = single(<span class="number">6</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ç¬¬äºŒæ­¥ï¼šè®¡ç®—ç›¸é‚»çŸ¢é‡ä½œç”¨æ—¶é•¿</span></span><br><span class="line"><span class="comment">% è®¡ç®—è°ƒåˆ¶æ¯”</span></span><br><span class="line">Umr = <span class="built_in">sqrt</span>(<span class="number">3</span>)*Tpwm/Udc;</span><br><span class="line"><span class="comment">% è®¡ç®—ä¸‰ä¸ªä¸´æ—¶å˜é‡</span></span><br><span class="line">X = Umr * Ua;</span><br><span class="line">Y = Umr * Ub;</span><br><span class="line">Z = Umr * Uc;</span><br><span class="line"><span class="comment">% åˆ†æ‰‡åŒºè®¡ç®—Txå’ŒTyçš„å€¼</span></span><br><span class="line">Tx=single(<span class="number">0</span>);Ty=single(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">switch</span> (sector)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span></span><br><span class="line">        Tx = Y; Ty = X;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span></span><br><span class="line">        Tx = -Y; Ty = -Z;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">        Tx = X; Ty = Z;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span></span><br><span class="line">        Tx = -X; Ty = -Y;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span></span><br><span class="line">        Tx = Z; Ty = Y;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span></span><br><span class="line">        Tx = -Z; Ty = -X;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% ç¬¬ä¸‰æ­¥ï¼šå®šæ—¶å™¨æ¯”è¾ƒå€¼è®¡ç®—</span></span><br><span class="line"><span class="comment">% å¹²å•¥ç”¨çš„ï¼Ÿ</span></span><br><span class="line"><span class="keyword">if</span> Tx+Ty &gt; Tpwm</span><br><span class="line">    Tx = Tx/(Tx+Ty);</span><br><span class="line">    Ty = Ty/(Tx+Ty);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    Tx = Tx;</span><br><span class="line">    Ty = Ty;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% è®¡ç®—ä¸‰ä¸ªä¸´æ—¶å˜é‡</span></span><br><span class="line">Ta = (Tpwm-Tx-Ty)/<span class="number">4.0</span>;</span><br><span class="line">Tb = Ta+Tx/<span class="number">2.0</span>;</span><br><span class="line">Tc = Tb+Ty/<span class="number">2.0</span>;</span><br><span class="line"><span class="comment">% åˆ†æ‰‡åŒºè®¡ç®—å®šæ—¶å™¨æ¯”è¾ƒå€¼T1ã€T2å’ŒT3çš„å€¼</span></span><br><span class="line"><span class="keyword">switch</span> (sector)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span></span><br><span class="line">        T1 = Ta; T2 = Tb; T3 = Tc;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span></span><br><span class="line">        T1 = Tb; T2 = Ta; T3 = Tc;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span></span><br><span class="line">        T1 = Tc; T2 = Ta; T3 = Tb;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span></span><br><span class="line">        T1 = Tc; T2 = Tb; T3 = Ta;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span></span><br><span class="line">        T1 = Tb; T2 = Tc; T3 = Ta;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">6</span></span><br><span class="line">        T1 = Ta; T2 = Tc; T3 = Tb;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®šæ—¶å™¨æ¯”è¾ƒå€¼ä¸ºé©¬éæ³¢</p><p><img src="/posts/Users\fanziqi\AppData\Roaming\Typora\typora-user-images\image-20220331165323898.png" alt="image-20220331165323898" style="zoom: 50%;"></p><p>æ‰‡åŒºä¸ºä»1åˆ°6çš„å¾ªç¯</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220331165348883.png" alt="image-20220331165348883" style="zoom:50%;"></p><h2 id="ç”µæµé—­ç¯"><a href="#ç”µæµé—­ç¯" class="headerlink" title="ç”µæµé—­ç¯"></a>ç”µæµé—­ç¯</h2><p>ç»è¿‡å‰æ–‡çš„åParkå˜æ¢ã€SVPWMã€å®šæ—¶å™¨ä¸å…¨æ¡¥ï¼Œè¾“å…¥çš„ $U_{d}$ å’Œ $U_{q}$ æœ€ç»ˆè½¬æ¢ä¸ºä¸‰ç›¸ç”µå‹è¾“å‡ºåˆ°ç”µæœºã€‚å¦‚æœéœ€è¦è®©ç”µæœºä»¥è®¾å®šçš„ç”µæµå€¼è¿è¡Œï¼Œå°±éœ€è¦ä½¿ç”¨PIæ§åˆ¶å™¨é—­ç¯æ§åˆ¶ç”µæµã€‚ä½†ä¸‰ç›¸äº¤æµç”µæµæ˜¯ä¸å¤ªå®¹æ˜“å®ç°é—­ç¯æ§åˆ¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©å¯¹ç›´æµç”µæµ $I_{d}$ å’Œ $I_{q}$ è¿›è¡Œé—­ç¯æ§åˆ¶ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220418111545651.png" alt="image-20220418111545651" style="zoom: 67%;"></p><p>PIæ§åˆ¶å™¨è¾“å…¥ç›®æ ‡å‚è€ƒç”µæµ $I_{d_{ref}}$ å’Œ $I_{q_{ref}}$ ï¼Œè¾“å‡º $U_{d}$ å’Œ $U_{q}$ ï¼Œç°åœ¨è¿˜ç¼ºå°‘åé¦ˆé‡ $I_{d}$ å’Œ $I_{q}$ ï¼Œè¿™å°±éœ€è¦ç”¨åˆ°å‰æ–‡è®²åˆ°çš„Parkä¸Clarkæ­£å˜æ¢ã€‚å®‰è£…é‡‡æ ·ç”µé˜»ï¼Œç”¨å•ç‰‡æœºçš„ADCé‡‡é›†å…¨æ¡¥ä¸Šä»»æ„ä¸¤ç›¸çš„ç”µæµï¼Œé€šè¿‡åŸºå°”éœå¤«ç”µæµå®šå¾‹å¯è®¡ç®—ç¬¬ä¸‰ç›¸çš„ç”µæµï¼Œé€šè¿‡Clarkå˜æ¢è®¡ç®—å‡º $I_{\alpha}$ å’Œ $I_{\beta}$ ï¼Œå†é€šè¿‡Parkå˜æ¢è®¡ç®—å‡ºåé¦ˆé‡ $I_{d}$ å’Œ $I_{q}$ ã€‚</p><p>å¯¹äºPIæ§åˆ¶å™¨å‚æ•°çš„è®¾å®šï¼Œä»¥ä¸‹ä¸ºä¸€ä¸ªå‚è€ƒå€¼ï¼ˆä½†è¿˜æ˜¯éœ€è¦è‡ªè¡Œè°ƒæ•´ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{array}{c}  & P & I &\\d& K_{pd}=\alpha L_d & K_{Id}=\alpha R\\q& K_{pq}=\alpha L_q & K_{Iq}=\alpha R\end{array}</script><p>å…¶ä¸­ $\alpha$ çš„å–å€¼ä¸ºï¼šï¼ˆå…¶ä¸­ $\tau$ ä¸ºç”µæœºçš„æ—¶é—´å¸¸æ•°ï¼‰</p><script type="math/tex; mode=display">\alpha = \frac{2\pi}{\tau} \\\tau = min\left\{\frac{L_d}{R},\frac{L_q}{R}\right\}</script><p>ç”µæœºåˆ†ä¸ºè¡¨è´´ç”µæœºå’Œå†…åµŒå¼ç”µæœºï¼Œè¡¨è´´å¼ç”µæœºçš„æ°¸ç£ä½“è´´åœ¨è½¬å­è¡¨é¢ï¼Œå†…åµŒå¼ç”µæœºçš„æ°¸ç£ä½“å®‰è£…åœ¨è½¬å­å†…ã€‚æˆ‘ä»¬å¸¸ç”¨çš„ç”µæœºéƒ½æ˜¯è¡¨è´´ç”µæœºï¼Œå¯¹äºè¡¨è´´ç”µæœºï¼Œ $L_d=L_q=L$ ï¼Œåˆ™å¯ä»¥å¾—åˆ°PIæ§åˆ¶å™¨çš„å‚è€ƒå‚æ•°ï¼š</p><script type="math/tex; mode=display">K_{p}=2\pi R \\K_{I}=2\pi \frac{R^2}{L}</script><h2 id="è§’åº¦å’Œé€Ÿåº¦çš„è·å–"><a href="#è§’åº¦å’Œé€Ÿåº¦çš„è·å–" class="headerlink" title="è§’åº¦å’Œé€Ÿåº¦çš„è·å–"></a>è§’åº¦å’Œé€Ÿåº¦çš„è·å–</h2><h3 id="æœ‰æ„Ÿï¼ˆHALLï¼‰"><a href="#æœ‰æ„Ÿï¼ˆHALLï¼‰" class="headerlink" title="æœ‰æ„Ÿï¼ˆHALLï¼‰"></a>æœ‰æ„Ÿï¼ˆHALLï¼‰</h3><p>éœå°”ä¼ æ„Ÿå™¨åˆ†ä¸º60åº¦å’Œ120åº¦</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/1C13C24117669CA4C27767785618F5F9.png" alt="1C13C24117669CA4C27767785618F5F9" style="zoom:50%;"></p><p>ç”»ä¸€ä¸‹è½¬ä¸€åœˆä¸‰ä¸ªéœå°”ä¼ æ„Ÿå™¨çš„æ³¢å½¢</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/C18D380D267A0837CAFBC98D96941EA6.png" alt="C18D380D267A0837CAFBC98D96941EA6" style="zoom:50%;"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ç§æ’åˆ—æ–¹å¼é™¤äº†ç»„åˆæ–¹å¼ä¸åŒï¼Œå…¶ä»–éƒ½ä¸€æ ·ã€‚</p><p>å•ç‰‡æœºé€šè¿‡è¾“å…¥æ•è·é‡‡é›†ä¸‰è·¯é«˜ä½ç”µå¹³çš„è·³å˜ï¼Œé€šè¿‡å¯¹ä¸‰è·¯ä¿¡å·è¿›è¡Œå¼‚æˆ–ï¼Œåˆ™è½¬ä¸€åœˆå¯ä»¥è¿›6æ¬¡ä¸­æ–­ï¼Œè¿›å…¥ä¸­æ–­åæ£€æµ‹IOç”µå¹³å°±å¯ä»¥çŸ¥é“ç”µæœºå¯¹åº”è§’åº¦ã€‚ä½†ç°åœ¨ä¸€åœˆåªèƒ½è·å–åˆ°6ä¸ªå›ºå®šçš„è§’åº¦å€¼ï¼Œæ— æ³•è·å–åˆ°å¦‚80åº¦è¿™ä¸ªè§’åº¦ã€‚è¿™æ—¶å¯ä»¥å¯¹é€Ÿåº¦è¿›è¡Œç§¯åˆ†å¾—åˆ°è§’åº¦ï¼Œé€Ÿåº¦çš„è·å–å¯ä»¥é€šè¿‡æŸ¥è¯¢60-120ä¹‹é—´å®šæ—¶å™¨çš„è®¡æ•°å€¼æ¥è·å¾—ã€‚ä½†æ˜¯è½¬åˆ°80åº¦çš„æ—¶å€™æ²¡åŠæ³•è·å–åˆ°120åº¦æ—¶å€™çš„å®šæ—¶å™¨è®¡æ•°å€¼å°±æ— æ³•è·å–å½“å‰æ®µçš„é€Ÿåº¦ï¼Œè¿™æ—¶å¯ä»¥ç”¨å‰ä¸€æ®µçš„é€Ÿåº¦è¿‘ä¼¼ä¸ºå½“å‰æ®µçš„é€Ÿåº¦ã€‚</p><h3 id="æ— æ„Ÿï¼ˆEKFï¼‰"><a href="#æ— æ„Ÿï¼ˆEKFï¼‰" class="headerlink" title="æ— æ„Ÿï¼ˆEKFï¼‰"></a>æ— æ„Ÿï¼ˆEKFï¼‰</h3><h4 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h4><p>å‰é¢çš„æœ‰æ„Ÿéƒ¨åˆ†ï¼Œæ˜¯åœ¨ç”µæœºä¸Šå®‰è£…éœå°”ä¼ æ„Ÿå™¨ï¼Œå¼•å‡ºä¸‰æ ¹çº¿åˆ°å•ç‰‡æœºé€šè¿‡è¾“å…¥æ•è·ç®—å‡ºå½“å‰è§’åº¦ï¼Œå†ä¸é¢„è®¾è§’åº¦å®Œæˆè§’åº¦é—­ç¯ã€‚</p><p>è€Œæ— æ„Ÿæ§åˆ¶åˆ™ä¸éœ€è¦éœå°”ä¼ æ„Ÿå™¨ï¼Œåªéœ€è¦ä¸‰æ ¹UVWçº¿è¾“å‡ºåˆ°ç”µæœºå³å¯ï¼Œå»æ‰äº†éœå°”ä¼ æ„Ÿå™¨å’Œä¸‰æ ¹çº¿ï¼ŒèŠ‚çœäº†æˆæœ¬ï¼›æœ‰äº›ä½¿ç”¨åœºåˆæ— æ³•ä½¿ç”¨éœå°”ä¼ æ„Ÿå™¨ï¼Œåˆ™éœ€è¦ä½¿ç”¨æ— æ„Ÿï¼Œæ¯”å¦‚ç©ºè°ƒå‹ç¼©æœºï¼Œå†…éƒ¨å……æ»¡äº†æ¶¦æ»‘æ²¹ï¼Œæ— æ³•å®‰è£…éœå°”ä¼ æ„Ÿå™¨ï¼›æœ‰äº›æ—¶å€™æœ‰æ„Ÿç®—æ³•æˆ–ç¡¬ä»¶å‡ºç°é—®é¢˜ä¹Ÿå¯ä»¥åˆ‡æ¢è‡³æ— æ„Ÿï¼Œé˜²æ­¢ç³»ç»Ÿé—¸æœºï¼Œæ¯”å¦‚æ±½è½¦è¿è¡Œä¸­éœå°”ä¼ æ„Ÿå™¨çªç„¶åäº†ï¼Œä¸ºäº†ä½¿æ•´ä¸ªç³»ç»Ÿæ­£å¸¸è¿è¡Œï¼Œå°±å¯ä»¥ä¸´æ—¶åˆ‡æ¢åˆ°æ— æ„Ÿã€‚ä¸Šè¿°è¿™äº›éƒ½æ˜¯æ— æ„Ÿæ§åˆ¶çš„ä¼˜ç‚¹ã€‚æ— æ„Ÿæ§åˆ¶ç°åœ¨å·²ç»è¶Šæ¥è¶Šæ™®åŠï¼Œç©ºè°ƒã€æ´—è¡£æœºã€é«˜ç«¯é£æ‰‡ã€æ±½è½¦éƒ½åœ¨ç”¨æ— æ„Ÿæ§åˆ¶ã€‚</p><h4 id="çŠ¶æ€è§‚æµ‹å™¨"><a href="#çŠ¶æ€è§‚æµ‹å™¨" class="headerlink" title="çŠ¶æ€è§‚æµ‹å™¨"></a>çŠ¶æ€è§‚æµ‹å™¨</h4><p>è§‚æµ‹å™¨æœ‰å¾ˆå¤šç§ï¼Œæ‰©å±•å¡å°”æ›¼æ»¤æ³¢è§‚æµ‹å™¨ã€æ»‘è†œè§‚æµ‹å™¨ã€é¾™ä¼¯æ ¼è§‚æµ‹å™¨ã€è‡ªé€‚åº”è§‚æµ‹å™¨ã€ç£é“¾è§‚æµ‹å™¨ç­‰ã€‚å…¶ä¸­æ‰©å±•å¡å°”æ›¼æ»¤æ³¢è§‚æµ‹å™¨çš„ä½é€Ÿæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œæ‰€ä»¥æœ¬æ–‡é‡ç‚¹è®¨è®ºEKFã€‚</p><p>çŠ¶æ€è§‚æµ‹å™¨å®è´¨ä¸Šå°±æ˜¯ç”¨æ•°å­¦æ–¹æ³•å»ºç«‹ä¸€ä¸ªå¯ä»¥æ¨¡æ‹ŸçœŸå®è¢«æ§å¯¹è±¡çš„æ¨¡å‹ï¼Œç”¨è¿™ä¸ªæ¨¡å‹æ¥å¾—çŸ¥ä¸€äº›æ— æ³•é€šè¿‡æµ‹é‡å¾—åˆ°çš„çŠ¶æ€é‡ã€‚å¯¹äºç”µæœºç³»ç»Ÿæ¥è¯´ï¼Œå¦‚æœæ²¡æœ‰ä¼ æ„Ÿå™¨å»æµ‹é‡ç”µæœºçš„è½¬é€Ÿå’Œè½¬å­ä½ç½®ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡æ­å»ºçŠ¶æ€è§‚æµ‹å™¨æ¥ä¼°ç®—ç”µæœºçš„è½¬å­å’Œè½¬å­ä½ç½®ï¼Œè¿™å°±æ˜¯åŸºäºçŠ¶æ€è§‚æµ‹å™¨çš„ç”µæœºçš„æ— ä¼ æ„Ÿå™¨æ§åˆ¶ã€‚</p><p>ä½†æ˜¯ä½¿ç”¨è¿™ç§æ–¹æ³•å»ºç«‹çš„è§‚æµ‹å™¨æœ‰ç€è¯¸å¤šé—®é¢˜ï¼š</p><ol><li>æŠ—å¹²æ‰°èƒ½åŠ›å·®ï¼šåŠ å…¥æ‰°åŠ¨æˆ–è´Ÿè½½ï¼Œæ­¤æ—¶çš„çŠ¶æ€è§‚æµ‹å™¨å¾ˆéš¾ä¿æŒæ­£ç¡®çš„å“åº”è€Œå¯¼è‡´è¾“å‡ºé”™è¯¯æˆ–è€…ç³»ç»Ÿå´©æºƒï¼›</li><li>å­˜åœ¨è¯¯å·®ï¼šè¯¯å·®ä¸»è¦å­˜åœ¨ä¸ç³»ç»Ÿè¯¯å·®å’Œæµ‹é‡è¯¯å·®<ol><li>ç³»ç»Ÿè¯¯å·®ï¼šåœ¨å»ºæ¨¡çš„æ—¶å€™ç”µæœºçš„å‚æ•°ä¸å¯èƒ½å®Œå…¨ç²¾ç¡®ï¼Œåœ¨å»ºæ¨¡çš„æ—¶å€™é€ æˆè¯¯å·®ã€‚</li><li>æµ‹é‡è¯¯å·®ï¼šè§‚æµ‹å™¨éœ€è¦ç”µæµä½œä¸ºè¾“å…¥ï¼Œè€Œç”µæµçš„é‡‡é›†å°±ä¼šå­˜åœ¨è¯¯å·®ã€‚</li></ol></li></ol><p>æ‰€ä»¥ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œéœ€è¦ç»™çŠ¶æ€è§‚æµ‹å™¨å¢åŠ åé¦ˆï¼Œé€šè¿‡åé¦ˆæ¥ä¿®æ­£çŠ¶æ€è§‚æµ‹å™¨çš„è¾“å‡ºï¼Œè®©è§‚æµ‹å™¨å°½å¯èƒ½çš„å»è´´è¿‘çœŸå®çš„ç”µæœºã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/017fc22e045b4488a08db81c18a6590f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h5 id="çŠ¶æ€ç©ºé—´è¡¨ç¤º"><a href="#çŠ¶æ€ç©ºé—´è¡¨ç¤º" class="headerlink" title="çŠ¶æ€ç©ºé—´è¡¨ç¤º"></a>çŠ¶æ€ç©ºé—´è¡¨ç¤º</h5><p>çº¿æ€§ç³»ç»Ÿçš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹ä¸ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\dot x = Ax+Bu\\y=Hx\end{array}\right.</script><p>æ°¸ç£åŒæ­¥ç”µæœºçš„æ–¹ç¨‹ï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}U_\alpha = Ri_\alpha + L_s \frac{di_\alpha}{dt} - \omega_e \psi_f sin\theta\\U_\beta = Ri_\beta + L_s \frac{di_\beta}{dt} + \omega_e \psi_f cos\theta\end{array}\right.</script><p>ä¸Šè¿°æ–¹ç¨‹çš„å«ä¹‰ä¸ºï¼šå°†æ¯ä¸€ç›¸æŠ½è±¡ä¸ºä¸€ä¸ªç”µé˜»ï¼Œä¸€ä¸ªç”µæ„Ÿå’Œä¸€ä¸ªåç”µåŠ¨åŠ¿çš„ä¸²è”ï¼Œåˆ™æ¯ä¸€ç›¸çš„ç”µå‹ä¸ºå‰é¢ä¸‰é¡¹å‹é™ä¹‹å’Œï¼ˆåç”µåŠ¨åŠ¿ä¸ºé€Ÿåº¦ä¹˜ç£é“¾ï¼‰ã€‚æ–¹ç¨‹ä¸­çš„ç”µé˜»Rã€ç”µæ„ŸLã€å’Œç£é“¾fluxä¸ºç”µæœºçš„å›ºæœ‰å‚æ•°ï¼Œç”µæµå¯ä»¥é€šè¿‡é‡‡æ ·ç”µé˜»å¾—åˆ°ï¼Œåªå‰©ä¸‹äº†è§’åº¦å’Œè½¬é€Ÿï¼Œå°†ç”µæœºæ–¹ç¨‹è½¬åŒ–ä¸ºçŠ¶æ€ç©ºé—´è¡¨è¾¾ï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\frac{d i_\alpha}{dt} = -\frac{R}{L_s}i_\alpha + \frac{1}{L_s}\omega_e\psi_f sin\theta + \frac{1}{L_s}U_\alpha \\\frac{d i_\beta}{dt} = -\frac{R}{L_s}i_\beta - \frac{1}{L_s}\omega_e\psi_f cos\theta + \frac{1}{L_s}U_\beta \\\frac{d \omega_e}{dt} = 0 \\\frac{d \theta}{dt} = \omega_e\end{array}\right.</script><h5 id="çŸ©é˜µåŒ–è¡¨ç¤º"><a href="#çŸ©é˜µåŒ–è¡¨ç¤º" class="headerlink" title="çŸ©é˜µåŒ–è¡¨ç¤º"></a>çŸ©é˜µåŒ–è¡¨ç¤º</h5><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¸Šé¢çš„å¼å­æ•´ç†æˆçŸ©é˜µå½¢å¼ï¼Œé¦–å…ˆç¡®è®¤çŠ¶æ€å˜é‡åˆ†åˆ«ä¸º $ \dot{i_\alpha},\dot{i_\beta},\dot{\omega_e},\dot{\theta}$ ï¼Œåˆ™æœ‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\dot{x}=\begin{bmatrix} \dot{i_\alpha} \\ \dot{i_\beta} \\ \dot{\omega_e} \\ \dot{\theta} \\\end{bmatrix}\quadx=\begin{bmatrix} i_\alpha \\ i_\beta \\ \omega_e \\ \theta \\\end{bmatrix}\end{aligned}</script><p>è¾“å…¥ $u$ ï¼Œå¯¹äºç”µæœºæ¥è¯´å°±æ˜¯ç”µå‹ï¼Œæˆ‘ä»¬é€‰æ‹© $\alpha-\beta$ åæ ‡ç³»ï¼š</p><script type="math/tex; mode=display">\begin{aligned}u=\begin{bmatrix} U_\alpha \\ U_\beta \\\end{bmatrix}\end{aligned}</script><p>è¾“å‡ºçŸ©é˜µ $y$ ä¸ºé€šè¿‡é‡‡æ ·ç”µé˜»æµ‹å¾—çš„ç”µæµï¼š</p><script type="math/tex; mode=display">\begin{aligned}y=\begin{bmatrix} i_\alpha \\ i_\beta \\\end{bmatrix}\end{aligned}</script><p>åˆ™ $H$ å’Œ $B$ çŸ©é˜µå°±å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}H=\begin{bmatrix} 1 & 0 & 0 & 0 \\ 0 & 1 & 0 & 0 \\\end{bmatrix}\quadB=\begin{bmatrix} \frac{1}{L_s} & 0 \\ 0 & \frac{1}{L_s} \\ 0 & 0 \\ 0 & 0 \\\end{bmatrix}\end{aligned}</script><p>æ­¤æ—¶çŸ©é˜µå½¢å¼çš„è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\begin{bmatrix}i_{\alpha} \\\dot{i}_{\beta} \\\dot{\omega} \\\dot{\theta}\end{bmatrix} & = \begin{bmatrix}-\frac{R}{L_{S}} i_{\alpha}+\frac{1}{L_{s}} \omega_{e} \psi_{f} \sin \theta \\-\frac{R}{L_{S}} i_{\beta}-\frac{1}{L_{s}} \omega_{e} \psi_{f} \cos \theta \\0 \\\omega_{e}\end{bmatrix}+\begin{bmatrix}\frac{1}{L_{s}} & 0 \\0 & \frac{1}{L_{s}} \\0 & 0 \\0 & 0\end{bmatrix}\begin{bmatrix}u_{\alpha} \\u_{\beta}\end{bmatrix}\\\begin{bmatrix}i_{\alpha} \\i_{\beta}\end{bmatrix} & = \begin{bmatrix}1 & 0 & 0 & 0 \\0 & 1 & 0 & 0\end{bmatrix}\begin{bmatrix}i_{\alpha} \\i_{\beta} \\\omega_{e} \\\theta\end{bmatrix}\end{aligned}</script><p>å¯¹æ¯”çŠ¶æ€ç©ºé—´è¡¨ç¤ºï¼Œæ— æ³•æ˜¾å¼åœ°è¡¨ç¤ºå‡ºçº¿æ€§çš„ $Ax$ ï¼Œå› ä¸ºç”µæœºç³»ç»Ÿä¸æ˜¯çº¿æ€§çš„ï¼Œæ‰€ä»¥ç”¨ $f(x)$ è¿™ä¸€éçº¿æ€§é¡¹æ›¿ä»£è¿™ä¸€é¡¹ã€‚ $f(x)$ å®šä¹‰ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}f(x)=\begin{bmatrix} -\frac{R}{L_s}i_\alpha + \frac{1}{L_s}\omega_e\psi_f sin\theta \\ -\frac{R}{L_s}i_\beta - \frac{1}{L_s}\omega_e\psi_f cos\theta \\ 0 \\ \omega_e \\\end{bmatrix}\end{aligned}</script><p>åˆ™æ­¤æ—¶çš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}\dot x = f(x)+Bu\\y=Hx\end{array}\right.</script><h4 id="æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨"><a href="#æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨" class="headerlink" title="æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨"></a>æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨</h4><p>å…³äºå¡å°”æ›¼æ»¤æ³¢å™¨çš„çŸ¥è¯†è¯·çœ‹è¿™ç¯‡æ–‡ç« ï¼š<a href="https://www.robotsfan.com/posts/b4727fbe.html">æ‰‹æ’•å¡å°”æ›¼æ»¤æ³¢å™¨</a></p><p>æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆExtend Kalman Filterï¼‰ï¼Œç®€ç§°EKFã€‚å¸¦â€œæ‰©å±•â€äºŒå­—ï¼Œæ˜¯å› ä¸ºå¡å°”æ›¼æ»¤æ³¢å™¨åªèƒ½å¤„ç†çº¿æ€§ç³»ç»Ÿï¼Œè€Œç”µæœºæ˜¯ä¸€ä¸ªéçº¿æ€§ï¼Œå¼ºè€¦åˆçš„ç³»ç»Ÿï¼Œä½¿ç”¨æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨å¯ä»¥å¤„ç†è¿™ç§éçº¿æ€§ç³»ç»Ÿã€‚</p><p>å‰æ–‡çš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹ä¸­ $f(x)$ æ˜¯éçº¿æ€§çš„ï¼Œå¦‚æœæƒ³å¯¹éçº¿æ€§ç³»ç»Ÿè¿›è¡Œå¡å°”æ›¼æ»¤æ³¢ï¼Œéœ€è¦å¯¹å…¶çº¿æ€§åŒ–ï¼ˆLinearizationï¼‰ï¼Œæ³°å‹’çº§æ•°å±•å¼€æ˜¯å°†éçº¿æ€§ç³»ç»Ÿçº¿æ€§åŒ–çš„ä¸€ç§æ–¹æ³•ã€‚å°† $f(x)$ æ³°å‹’çº§æ•°å±•å¼€å¹¶å–å‰ä¸¤é¡¹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}f(x)=f(x_0)+\frac{\partial f(x)}{\partial x}(x-x_0)\end{aligned}</script><p>å¯¹ $f(x)$ æ±‚åå¯¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}F = \frac{\partial f(x)}{\partial x}=\begin{bmatrix}-\frac{R}{L_{S}} & 0 & \frac{\psi_{f} \sin \theta}{L_{S}} & \frac{\omega_{e} \psi_{f} \cos \theta}{L_{S}} \\0 & -\frac{R}{L_{S}} & -\frac{\psi_{f} \cos \theta}{L_{S}} & \frac{\omega_{e} \psi_{f} \sin \theta}{L_{S}} \\0 & 0 & 0 & 0 \\0 & 0 & 1 & 0\end{bmatrix}\end{aligned}</script><p>æ­¤æ—¶çŠ¶æ€ç©ºé—´æ–¹ç¨‹å˜ä¸ºï¼š</p><script type="math/tex; mode=display">\dot{x}=f(x_{0})+F(x-x_{0})+B u</script><p>çŠ¶æ€æ–¹ç¨‹æ˜¯å»ºç«‹åœ¨è¿ç»­ç³»ç»Ÿçš„åŸºç¡€ä¸Šï¼Œéœ€è¦å°†å…¶è½¬åŒ–æˆç¦»æ•£åŒ–ç³»ç»Ÿåï¼Œæ‰èƒ½åœ¨å¾®æ§åˆ¶å™¨ä¸­å®ç°å¡å°”æ›¼æ»¤æ³¢çŠ¶æ€è§‚æµ‹å™¨ã€‚åœ¨ç¦»æ•£åŒ–ç³»ç»Ÿä¸­ï¼Œ $\dot{x}=\frac{x_{k}-x_{k-1}}{\Delta t}$ ï¼Œåˆ™çŠ¶æ€ç©ºé—´æ–¹ç¨‹è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\frac{x_{k}-x_{k-1}}{\Delta t}  &= f(x_{k-1})+B u_{k-1}\\x_{k}&=x_{k-1}+(f(x_{k-1})+B u_{k-1}) \Delta t\\&=(I+F\Delta t)x_{k-1}+B u_{k-1}\Delta t\end{aligned}</script><p>ä»¤ $A=(I+F\Delta t)$ ï¼Œæ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨çš„æµç¨‹ä¸ºä»¥ä¸‹äº”æ­¥ï¼š</p><ul><li><p>é¢„æµ‹</p><ol><li><p>è®¡ç®—é¢„ä¼°å€¼</p><p>$\hat{x}_k^-=\hat{x}_{k-1}+(f(x_{k-1})+B u_{k-1}) \Delta t$</p></li><li><p>è®¡ç®—è¯¯å·®åæ–¹å·®</p><p>$P_k^-=(I+F\Delta t)P_{k-1}(I+F\Delta t)^T+Q$</p></li></ol></li><li><p>æ ¡æ­£</p><ol><li><p>è®¡ç®—å¡å°”æ›¼å¢ç›Š</p><p>$K_k=P_k^-H^T(HP_k^-H^T+R)^{-1}$</p></li><li><p>ä¿®æ­£é¢„ä¼°å€¼</p><p>$\hat{x}_k=\hat{x}_k^- + K_k(z_k-H\hat{x}_k^-)$ </p></li></ol></li></ul><ol><li><p>æ›´æ–°è¯¯å·®åæ–¹å·®ï¼Œç”¨äºä¸‹ä¸€æ¬¡è®¡ç®—</p><p>$P_k=(I-K_kH)P_k^-$ </p></li></ol><p>ä¸Šé¢çš„äº”ä¸ªæ–¹ç¨‹ä¸­ï¼Œ $\Delta t$ ä¸ºé‡‡æ ·æ—¶é—´ï¼Œ $Q$ ä¸ºæ¨¡å‹è¯¯å·®ï¼Œ $R$ ä¸ºæµ‹é‡è¯¯å·®</p><p>åœ¨MATLABä¸­å»ºç«‹EKFè§‚æµ‹å™¨ï¼Œéœ€è¦å»ºç«‹å…¨å±€å˜é‡xå’ŒPç”¨äºä¿å­˜æ¯ä¸€æ¬¡è¿­ä»£çš„å€¼ç»™ä¸‹ä¸€æ¬¡è¿­ä»£ä½¿ç”¨ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">x_posteriori</span>  = <span class="title">fcn</span><span class="params">(Ialpha,Ibeta,Ualpha,Ubeta,Ls,Rs,Flux)</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">global</span> x;</span><br><span class="line"><span class="keyword">global</span> P;</span><br><span class="line"></span><br><span class="line">R=[<span class="number">0.02</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0.02</span>];</span><br><span class="line">Q=[<span class="number">0.01</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0.01</span>,<span class="number">0</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.01</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.01</span>];</span><br><span class="line">Time=<span class="number">0.0001</span>;</span><br><span class="line"></span><br><span class="line">u=[Ualpha;Ubeta];</span><br><span class="line">y=[Ialpha;Ibeta];</span><br><span class="line">H=[<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>];</span><br><span class="line">B=[<span class="number">1</span>/Ls,<span class="number">0</span>;<span class="number">0</span>,<span class="number">1</span>/Ls;<span class="number">0</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0</span>];</span><br><span class="line">F=[-Rs/Ls,<span class="number">0</span>,Flux*<span class="built_in">sin</span>(x(<span class="number">4</span>,<span class="number">1</span>))/Ls,x(<span class="number">3</span>,<span class="number">1</span>)*Flux*<span class="built_in">cos</span>(x(<span class="number">4</span>,<span class="number">1</span>))/Ls;<span class="number">0</span>,-Rs/Ls,-Flux*<span class="built_in">cos</span>(x(<span class="number">4</span>,<span class="number">1</span>))/Ls,x(<span class="number">3</span>,<span class="number">1</span>)*Flux*<span class="built_in">sin</span>(x(<span class="number">4</span>,<span class="number">1</span>))/Ls;<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>;<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>];</span><br><span class="line">f=[-Rs*Ialpha/Ls+x(<span class="number">3</span>,<span class="number">1</span>)*Flux*<span class="built_in">sin</span>(x(<span class="number">4</span>,<span class="number">1</span>))/Ls;-Rs*Ibeta/Ls-x(<span class="number">3</span>,<span class="number">1</span>)*Flux*<span class="built_in">cos</span>(x(<span class="number">4</span>,<span class="number">1</span>))/Ls;<span class="number">0</span>;x(<span class="number">3</span>,<span class="number">1</span>)];</span><br><span class="line"><span class="comment">% è®¡ç®—é¢„ä¼°å€¼</span></span><br><span class="line">x_prior=x+(f+B*u)*Time;</span><br><span class="line"><span class="comment">% è®¡ç®—è¯¯å·®åæ–¹å·®</span></span><br><span class="line">A=(<span class="built_in">eye</span>(<span class="number">4</span>)+F*Time);</span><br><span class="line">P_prior=A*P*A&#x27;+Q;</span><br><span class="line"><span class="comment">% è®¡ç®—å¡å°”æ›¼å¢ç›Š</span></span><br><span class="line">K=(P_prior*H&#x27;)/(H*P_prior*H&#x27;+R);</span><br><span class="line"><span class="comment">% ä¿®æ­£é¢„ä¼°å€¼</span></span><br><span class="line">x_posteriori=x_prior+K*(y-H*x_prior);</span><br><span class="line"><span class="comment">% æ›´æ–°è¯¯å·®åæ–¹å·®</span></span><br><span class="line">P_posteriori=(<span class="built_in">eye</span>(<span class="number">4</span>)-K*H)*P_prior;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> x_posteriori(<span class="number">4</span>,<span class="number">1</span>)&gt;(<span class="number">2</span>*<span class="built_in">pi</span>)</span><br><span class="line">    x_posteriori(<span class="number">4</span>,<span class="number">1</span>)=x_posteriori(<span class="number">4</span>,<span class="number">1</span>)-(<span class="number">2</span>*<span class="built_in">pi</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">x=x_posteriori;</span><br><span class="line">P=P_posteriori;</span><br></pre></td></tr></table></figure><p>è°ƒæ•´RçŸ©é˜µå’ŒQçŸ©é˜µè‡³æœ€ä¼˜ï¼ŒæŸ¥çœ‹è§‚æµ‹å™¨æ•ˆæœï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220416201249667.png" alt="image-20220416201249667" style="zoom:50%;"></p><p>è“è‰²ä¸ºè§‚æµ‹è§’åº¦ï¼Œé»„è‰²ä¸ºçœŸå®è§’åº¦ã€‚å¯ä»¥çœ‹åˆ°ç»è¿‡å¾ˆçŸ­æ—¶é—´çš„è¿­ä»£ï¼Œè§‚æµ‹å™¨å°±å·²ç»å¯ä»¥å¾ˆå¥½åœ°é¢„æµ‹ç”µæœºè§’åº¦ï¼Œè‡³æ­¤å®Œæˆäº†EKFæ— æ„Ÿç®—æ³•ã€‚</p><h2 id="é€Ÿåº¦é—­ç¯"><a href="#é€Ÿåº¦é—­ç¯" class="headerlink" title="é€Ÿåº¦é—­ç¯"></a>é€Ÿåº¦é—­ç¯</h2><p>å‰æ–‡ç”µæµé—­ç¯ç²¾å‡†åœ°æ§åˆ¶äº†ç”µæœºç”µæµä»è€Œæ§åˆ¶è½¬çŸ©ï¼Œä½†è¦æƒ³ç²¾ç¡®åœ°æ§åˆ¶ç”µæœºçš„é€Ÿåº¦å°±éœ€è¦è¿›è¡Œé€Ÿåº¦é—­ç¯ã€‚é€Ÿåº¦é—­ç¯æ˜¯åœ¨ç”µæµé—­ç¯çš„å¤–ç¯ï¼Œæ§åˆ¶Id=0ï¼Œé€šè¿‡å‰é¢æœ‰æ„Ÿæˆ–æ— æ„Ÿè·å–åˆ°çš„é€Ÿåº¦ä¸é€Ÿåº¦å‚è€ƒä½œæ¯”è¾ƒï¼Œé€šè¿‡PIDæ§åˆ¶Iqçš„å€¼ã€‚</p><p>å¯¹äºé€Ÿåº¦é—­ç¯PIDï¼Œä¸€ç­åªæ˜¯ç”¨PDæ§åˆ¶ã€‚ $K_p$ å’Œ $K_d$ çš„ç†è®ºè®¡ç®—å€¼ä¸ºï¼š</p><script type="math/tex; mode=display">K_P=\frac{\beta J}{1.5P\psi_f}\\K_I=\beta K_P</script><p>å…¶ä¸­ $\beta$ æ˜¯é€Ÿåº¦ç¯çš„å¸¦å®½ï¼Œä¸€èˆ¬ä¸º50rad/sï¼› $J$ ä¸ºç”µæœºè½¬åŠ¨æƒ¯é‡ï¼Œæ˜¯ç”µæœºçš„å›ºæœ‰å‚æ•°ï¼› $P$ æ˜¯ç”µæœºçš„æå¯¹æ•°ï¼› $\psi_f$ æ˜¯ç”µæœºçš„ç£é“¾ã€‚</p><p>ç”±äºæœ‰è§‚æµ‹å™¨çš„å­˜åœ¨ï¼Œè§‚æµ‹å™¨çš„å‚æ•°å¯¹é€Ÿåº¦ç¯å‚æ•°ä¹Ÿä¼šæœ‰å½±å“ï¼Œæ‰€ä»¥ä»¥ä¸Šè®¡ç®—åªæ˜¯ç†è®ºå€¼ï¼Œå®é™…å‚æ•°éœ€è¦åœ¨ç†è®ºå€¼çš„åŸºç¡€ä¸Šé€šè¿‡è§‚å¯Ÿç‚¹å‡»è¿è¡Œæ•ˆæœè¿›è¡Œè°ƒæ•´ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç”µæœº" scheme="https://www.robotsfan.com/categories/%E7%94%B5%E6%9C%BA/"/>
    
    
    <category term="FOC" scheme="https://www.robotsfan.com/tags/FOC/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨Clionå¼€å‘Qt</title>
    <link href="https://www.robotsfan.com/posts/113f8d22.html"/>
    <id>https://www.robotsfan.com/posts/113f8d22.html</id>
    <published>2022-09-08T05:00:00.000Z</published>
    <updated>2024-07-17T03:04:32.086Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä½¿ç”¨Clionå¼€å‘Qt"><a href="#ä½¿ç”¨Clionå¼€å‘Qt" class="headerlink" title="ä½¿ç”¨Clionå¼€å‘Qt"></a>ä½¿ç”¨Clionå¼€å‘Qt</h1><h2 id="å®‰è£…Qt"><a href="#å®‰è£…Qt" class="headerlink" title="å®‰è£…Qt"></a>å®‰è£…Qt</h2><p>å‚ç…§ä¸‹å›¾å‹¾é€‰</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908111317127.png" alt="image-20220908111317127" style="zoom:50%;"></p><h2 id="é…ç½®Clion"><a href="#é…ç½®Clion" class="headerlink" title="é…ç½®Clion"></a>é…ç½®Clion</h2><p>æ–°å»ºQté¡¹ç›®ï¼Œå¹¶é€‰æ‹©Qt CMakeè·¯å¾„</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908120325486.png" alt="image-20220908120325486" style="zoom:50%;"></p><p>é…ç½®å·¥å…·é“¾</p><p>æ–°å»ºä¸€ä¸ªå·¥å…·é“¾å¹¶é‡å‘½åï¼Œé€‰æ‹©å·¥å…·é›†ï¼Œé€‰æ‹©ä¸ä¸‹å›¾ä¸€æ ·çš„è°ƒè¯•å™¨</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908120845598.png" alt="image-20220908120845598" style="zoom:50%;"></p><p>æ·»åŠ Qt Designerå·¥å…·ï¼Œç”¨äºæ‰“å¼€<code>*.ui</code>æ–‡ä»¶</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908121211672.png" alt="image-20220908121211672" style="zoom:50%;"></p><p>æ·»åŠ UICå·¥å…·ï¼Œç”¨äºç”Ÿæˆ<code>ui_qwmainwind.h</code>æ–‡ä»¶</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908121628482.png" alt="image-20220908121628482" style="zoom:50%;"></p><p>æ·»åŠ ç¯å¢ƒå˜é‡</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908123829879.png" alt="image-20220908123829879" style="zoom:50%;"></p><p>è¿è¡Œ</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908124126507.png" alt="image-20220908124126507"></p><h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>åˆ›å»ºUIç±»</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908124511476.png" alt="image-20220908124511476" style="zoom:50%;"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908124618160.png" alt="image-20220908124618160" style="zoom:50%;"></p><p>æ­¤æ—¶æ‰“å¼€<code>mainwind.cpp</code>çœ‹åˆ°å¤´æ–‡ä»¶<code>#include &quot;ui_MainWind.h&quot;</code>æŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºéœ€è¦ä½¿ç”¨UICå·¥å…·ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ã€‚</p><p>å³é”®ä½¿ç”¨Qt Designeræ‰“å¼€<code>mainwind.ui</code>å°±å¯ä»¥è¿›è¡Œå¯è§†åŒ–è®¾è®¡</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908124824449.png" alt="image-20220908124824449" style="zoom:50%;"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908125226609.png" alt="image-20220908125226609" style="zoom:50%;"></p><p>å³é”®ä½¿ç”¨Qt UICæ‰“å¼€<code>mainwind.ui</code>ç”Ÿæˆä»£ç </p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908125126022.png" alt="image-20220908125126022" style="zoom:50%;"></p><p>å¯ä»¥çœ‹åˆ°å·²æˆåŠŸç”Ÿæˆ<code>ui_MainWind.h</code>ï¼Œä¸”<code>mainwind.cpp</code>ä¸­ä¸å†æŠ¥é”™ã€‚</p><p>åœ¨<code>main.cpp</code>ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç è¿›è¡Œæµ‹è¯•ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;mainwindow.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span> </span>&#123;</span><br><span class="line"><span class="function">QApplication <span class="title">a</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">MainWindow mainWindow;</span><br><span class="line">mainWindow.<span class="built_in">show</span>();</span><br><span class="line"><span class="keyword">return</span> QApplication::<span class="built_in">exec</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆåŠŸè¾“å‡º</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220908125153526.png" alt="image-20220908125153526" style="zoom:50%;"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å…¶ä»–" scheme="https://www.robotsfan.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="Qt" scheme="https://www.robotsfan.com/tags/Qt/"/>
    
  </entry>
  
  <entry>
    <title>ä½¿ç”¨CLionå¼€å‘STM32</title>
    <link href="https://www.robotsfan.com/posts/ea0a6855.html"/>
    <id>https://www.robotsfan.com/posts/ea0a6855.html</id>
    <published>2022-06-15T10:00:00.000Z</published>
    <updated>2024-07-17T03:04:34.383Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä½¿ç”¨CLionå¼€å‘STM32"><a href="#ä½¿ç”¨CLionå¼€å‘STM32" class="headerlink" title="ä½¿ç”¨CLionå¼€å‘STM32"></a>ä½¿ç”¨CLionå¼€å‘STM32</h1><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><h3 id="STM32CubeMX"><a href="#STM32CubeMX" class="headerlink" title="STM32CubeMX"></a>STM32CubeMX</h3><p>æ­£å¸¸å®‰è£…å³å¯ã€‚<a href="https://www.st.com/en/development-tools/stm32cubemx.html">ä¸‹è½½é“¾æ¥</a></p><h3 id="MinGW"><a href="#MinGW" class="headerlink" title="MinGW"></a>MinGW</h3><p>ç‚¹å‡»ä¸‹è½½å®‰è£…å™¨ã€‚<a href="https://osdn.net/projects/mingw/releases/">ä¸‹è½½é“¾æ¥</a></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615165444739.png" alt="image-20220615165444739" style="zoom:50%;"></p><p>é€‰æ‹©å®‰è£…</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615165549003.png" alt="image-20220615165549003" style="zoom:50%;"></p><p>æ”¹å˜ä¸€ä¸‹è·¯å¾„</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615165640045.png" alt="image-20220615165640045" style="zoom:50%;"></p><p>ç­‰å¾…ä¸‹è½½å®Œæˆåç‚¹å‡»<code>Continue</code>è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå‹¾é€‰<code>Basic Setup</code>é‡Œçš„å…¨éƒ¨ç»„ä»¶ï¼Œç‚¹å‡»<code>Apply Changes</code>ä¸‹è½½ã€‚è¿‡ç¨‹ä¼šå¾ˆæ¼«é•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615170342076.png" alt="image-20220615170342076" style="zoom:50%;"></p><p>é…ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨Pathé‡Œæ·»åŠ <code>MinGW</code>çš„<code>bin</code>æ–‡ä»¶å¤¹ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615165848575.png" alt="image-20220615165848575" style="zoom:50%;"></p><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥<code>gcc -v</code>ï¼Œå‡ºç°ç±»ä¼¼ä¸‹å›¾ä¿¡æ¯å³ä¸ºå®‰è£…æˆåŠŸ</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615170030477.png" alt="image-20220615170030477" style="zoom:50%;"></p><h3 id="OpenOCD"><a href="#OpenOCD" class="headerlink" title="OpenOCD"></a>OpenOCD</h3><p>ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ã€‚<a href="http://gnutoolchains.com/arm-eabi/openocd/">ä¸‹è½½é“¾æ¥</a></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615165310091.png" alt="image-20220615165310091" style="zoom:50%;"></p><p>ä¸‹è½½åè§£å‹ï¼Œå°†æ–‡ä»¶å¤¹æ”¹åä¸º<code>OpenOCD</code>å¹¶æ”¾ç½®åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°†åœ¨ä¸‹æ–‡ä¸­Clionä¸­é…ç½®ã€‚</p><h3 id="arm-none-eabi-gcc"><a href="#arm-none-eabi-gcc" class="headerlink" title="arm-none-eabi-gcc"></a>arm-none-eabi-gcc</h3><p>ä¸‹è½½zipæ ¼å¼çš„ã€‚<a href="https://developer.arm.com/open-source/gnu-toolchain/gnu-rm/downloads">ä¸‹è½½é“¾æ¥</a></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615170148180.png" alt="image-20220615170148180" style="zoom:50%;"></p><p>ä¸‹è½½åè§£å‹ï¼Œæ”¾ç½®åˆ°ä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°†åœ¨ä¸‹æ–‡ä¸­Clionä¸­é…ç½®ã€‚</p><p>é…ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨Pathé‡Œæ·»åŠ æ‰€åœ¨æ–‡ä»¶å¤¹çš„<code>bin</code>æ–‡ä»¶å¤¹ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615170758145.png" alt="image-20220615170758145" style="zoom:50%;"></p><p>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¾“å…¥<code>arm-none-eabi-gcc -v</code>ï¼Œå‡ºç°ç±»ä¼¼ä¸‹å›¾ä¿¡æ¯å³ä¸ºå®‰è£…æˆåŠŸ</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615170651597.png" alt="image-20220615170651597" style="zoom:50%;"></p><h3 id="Clion"><a href="#Clion" class="headerlink" title="Clion"></a>Clion</h3><p>Clionå¯ä»¥å»Jetbrainä¸‹è½½ï¼Œå­¦ç”Ÿå¯ä»¥å…è´¹ä½¿ç”¨ã€‚ä¸‹è½½å®‰è£…å¥½ä¹‹åé…ç½®å·¥å…·é“¾ï¼Œæ·»åŠ å¦‚ä¸‹å›¾çš„è·¯å¾„</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615171359479.png" alt="image-20220615171359479" style="zoom:50%;"></p><h2 id="æ–°å»ºé¡¹ç›®"><a href="#æ–°å»ºé¡¹ç›®" class="headerlink" title="æ–°å»ºé¡¹ç›®"></a>æ–°å»ºé¡¹ç›®</h2><p>æ–°å»ºSTM32CubeMXé¡¹ç›®</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615171646399.png" alt="image-20220615171646399" style="zoom:50%;"></p><p>é€‰æ‹©ç”¨CubeMXæ‰“å¼€</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615171831417.png" alt="image-20220615171831417" style="zoom:50%;"></p><p>æ›´æ¢èŠ¯ç‰‡å‹å·</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615171943646.png" alt="image-20220615171943646" style="zoom:50%;"></p><p>å°†é¡¹ç›®åæ”¹æˆå‰æ–‡Clionåˆ›å»ºçš„å·¥ç¨‹åï¼Œå°†IDEæ”¹æˆ<code>STM32CubeIDE</code>ï¼Œç„¶åç‚¹å‡»ç”Ÿæˆä»£ç ï¼Œå¼¹å‡ºæ˜¯å¦overwriteé€‰æ‹©yes</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615172307277.png" alt="image-20220615172307277" style="zoom:50%;"></p><p>ä»£ç ç”Ÿæˆå¥½ä¹‹åç‚¹å‡»Closeï¼Œå›åˆ°Clionï¼Œä¼šå¼¹å‡ºæ¥è¿™ä¸ªå¯¹è¯æ¡†ï¼Œè¿™é‡Œå…ˆé€‰æ‹©å–æ¶ˆï¼Œåé¢å†æ·»åŠ ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615172412994.png" alt="image-20220615172412994" style="zoom:50%;"></p><p>æ‰“å¼€è®¾ç½®ï¼Œç¡®å®šä¸€ä¸‹cmakeä¸ºä»¥ä¸‹é…ç½®ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615171523025.png" alt="image-20220615171523025" style="zoom:50%;"></p><p>ç‚¹å‡»é”¤å­æŒ‰é’®ç¼–è¯‘ï¼Œå¦‚ä»¥ä¸Šé…ç½®æ— è¯¯å³å¯ç”Ÿæˆ<code>hex</code>åŠ<code>bin</code></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615172739473.png" alt="image-20220615172739473" style="zoom:50%;"></p><p>å¯¹äºä¸€ä¸ªé¡¹ç›®ï¼Œä¸å¯é¿å…åœ°ä¼šç”¨åˆ°ç¬¬ä¸‰æ–¹åº“æˆ–è€…è‡ªå·±åˆ›å»ºçš„<code>.c/.h</code>æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¿®æ”¹<code>CmakeList</code>æ–‡ä»¶ã€‚ä½†è¿™é‡Œçš„<code>CMakelist</code>å¼€å¤´å†™æ˜äº†<code>#æ­¤æ–‡ä»¶ä»æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆ! è¯·å‹¿æ›´æ”¹!</code>ï¼Œå…¶åŸå› ä¸ºåœ¨æ¯ä¸€æ¬¡ä½¿ç”¨CubeMXç”Ÿæˆä»£ç æ—¶æ­¤æ–‡ä»¶ä¼šè¢«è¦†ç›–ï¼Œç”¨æˆ·çš„ä»£ç å°†ä¸ä¼šè¢«ä¿å­˜ã€‚æ‰€ä»¥éœ€è¦ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶<code>CMakeLists_template.txt</code>ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/CMakeLists_template.png" alt="CMakeLists_template" style="zoom:50%;"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œéœ€è¦å¢åŠ å¤´æ–‡ä»¶åŠç¼–è¯‘æ–‡ä»¶ã€‚å¯¹äºæˆ‘ä»¬æ–°å¢çš„ç¼–è¯‘æ–‡ä»¶ï¼Œå¯ä»¥æ–°å¢ä¸€ä¸ª<code>MY_SOURCE</code>å¹¶åœ¨<code>add_executable</code>ä¸­æ·»åŠ <code>$&#123;MY_SOURCES&#125;</code>ï¼Œå¯ä»¥é¿å…ä¿®æ”¹åŸæ¨¡æ¿ã€‚</p><p>fileé‡Œçš„<code>GLOB_RECURSE</code>æ„æ€æ˜¯å¯¹è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶è¿›è¡Œé€’å½’æ·»åŠ ã€‚è€Œ<code>GLOB</code>åˆ™ä¸è¿›è¡Œé€’å½’ï¼Œåªåœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æŸ¥æ‰¾ã€‚å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©ç”¨å“ªç§ã€‚<code>*.*</code>ä¸ºé€šé…ç¬¦ï¼Œæ„ä¸ºæ·»åŠ æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p><h2 id="çƒ§å½•"><a href="#çƒ§å½•" class="headerlink" title="çƒ§å½•"></a>çƒ§å½•</h2><p>å¦‚ä½¿ç”¨STlinkè¿›è¡Œçƒ§å½•ï¼Œéœ€è¦æ·»åŠ é…ç½®æ–‡ä»¶ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª<code>stlink.cfg</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">source [find interface/stlink-v2.cfg]</span><br><span class="line">transport select hla_swd</span><br><span class="line">source [find target/stm32f1x.cfg]</span><br><span class="line">adapter speed 10000</span><br></pre></td></tr></table></figure><p>è‹¥ä½¿ç”¨çš„ä¸æ˜¯STM32F1æˆ–è€…ä¸æ˜¯STlinkä»¿çœŸå™¨ï¼Œå¯ä»¥åˆ°OpenOCDå®‰è£…ç›®å½•çš„<code>share\openocd\scripts</code>ä¸‹å¯»æ‰¾å¯¹åº”çš„é…ç½®ã€‚èŠ¯ç‰‡åœ¨<code>target</code>æ–‡ä»¶ä¸‹ï¼Œä»¿çœŸå™¨åœ¨<code>interface</code>æ–‡ä»¶å¤¹ä¸‹ã€‚</p><p>ç„¶åç‚¹å‡»ç¼–è¾‘é…ç½®</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615174236352.png" alt="image-20220615174236352"></p><p>æ·»åŠ åˆšåˆšçš„é…ç½®æ–‡ä»¶</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615174323763.png" alt="image-20220615174323763" style="zoom:50%;"></p><p>ç„¶åç‚¹å‡»ä¸‰è§’å½¢çƒ§å½•å›ºä»¶</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220615174411604.png" alt="image-20220615174411604"></p><h2 id="æŸ¥çœ‹å¯„å­˜å™¨"><a href="#æŸ¥çœ‹å¯„å­˜å™¨" class="headerlink" title="æŸ¥çœ‹å¯„å­˜å™¨"></a>æŸ¥çœ‹å¯„å­˜å™¨</h2><p>è°ƒè¯•çš„æ—¶å€™ç‚¹å‡»å¯„å­˜å™¨ï¼Œæ²¡åŠ è½½svdæ–‡ä»¶æ˜¯çœ‹ä¸åˆ°çš„ï¼Œè¿™ä¸ªæ–‡ä»¶åœ¨keilä¸­å¯ä»¥æ‰¾åˆ°</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220616104531509.png" alt="image-20220616104531509" style="zoom:50%;"></p><p>è·¯å¾„å¦‚ä¸‹ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220616104707730.png" alt="image-20220616104707730" style="zoom:50%;"></p><p>ç„¶åå…¨é€‰å³å¯æ˜¾ç¤ºã€‚</p><h2 id="ä»£ç ä¼˜åŒ–"><a href="#ä»£ç ä¼˜åŒ–" class="headerlink" title="ä»£ç ä¼˜åŒ–"></a>ä»£ç ä¼˜åŒ–</h2><p>å®æµ‹é»˜è®¤çš„ä»£ç ä¼˜åŒ–ä¼šé€ æˆè®¸å¤šé—®é¢˜ã€‚ä¿®æ”¹æ¨¡æ¿æ–‡ä»¶<code>CMakeLists_template.txt</code>ï¼Œä¼˜åŒ–ç­‰çº§å‡æ”¹ä¸º<code>-O0</code>ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220616113849054.png" alt="image-20220616113849054" style="zoom:50%;"></p><p>ç„¶ååœ¨Cubemxä¸­é‡æ–°ç”Ÿæˆä»£ç ä»¥åˆ·æ–°Cmakelistæ–‡ä»¶ã€‚</p><h2 id="é‡å®šå‘printf"><a href="#é‡å®šå‘printf" class="headerlink" title="é‡å®šå‘printf"></a>é‡å®šå‘printf</h2><p>ä¸åœ¨keil5ä¸­é‡å®šä¹‰<code>fputs()</code>å‡½æ•°ä¸ä¸€æ ·ï¼Œåœ¨GCCç¼–è¯‘å™¨ä¸­éœ€è¦é‡å®šä¹‰çš„æ˜¯<code>__io_putchar(int ch)</code>ã€‚</p><p>åœ¨mainä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å¹¶å¼•å…¥å¤´æ–‡ä»¶<code>#include &lt;stdio.h&gt;</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifdef</span> __GNUC__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PUTCHAR_PROTOTYPE int __io_putchar(int ch)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* __GNUC__ */</span></span></span><br><span class="line"></span><br><span class="line">PUTCHAR_PROTOTYPE</span><br><span class="line">&#123;</span><br><span class="line">HAL_UART_Transmit(&amp;huart1 , (<span class="keyword">uint8_t</span> *)&amp;ch, <span class="number">1</span>, <span class="number">0xFFFF</span>);</span><br><span class="line"><span class="keyword">return</span> ch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå³å¯ä½¿ç”¨<code>printf</code>å‡½æ•°ã€‚ä¸”æ­¤æ®µä»£ç åœ¨Keilå’ŒClionä¸­å‡å¯æ­£å¸¸ç¼–è¯‘è¿è¡Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å…¶ä»–" scheme="https://www.robotsfan.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="STM32" scheme="https://www.robotsfan.com/tags/STM32/"/>
    
  </entry>
  
  <entry>
    <title>MPCâ€”â€”æ¨¡å‹é¢„æµ‹æ§åˆ¶</title>
    <link href="https://www.robotsfan.com/posts/fe8d7b17.html"/>
    <id>https://www.robotsfan.com/posts/fe8d7b17.html</id>
    <published>2022-06-01T13:00:00.000Z</published>
    <updated>2024-07-17T03:05:00.333Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/m1.jpg" alt="m1"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/m2.jpg" alt="m2"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/m3.jpg" alt="m3"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/m4.jpg" alt="m4"></p><p>ä»£ç ï¼š</p><p><code>MPC_Test.m</code></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% æ¸…å±</span></span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line">clc;</span><br><span class="line"><span class="comment">% ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰çŠ¶æ€ç©ºé—´çŸ©é˜µ</span></span><br><span class="line"><span class="comment">% å®šä¹‰çŠ¶æ€çŸ©é˜µ A, n*n çŸ©é˜µ</span></span><br><span class="line">A = [<span class="number">1</span> <span class="number">0.1</span>; <span class="number">-1</span> <span class="number">2</span>];</span><br><span class="line">n = <span class="built_in">size</span>(A,<span class="number">1</span>);</span><br><span class="line"><span class="comment">% å®šä¹‰è¾“å…¥çŸ©é˜µ B, n*p çŸ©é˜µ</span></span><br><span class="line">B = [<span class="number">0.2</span> <span class="number">1</span>;<span class="number">0.5</span> <span class="number">2</span>];</span><br><span class="line">p = <span class="built_in">size</span>(B,<span class="number">2</span>);</span><br><span class="line"><span class="comment">% å®šä¹‰QçŸ©é˜µï¼Œn*n çŸ©é˜µ</span></span><br><span class="line">Q = [<span class="number">100</span> <span class="number">0</span>;<span class="number">0</span> <span class="number">1</span>];</span><br><span class="line"><span class="comment">% å®šä¹‰FçŸ©é˜µï¼Œn*n çŸ©é˜µ</span></span><br><span class="line">F = [<span class="number">100</span> <span class="number">0</span>;<span class="number">0</span> <span class="number">1</span>];</span><br><span class="line"><span class="comment">% å®šä¹‰RçŸ©é˜µï¼Œp*p çŸ©é˜µ</span></span><br><span class="line">R = [<span class="number">1</span> <span class="number">0</span>;<span class="number">0</span> <span class="number">0.1</span>];</span><br><span class="line"><span class="comment">% å®šä¹‰stepæ•°é‡k</span></span><br><span class="line">k_steps = <span class="number">100</span>;</span><br><span class="line"><span class="comment">% å®šä¹‰çŸ©é˜µ X_Kï¼Œ n*k çŸ© é˜µ</span></span><br><span class="line">X_K = <span class="built_in">zeros</span>(n,k_steps);</span><br><span class="line"><span class="comment">% åˆå§‹çŠ¶æ€å˜é‡å€¼ï¼Œ n*1 å‘é‡</span></span><br><span class="line">X_K(:,<span class="number">1</span>) = [<span class="number">20</span>;<span class="number">-20</span>];</span><br><span class="line"><span class="comment">% å®šä¹‰è¾“å…¥çŸ©é˜µ U_Kï¼Œ p*k çŸ©é˜µ</span></span><br><span class="line">U_K = <span class="built_in">zeros</span>(p,k_steps);</span><br><span class="line"><span class="comment">% å®šä¹‰é¢„æµ‹åŒºé—´K</span></span><br><span class="line">N = <span class="number">5</span>;</span><br><span class="line"><span class="comment">% Call MPC_Matrices å‡½æ•° æ±‚å¾— E,HçŸ©é˜µ</span></span><br><span class="line">[E,H] = MPC_Matrices(A,B,Q,R,F,N);</span><br><span class="line"><span class="comment">% è®¡ç®—æ¯ä¸€æ­¥çš„çŠ¶æ€å˜é‡çš„å€¼</span></span><br><span class="line"><span class="keyword">for</span> k = <span class="number">1</span> : k_steps</span><br><span class="line">    <span class="comment">% æ±‚å¾—U_K(:,k)</span></span><br><span class="line">    U_K(:,k) = Prediction(X_K(:,k),E,H,N,p);</span><br><span class="line">    <span class="comment">% è®¡ç®—ç¬¬k+1æ­¥æ—¶çŠ¶æ€å˜é‡çš„å€¼</span></span><br><span class="line">    X_K(:,k+<span class="number">1</span>) = (A*X_K(:,k) + B*U_K(:,k));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">% ç»˜åˆ¶çŠ¶æ€å˜é‡å’Œè¾“å…¥çš„å˜åŒ–</span></span><br><span class="line">subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">hold</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="built_in">size</span>(X_K,<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">plot</span>(X_K(<span class="built_in">i</span>,:));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&quot;x1&quot;</span>,<span class="string">&quot;x2&quot;</span>)</span><br><span class="line"><span class="built_in">hold</span> off;</span><br><span class="line">subplot(<span class="number">2</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">hold</span>;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span> : <span class="built_in">size</span>(U_K,<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">plot</span>(U_K(<span class="built_in">i</span>,:));</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>MPC_Matrices.m</code></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[E,H]</span> = <span class="title">MPC_Matrices</span><span class="params">(A,B,Q,R,F,N)</span></span></span><br><span class="line">    n=<span class="built_in">size</span>(A,<span class="number">1</span>); <span class="comment">% Aæ˜¯n*nçŸ©é˜µ,å¾—åˆ°n</span></span><br><span class="line">    p=<span class="built_in">size</span>(B,<span class="number">2</span>); <span class="comment">% Bæ˜¯n*pçŸ©é˜µ,å¾—åˆ°p</span></span><br><span class="line">    M=[<span class="built_in">eye</span>(n);<span class="built_in">zeros</span>(N*n,n)]; <span class="comment">% åˆå§‹åŒ–MçŸ©é˜µ,MçŸ©é˜µæ˜¯(N+1)n*nçš„,</span></span><br><span class="line">                             <span class="comment">% å®ƒä¸Šé¢æ˜¯n*nä¸ª&quot;I&quot;,è¿™ä¸€æ­¥å…ˆæŠŠä¸‹åŠéƒ¨åˆ†å†™æˆ0</span></span><br><span class="line">    C=<span class="built_in">zeros</span>((N+<span class="number">1</span>)*n,N*p); <span class="comment">% åˆå§‹åŒ–CçŸ©é˜µ,è¿™ä¸€æ­¥ä»¤å®ƒæœ‰(N+1)n*NPä¸ª0</span></span><br><span class="line">    <span class="comment">% å®šä¹‰Må’ŒC</span></span><br><span class="line">    tmp=<span class="built_in">eye</span>(n); <span class="comment">% å®šä¹‰ä¸€ä¸ªn*n çš„ I çŸ©é˜µ</span></span><br><span class="line">    <span class="comment">% æ›´æ–°ï¼­å’ŒC</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:N <span class="comment">% å¾ªç¯,iä»1åˆ°N</span></span><br><span class="line">        rows =<span class="built_in">i</span>*n+(<span class="number">1</span>:n); <span class="comment">%å®šä¹‰å½“å‰è¡Œæ•°,ä»i*nå¼€å§‹ï¼Œå…±nè¡Œ</span></span><br><span class="line">        C(rows,:)=[tmp*B,C(rows-n, <span class="number">1</span>:<span class="keyword">end</span>-p)]; <span class="comment">%å°†cçŸ©é˜µå¡«æ»¡</span></span><br><span class="line">        tmp= A*tmp; <span class="comment">%æ¯ä¸€æ¬¡å°†tmpå·¦ä¹˜ä¸€æ¬¡A</span></span><br><span class="line">        M(rows,:)=tmp; <span class="comment">%å°†MçŸ©é˜µå†™æ»¡</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment">% å®šä¹‰Q_barå’ŒR_bar</span></span><br><span class="line">    Q_bar = kron(<span class="built_in">eye</span>(N),Q);</span><br><span class="line">    Q_bar = <span class="built_in">blkdiag</span>(Q_bar,F);</span><br><span class="line">    R_bar = kron(<span class="built_in">eye</span>(N),R);</span><br><span class="line">    <span class="comment">% è®¡ç®—G,E,H</span></span><br><span class="line">    G=M&#x27;*Q_bar*M; <span class="comment">% G: n*n</span></span><br><span class="line">    E=C&#x27;*Q_bar*M; <span class="comment">% E: NP*n</span></span><br><span class="line">    H=C&#x27;*Q_bar*C+R_bar; <span class="comment">% NP*NP</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>Prediction.m</code></p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">u_k</span>= <span class="title">Prediction</span><span class="params">(x_k,E,H,N,p)</span></span></span><br><span class="line">    U_k = <span class="built_in">zeros</span>(N*p,<span class="number">1</span>); <span class="comment">% NP x 1</span></span><br><span class="line">    U_k = quadprog(H,E*x_k);</span><br><span class="line">    u_k = U_k(<span class="number">1</span>:p,<span class="number">1</span>); <span class="comment">% å–ç¬¬ä¸€ä¸ªç»“æœ</span></span><br><span class="line"><span class="keyword">end</span> </span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/dafaah.png" alt="dafaah" style="zoom:50%;"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.robotsfan.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.robotsfan.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>ROS2â€”â€”æ•™ä½ å†™æ–°ç‰ˆLaunchæ–‡ä»¶</title>
    <link href="https://www.robotsfan.com/posts/7a5950c4.html"/>
    <id>https://www.robotsfan.com/posts/7a5950c4.html</id>
    <published>2022-05-04T10:30:00.000Z</published>
    <updated>2023-11-30T14:12:37.280Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ROS2â€”â€”æ•™ä½ å†™æ–°ç‰ˆLaunchæ–‡ä»¶"><a href="#ROS2â€”â€”æ•™ä½ å†™æ–°ç‰ˆLaunchæ–‡ä»¶" class="headerlink" title="ROS2â€”â€”æ•™ä½ å†™æ–°ç‰ˆLaunchæ–‡ä»¶"></a>ROS2â€”â€”æ•™ä½ å†™æ–°ç‰ˆLaunchæ–‡ä»¶</h1><h2 id="ä¸ºä»€ä¹ˆéœ€è¦launch"><a href="#ä¸ºä»€ä¹ˆéœ€è¦launch" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦launch"></a>ä¸ºä»€ä¹ˆéœ€è¦launch</h2><p>å¦‚éœ€å¯åŠ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªéœ€è¦æ‰§è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ros2 run package-name execute-name</span><br></pre></td></tr></table></figure><p>ä½†å¦‚æœéœ€è¦å¯åŠ¨å¤šä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªä¸€ä¸ªå¯åŠ¨éœ€è¦å¼€å¾ˆå¤šç»ˆç«¯è¾“å…¥å¾ˆå¤šæ¡å‘½ä»¤ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨launchæ–‡ä»¶æ‰¹é‡å¯åŠ¨ã€‚</p><h2 id="å¦‚ä½•ç¼–å†™launchæ–‡ä»¶"><a href="#å¦‚ä½•ç¼–å†™launchæ–‡ä»¶" class="headerlink" title="å¦‚ä½•ç¼–å†™launchæ–‡ä»¶"></a>å¦‚ä½•ç¼–å†™launchæ–‡ä»¶</h2><p>åœ¨ROS1ä¸­launchæ–‡ä»¶æ˜¯ä¸€ç§æ ¼å¼ä»¥<code>.launch</code>ç»“å°¾çš„xmlæ–‡æ¡£ï¼›è€Œåœ¨ROS2ä¸­æ¨èä½¿ç”¨Pythonæ–¹å¼ç¼–å†™launchæ–‡ä»¶ï¼Œæ­¤æ—¶çš„launchæ–‡ä»¶æ˜¯ä¸€ç§æ ¼å¼ä»¥<code>.launch.py</code>ç»“å°¾çš„Pythonè„šæœ¬ã€‚</p><h3 id="å¯åŠ¨èŠ‚ç‚¹"><a href="#å¯åŠ¨èŠ‚ç‚¹" class="headerlink" title="å¯åŠ¨èŠ‚ç‚¹"></a>å¯åŠ¨èŠ‚ç‚¹</h3><p>å¯¹äºä¸€ä¸ªåŸºç¡€çš„å¯åŠ¨èŠ‚ç‚¹çš„launchæ–‡ä»¶ï¼Œéœ€è¦å¼•ç”¨ä»¥ä¸‹åº“ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåä¸ºåš<code>generate_launch_description</code>çš„å‡½æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> launch <span class="keyword">import</span> LaunchDescription</span><br><span class="line"><span class="keyword">from</span> launch_ros.actions <span class="keyword">import</span> Node</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_launch_description</span>():</span></span><br><span class="line">    ......</span><br></pre></td></tr></table></figure><p><strong>ä¸‹æ–‡ä¸­æœªæ³¨æ˜çš„å‡åœ¨<code>generate_launch_description()</code>å‡½æ•°ä¸­è¿›è¡Œæ“ä½œã€‚</strong></p><p>åˆ›å»º<code>LaunchDescription</code>çš„å¯¹è±¡<code>ld</code>ï¼ˆåå­—ä»»æ„ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ld = LaunchDescription()</span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºä¸€ä¸ª<code>Actions.Node</code>å¯¹è±¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">example-node = Node(</span><br><span class="line">    package=<span class="string">&#x27;package-name&#x27;</span>, <span class="comment">#èŠ‚ç‚¹æ‰€åœ¨çš„åŠŸèƒ½åŒ…</span></span><br><span class="line">    namespace=<span class="string">&#x27;package-namespace&#x27;</span>, <span class="comment">#å‘½åç©ºé—´ã€‚å¦‚æœå­˜åœ¨åŒåèŠ‚ç‚¹ï¼Œè¿™ä¸€é€‰é¡¹ä¼šæœ‰ç”¨</span></span><br><span class="line">    executable=<span class="string">&#x27;execute-name/script-name.py&#x27;</span>, <span class="comment">#è¡¨ç¤ºè¦è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶åæˆ–è„šæœ¬åå­—.py</span></span><br><span class="line">    parameters=[&#123;<span class="string">&#x27;parameter-name&#x27;</span>: parameter-value&#125;], <span class="comment">#å‚æ•°</span></span><br><span class="line">    arguments=[<span class="string">&#x27;-xxx&#x27;</span>, xxx,  <span class="string">&#x27;-xxx&#x27;</span>, xxx ], <span class="comment">#å¯åŠ¨å‚æ•°</span></span><br><span class="line">    output=<span class="string">&#x27;screen&#x27;</span>, <span class="comment">#ç”¨äºå°†è¯é¢˜ä¿¡æ¯æ‰“å°åˆ°å±å¹•</span></span><br><span class="line">    name=<span class="string">&#x27;node-name&#x27;</span> <span class="comment">#è¡¨ç¤ºå¯åŠ¨åçš„èŠ‚ç‚¹åï¼Œå¯ä»¥æ²¡æœ‰</span></span><br><span class="line">    remappings=[ <span class="comment">#é‡æ˜ å°„</span></span><br><span class="line">        (<span class="string">&#x27;/xxx/xxx-new&#x27;</span>, <span class="string">&#x27;/xxx/xxx-old&#x27;</span>),</span><br><span class="line">]</span><br><span class="line">)</span><br><span class="line">example-node2 = Node(</span><br><span class="line">......</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>å°†ä¸Šé¢æ‰€æœ‰çš„Nodeå¯¹è±¡åŠ å…¥<code>ld</code>ï¼Œç„¶åè¿”å›</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ld.add_action(example-node)</span><br><span class="line">ld.add_action(example-node2)</span><br><span class="line"><span class="keyword">return</span> launch_description</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨shellå‘½ä»¤"><a href="#è°ƒç”¨shellå‘½ä»¤" class="headerlink" title="è°ƒç”¨shellå‘½ä»¤"></a>è°ƒç”¨shellå‘½ä»¤</h3><p>éœ€è¦æ·»åŠ å¤´æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> launch.actions <span class="keyword">import</span> ExecuteProcess</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>ExecuteProcess</code>è°ƒç”¨shellå‘½ä»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">example_cmd = ExecuteProcess(</span><br><span class="line">    cmd=[<span class="string">&#x27;some-cmd&#x27;</span>, <span class="string">&#x27;some-cmd&#x27;</span>], <span class="comment">#å‘½ä»¤ï¼Œç”¨é€—å·éš”å¼€</span></span><br><span class="line">    additional_env=&#123;<span class="string">&#x27;EXAMPLE_PATH&#x27;</span>: path&#125;, <span class="comment">#å¯ä»¥æ·»åŠ ä¸´æ—¶çš„ç¯å¢ƒå˜é‡</span></span><br><span class="line">    output=<span class="string">&#x27;screen&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ld.add_action(example_cmd)</span><br></pre></td></tr></table></figure><h3 id="è·å–è·¯å¾„"><a href="#è·å–è·¯å¾„" class="headerlink" title="è·å–è·¯å¾„"></a>è·å–è·¯å¾„</h3><p>ä½¿ç”¨<code>FindPackageShare</code>è·å–packageè·¯å¾„</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> launch_ros.substitutions <span class="keyword">import</span> FindPackageShare</span><br><span class="line">......</span><br><span class="line">package-name = â€˜example-packageâ€™</span><br><span class="line">package-path = FindPackageShare(package = package-name).find(package-name) </span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨<code>get_package_share_directory</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> ament_index_python.packages <span class="keyword">import</span> get_package_share_directory</span><br><span class="line">......</span><br><span class="line">package-name = â€˜example-packageâ€™</span><br><span class="line">package-path = get_package_share_directory(package-name),</span><br></pre></td></tr></table></figure><h3 id="è¿æ¥è·¯å¾„"><a href="#è¿æ¥è·¯å¾„" class="headerlink" title="è¿æ¥è·¯å¾„"></a>è¿æ¥è·¯å¾„</h3><h4 id="ä½¿ç”¨join"><a href="#ä½¿ç”¨join" class="headerlink" title="ä½¿ç”¨join"></a>ä½¿ç”¨join</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">...</span><br><span class="line"><span class="comment">#æ–‡ä»¶</span></span><br><span class="line">file-name = <span class="string">&#x27;example-file.xxx&#x27;</span></span><br><span class="line"><span class="comment">#å­—ç¬¦ä¸²å‰åŠ `f`è¡¨ç¤ºå¯ä»¥åœ¨å­—ç¬¦ä¸²é‡Œé¢ä½¿ç”¨ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥çš„å˜é‡å’Œè¡¨è¾¾å¼ï¼Œå¦‚å®šä¹‰å¥½çš„`file-name`</span></span><br><span class="line">file-path = os.path.join(package-path, <span class="string">f&#x27;example-folder/<span class="subst">&#123;file-name&#125;</span>&#x27;</span>)</span><br><span class="line"><span class="comment">#æˆ–è€…ä½¿ç”¨é€—å·éš”å¼€</span></span><br><span class="line">file-path = os.path.join(package-path, <span class="string">&#x27;example-folder&#x27;</span>, file-name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#è·¯å¾„</span></span><br><span class="line"><span class="built_in">dir</span>-path = os.path.join(package-path, <span class="string">&#x27;example-folder/&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ›¿æ¢"><a href="#ä½¿ç”¨æ›¿æ¢" class="headerlink" title="ä½¿ç”¨æ›¿æ¢"></a>ä½¿ç”¨æ›¿æ¢</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> launch.substitutions <span class="keyword">import</span> PathJoinSubstitution</span><br><span class="line">...</span><br><span class="line">PathJoinSubstitution([</span><br><span class="line">    FindPackageShare(<span class="string">&#x27;example-package&#x27;</span>),</span><br><span class="line">    <span class="string">&#x27;example-folder&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;example-file.xxx&#x27;</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure><h3 id="æ”¹å˜å‚æ•°"><a href="#æ”¹å˜å‚æ•°" class="headerlink" title="æ”¹å˜å‚æ•°"></a>æ”¹å˜å‚æ•°</h3><p>ä¸€èˆ¬éœ€è¦ç”¨åˆ°ä»¥ä¸‹ä¸¤ä¸ªæ¨¡å—</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> launch.substitutions <span class="keyword">import</span> LaunchConfiguration</span><br><span class="line"><span class="keyword">from</span> launch.actions <span class="keyword">import</span> DeclareLaunchArgument</span><br></pre></td></tr></table></figure><p><code>LaunchConfiguration</code>ç”¨äºåœ¨å˜é‡ä¸­å­˜å‚¨å¯åŠ¨å‚æ•°çš„å€¼å¹¶å°†å®ƒä»¬ä¼ é€’ç»™æ‰€éœ€çš„æ“ä½œï¼Œå…è®¸æˆ‘ä»¬åœ¨launchæ–‡ä»¶çš„ä»»ä½•éƒ¨åˆ†è·å–å¯åŠ¨å‚æ•°çš„å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example-cfg = LaunchConfiguration(<span class="string">&#x27;arg-name&#x27;</span>, default=<span class="string">&#x27;true&#x27;</span>)</span><br></pre></td></tr></table></figure><p><code>DeclareLaunchArgument</code>ç”¨äºå®šä¹‰å¯ä»¥ä»ä¸Šè¿°å¯åŠ¨æ–‡ä»¶æˆ–æ§åˆ¶å°ä¼ é€’çš„å¯åŠ¨å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">example-arg = DeclareLaunchArgument(</span><br><span class="line">    <span class="string">&#x27;arg-name&#x27;</span>,</span><br><span class="line">    default_value=<span class="string">&#x27;xxx&#x27;</span>,</span><br><span class="line">    description=<span class="string">&#x27;some description&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ld.add_action(example-arg)</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶"><a href="#å¯åŠ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶" class="headerlink" title="å¯åŠ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶"></a>å¯åŠ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶</h3><p>å‡è®¾å·²ç»å­˜åœ¨å¾ˆå¤šçš„å•ç‹¬çš„launchæ–‡ä»¶ç”¨äºå¯åŠ¨ä¸åŒçš„åŠŸèƒ½ï¼Œå¦‚æœéœ€è¦åŒæ—¶å¯åŠ¨è¿™äº›launchæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>IncludeLaunchDescription</code>åœ¨launchæ–‡ä»¶ä¸­åµŒå¥—å¯åŠ¨launchæ–‡ä»¶ï¼Œè¿™æ ·å¯ä»¥æé«˜å¤ç”¨ç‡ã€‚</p><p>éœ€è¦ä»¥ä¸‹ä¸¤ä¸ªå¤´æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> launch.actions <span class="keyword">import</span> IncludeLaunchDescription</span><br><span class="line"><span class="keyword">from</span> launch.launch_description_sources <span class="keyword">import</span> PythonLaunchDescriptionSource</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>IncludeLaunchDescription</code>åµŒå¥—launchæ–‡ä»¶ï¼Œå…¶ä¸­åŒæ ·å¯ä»¥ä½¿ç”¨ä¸Šæ–‡æ‰€è¿°çš„ä¼ é€’å‚æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">another-launch = IncludeLaunchDescription(</span><br><span class="line">    PythonLaunchDescriptionSource(</span><br><span class="line">    os.path.join(launch_file_dir, <span class="string">&#x27;launch-file-name.launch.py&#x27;</span>)</span><br><span class="line">    ),</span><br><span class="line">    launch_arguments=&#123;<span class="string">&#x27;arg-name&#x27;</span>: example-arg&#125;.items()</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ld.add_action(another-launch)</span><br></pre></td></tr></table></figure><h3 id="åœ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶ä¸­ä½¿ç”¨å‚æ•°"><a href="#åœ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶ä¸­ä½¿ç”¨å‚æ•°" class="headerlink" title="åœ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶ä¸­ä½¿ç”¨å‚æ•°"></a>åœ¨å¦ä¸€ä¸ªlaunchæ–‡ä»¶ä¸­ä½¿ç”¨å‚æ•°</h3><p>è¿™æ˜¯ä¸€ä¸ªå›°æ‰°äº†æˆ‘ä¸¤å¤©çš„ï¼Œæ¯”è¾ƒéº»çƒ¦çš„ç®€å•é—®é¢˜ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®ä¾‹ï¼šè¿™ä¸ªlaunchæ–‡ä»¶æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²æ ¼å¼çš„è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå…¶ä¸­çš„<code>robot_state_publisher</code>éœ€è¦ä¼ å…¥<code>robot_description</code>ä½œä¸ºå‚æ•°ï¼Œè€Œè¿™ä¸ªå‚æ•°éœ€è¦ä½¿ç”¨<code>open()</code>ï¼Œä¹Ÿå°±æ˜¯éœ€è¦é‚£ä¸ªè·¯å¾„å‚æ•°ã€‚æˆ‘ä»¬è‡ªç„¶è€Œç„¶ä¼šæƒ³åˆ°ä½¿ç”¨<code>LaunchConfiguration</code>ï¼Œä½†æ˜¯å½“ä½ è¯•å›¾è·å–<code>urdf_path_cfg</code>çš„æ—¶å€™ä¼šå‘ç°è¿™æ ¹æœ¬ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å…·ä½“è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> launch <span class="keyword">import</span> LaunchDescription</span><br><span class="line"><span class="keyword">from</span> launch.actions <span class="keyword">import</span> DeclareLaunchArgument</span><br><span class="line"><span class="keyword">from</span> launch.substitutions <span class="keyword">import</span> LaunchConfiguration</span><br><span class="line"><span class="keyword">from</span> launch_ros.actions <span class="keyword">import</span> Node</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> launch.actions <span class="keyword">import</span> OpaqueFunction</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">launch_setup</span>(<span class="params">context, *args, **kwargs</span>):</span></span><br><span class="line">    use_sim_time_cfg = LaunchConfiguration(<span class="string">&#x27;use_sim_time&#x27;</span>)</span><br><span class="line">    urdf_path_cfg = LaunchConfiguration(<span class="string">&#x27;urdf_path&#x27;</span>)</span><br><span class="line">    urdf_path = urdf_path_cfg.perform(context)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;\033[92m&#x27;</span> + <span class="string">&quot;robot_state_publisher: Use urdf dir: &quot;</span> + urdf_path + <span class="string">&#x27;\033[0m&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(urdf_path, <span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> infp:</span><br><span class="line">        robot_desc = infp.read()</span><br><span class="line"></span><br><span class="line">    robot_state_publisher_node = Node(</span><br><span class="line">        package=<span class="string">&#x27;robot_state_publisher&#x27;</span>,</span><br><span class="line">        executable=<span class="string">&#x27;robot_state_publisher&#x27;</span>,</span><br><span class="line">        name=<span class="string">&#x27;robot_state_publisher&#x27;</span>,</span><br><span class="line">        output=<span class="string">&#x27;screen&#x27;</span>,</span><br><span class="line">        parameters=[&#123;</span><br><span class="line">            <span class="string">&#x27;use_sim_time&#x27;</span>: use_sim_time_cfg,</span><br><span class="line">            <span class="string">&#x27;robot_description&#x27;</span>: robot_desc</span><br><span class="line">        &#125;]</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">        robot_state_publisher_node,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_launch_description</span>():</span></span><br><span class="line"></span><br><span class="line">    ld = LaunchDescription()</span><br><span class="line"></span><br><span class="line">    use_sim_time_arg = DeclareLaunchArgument(</span><br><span class="line">        <span class="string">&#x27;use_sim_time&#x27;</span>,</span><br><span class="line">        default_value=<span class="string">&#x27;true&#x27;</span>,</span><br><span class="line">        description=<span class="string">&#x27;Use simulation (Gazebo) clock if true&#x27;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    urdf_path_arg = DeclareLaunchArgument(</span><br><span class="line">        <span class="string">&#x27;urdf_path&#x27;</span>,</span><br><span class="line">        default_value=<span class="string">&#x27;robot.urdf&#x27;</span>,</span><br><span class="line">        description=<span class="string">&#x27;urdf_path&#x27;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    ld.add_action(urdf_path_arg)</span><br><span class="line">    ld.add_action(use_sim_time_arg)</span><br><span class="line">    ld.add_action(OpaqueFunction(function=launch_setup))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ld</span><br></pre></td></tr></table></figure><p>è¿™ç§å†™æ³•æˆ‘ä¸ªäººè®¤ä¸ºæå…¶ä¸ä¼˜é›…ï¼Œä½†æ˜¯ç¡®å®èƒ½è§£å†³å®é™…é—®é¢˜ã€‚</p><p>å¼ºçƒˆå»ºè®®ROSåŠ å…¥è·å–å‚æ•°å†…å®¹çš„æ–¹æ³•ï¼ï¼ï¼ï¼ï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ROS2å­¦ä¹ " scheme="https://www.robotsfan.com/categories/ROS2%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="ROS2" scheme="https://www.robotsfan.com/tags/ROS2/"/>
    
  </entry>
  
  <entry>
    <title>æ‰‹æ’•å¡å°”æ›¼æ»¤æ³¢å™¨</title>
    <link href="https://www.robotsfan.com/posts/b4727fbe.html"/>
    <id>https://www.robotsfan.com/posts/b4727fbe.html</id>
    <published>2022-04-14T14:36:00.000Z</published>
    <updated>2022-04-15T12:12:19.151Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ‰‹æ’•å¡å°”æ›¼æ»¤æ³¢å™¨"><a href="#æ‰‹æ’•å¡å°”æ›¼æ»¤æ³¢å™¨" class="headerlink" title="æ‰‹æ’•å¡å°”æ›¼æ»¤æ³¢å™¨"></a>æ‰‹æ’•å¡å°”æ›¼æ»¤æ³¢å™¨</h1><p>å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆKalman Filterï¼‰ï¼Œä»å­—é¢æ„æ€ä¸Šæ¥çœ‹ï¼Œâ€œFilteræ»¤æ³¢å™¨â€ä¸€è¯å¹¶ä¸èƒ½å¾ˆå¥½åœ°ä½“ç°å…¶ç‰¹æ€§ã€‚å¡å°”æ›¼æ»¤æ³¢å™¨ç”¨ä¸€å¥è¯æ¥è¯´å°±æ˜¯â€œOptimal Recursive Data-Processing Algorithmâ€ï¼Œå³ä¸ºâ€œæœ€ä¼˜åŒ– é€’å½’ æ•°å­—å¤„ç† ç®—æ³•â€ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ç§è§‚æµ‹å™¨ï¼Œè€Œä¸æ˜¯ä¸€èˆ¬æ„ä¹‰ä¸Šçš„æ»¤æ³¢å™¨ã€‚å¡å°”æ›¼æ»¤æ³¢å™¨çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå°¤å…¶æ˜¯åœ¨å¯¼èˆªä¸­ã€‚å®ƒçš„å¹¿æ³›åº”ç”¨æ˜¯å› ä¸ºä¸–ç•Œä¸­å­˜åœ¨å¤§é‡çš„ä¸ç¡®å®šæ€§ï¼Œå½“æˆ‘ä»¬æè¿°ä¸€ä¸ªç³»ç»Ÿæ—¶ï¼Œè¿™ä¸ªä¸ç¡®å®šæ€§ä¸»è¦ä½“ç°åœ¨ä¸‰ä¸ªæ–¹é¢ï¼š</p><ol><li>ä¸å­˜åœ¨å®Œç¾çš„æ•°å­¦æ¨¡å‹</li><li>ç³»ç»Ÿçš„æ‰°åŠ¨ä¸å¯æ§ï¼Œä¹Ÿå¾ˆéš¾å»ºæ¨¡</li><li>æµ‹é‡ä¼ æ„Ÿå™¨å­˜åœ¨è¯¯å·®</li></ol><h2 id="é€’å½’ç®—æ³•"><a href="#é€’å½’ç®—æ³•" class="headerlink" title="é€’å½’ç®—æ³•"></a>é€’å½’ç®—æ³•</h2><p>ä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå¤šæ¬¡ç”¨åŒä¸€æŠŠå°ºå­æµ‹é‡åŒä¸€æšç¡¬å¸çš„ç›´å¾„ï¼Œç”¨ $z_k$ è¡¨ç¤ºç¬¬kæ¬¡çš„æµ‹é‡ç»“æœã€‚ç”±äºç§ç§è¯¯å·®ï¼Œæµ‹é‡å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\begin{aligned}z_1=50.1mm \\z_2=50.4mm \\z_3=50.2mm\end{aligned}</script><p>æ­¤æ—¶å¦‚æœè¦ä¼°è®¡çœŸå®ç»“æœï¼Œè‡ªç„¶è€Œç„¶åœ°ä¼šæƒ³åˆ°å–å¹³å‡å€¼ã€‚ç”¨ $\hat{x}_k$ è¡¨ç¤ºç¬¬kæ¬¡çš„ä¼°è®¡å€¼ï¼Œå¯ä»¥å¾—åˆ°ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\hat{x}_k &= \frac{1}{k}(z_1+z_2+\cdots+z_k)\\          &= \frac{1}{k}(z_1+z_2+\cdots+z_{k-1}) + \frac{1}{k}(z_k)\\          &= \frac{k-1}{k}\frac{1}{k-1}(z_1+z_2+\cdots+z_{k-1}) + \frac{1}{k}(z_k)\\          &= \frac{k-1}{k}\hat{x}_{k-1} + \frac{1}{k}(z_k)\\          &= \hat{x}_{k-1} + \frac{1}{k}(z_k-\hat{x}_{k-1})\end{aligned}</script><p>ä¸Šå¼ä¸­ï¼Œç¬¬ä¸‰è¡Œ $\frac{1}{k-1}(z_1+z_2+\cdots+z_{k-1})$ å°±æ˜¯ $k-1$ æ¬¡çš„å¹³å‡å€¼ $\hat{x}_{k-1}$ </p><p>è§‚å¯Ÿæœ€åä¸€è¡Œç»“è®ºï¼Œ$k\uparrow, \frac{1}{k-1}\to0,\hat{x}_k\to\hat{x}_{k-1}$ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œéšç€kçš„å¢åŠ ï¼Œæ­¤æ—¶æ‹¥æœ‰äº†å¤§é‡çš„æ•°æ®ï¼Œå¯¹ä¼°è®¡çš„ç»“æœå°±æ¯”è¾ƒæœ‰ä¿¡å¿ƒäº†ï¼Œæµ‹é‡çš„ç»“æœå°±ä¸æ˜¯å¾ˆé‡è¦äº†ã€‚ç›¸åï¼Œå¦‚æœkæ¯”è¾ƒå°ï¼Œ $\frac{1}{k-1}$ å°±ä¼šæ¯”è¾ƒå¤§ï¼Œæµ‹é‡ç»“æœ $z_k$ å°±ä¼šèµ·åˆ°å¾ˆå¤§çš„ä½œç”¨ï¼Œå°¤å…¶æ˜¯æµ‹é‡ç»“æœå’Œä¼°è®¡å€¼å·®è·æ¯”è¾ƒå¤§çš„æ—¶å€™ã€‚</p><p>ä»¤ $K_k=\frac{1}{k-1}$ ï¼Œåˆ™æ­¤æ—¶å…¬å¼å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\hat{x}_k = \hat{x}_{k-1} + K_k(z_k-\hat{x}_{k-1})</script><p>ä¸Šå¼è¡¨ç¤ºçš„å«ä¹‰ä¸ºï¼šå½“å‰çš„ä¼°è®¡å€¼ = ä¸Šä¸€æ¬¡çš„ä¼°è®¡å€¼ + ç³»æ•° * ( å½“å‰æµ‹é‡å€¼ - ä¸Šä¸€æ¬¡çš„ä¼°è®¡å€¼ ) ï¼Œå…¶ä¸­çš„ $K_k$ å°±æ˜¯å¡å°”æ›¼å¢ç›Š/å› æ•°ï¼ˆKalman Gainï¼‰ï¼Œé€šè¿‡è¿™ä¸ªå…¬å¼å¯ä»¥çœ‹å‡ºï¼Œæ–°çš„ä¼°è®¡å€¼ $\hat{x}_k$ ä¸ä¸Šä¸€æ¬¡çš„ä¼°è®¡å€¼ $\hat{x}_{k-1}$ æœ‰å…³ï¼Œä¸Šä¸€æ¬¡çš„åˆä¸ä¸Šä¸Šæ¬¡çš„æœ‰å…³ï¼Œè¿™å°±æ˜¯ä¸€ç§é€’å½’æ€æƒ³ï¼ˆRecursiveï¼‰ï¼Œè¿™ä¹Ÿæ˜¯å¡å°”æ›¼æ»¤æ³¢å™¨çš„ä¼˜åŠ¿ï¼Œä»–ä¸éœ€è¦è¿½æº¯å¾ˆä¹…ä»¥å‰çš„æ•°æ®ï¼Œåªéœ€è¦ä¸Šä¸€æ¬¡çš„å°±å¯ä»¥ã€‚ä¸‹é¢æ¥è®¨è®ºä¸€ä¸‹è¿™ä¸ª $K_k$ ï¼š</p><p>å¼•å…¥ä¸¤ä¸ªè¯¯å·®ï¼š</p><ol><li>ä¼°è®¡è¯¯å·® $e_{EST}$ ï¼ˆeä»£è¡¨è¯¯å·®errorï¼ŒESTä»£è¡¨ä¼°è®¡estimateï¼‰</li><li>æµ‹é‡è¯¯å·® $e_{MEA}$ ï¼ˆeä»£è¡¨è¯¯å·®errorï¼ŒMEAä»£è¡¨æµ‹é‡measurementï¼‰</li></ol><p>åˆ™ $K_k$ å¯ä»¥è¡¨ç¤ºä¸º</p><script type="math/tex; mode=display">K_k = \frac{e_{EST_{k-1}}}{e_{EST_{k-1}}+e_{MEA_{k}}}</script><p>è¿™ä¸ªå…¬å¼æ˜¯å¡å°”æ›¼æ»¤æ³¢ä¸­çš„æ ¸å¿ƒå…¬å¼ï¼Œå…·ä½“çš„æ¨å¯¼åæ–‡ä¼šè®²åˆ°ã€‚ä¸‹é¢å¯¹è¿™ä¸ªå…¬å¼è¿›è¡Œè®¨è®ºã€‚åœ¨kæ—¶åˆ»ï¼Œ</p><ol><li>å½“ $e_{EST_{k-1}} \gg e_{MEA_{k}}$ ï¼Œ $K_k\rightarrow1$ ï¼Œæ­¤æ—¶ $\hat{x}_k = z_k$ ï¼Œè¿™è¯´æ˜å½“ç¬¬k-1æ¬¡çš„ä¼°è®¡è¯¯å·®è¿œå¤§äºç¬¬kæ¬¡çš„æµ‹é‡è¯¯å·®æ—¶ï¼Œç¬¬kæ¬¡çš„ä¼°è®¡å€¼å¾ˆè¶‹è¿‘äºæµ‹é‡å€¼ã€‚ï¼ˆä¼°è®¡çš„è¯¯å·®å¤§ï¼Œæµ‹é‡çš„è¯¯å·®å°ï¼Œæ›´ä¿¡ä»»æµ‹é‡å€¼ï¼‰</li><li>å½“ $e_{EST_{k-1}} \ll e_{MEA_{k}}$ ï¼Œ $K_k\rightarrow 0$ ï¼Œæ­¤æ—¶ $\hat{x}_k = \hat{x}_{k-1}$ ï¼Œè¿™è¯´æ˜å½“ç¬¬k-1æ¬¡çš„ä¼°è®¡è¯¯å·®è¿œå°äºç¬¬kæ¬¡çš„æµ‹é‡è¯¯å·®æ—¶ï¼Œç¬¬kæ¬¡çš„ä¼°è®¡å€¼å¾ˆè¶‹è¿‘äºæµ‹é‡å€¼ã€‚ï¼ˆä¼°è®¡çš„è¯¯å·®å°ï¼Œæµ‹é‡çš„è¯¯å·®å¤§ï¼Œæ›´ä¿¡ä»»ä¼°è®¡å€¼ï¼‰</li></ol><p>è¿ç”¨ä»¥ä¸ŠçŸ¥è¯†ï¼Œè§£å†³ä¸€ä¸ªå®é™…é—®é¢˜å¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼š</p><ol><li>è®¡ç®—å¡å°”æ›¼å¢ç›Š $K_k$ ï¼Œå…¬å¼è§å‰æ–‡</li><li>è®¡ç®—ä¼°ç®—å€¼ $\hat{x}_k$ ï¼Œå…¬å¼è§å‰æ–‡</li><li>æ›´æ–°ä¼°è®¡è¯¯å·® $e_{EST_{k}} = (1-K_k)e_{EST_{k-1}}$ ï¼Œæ­¤å…¬å¼æ¨å¯¼è§åæ–‡ã€‚</li></ol><p>å†çœ‹å‰æ–‡æµ‹é‡ç¡¬å¸ç›´å¾„çš„ä¾‹å­ï¼Œå®é™…é•¿åº¦ $x=50mm$ ï¼Œå¯¹äºç¬¬ä¸€æ¬¡æµ‹é‡ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\hat{x}_0=40mm \\e_{EST_{0}}=5mm \\z_1=51mm\\e_{MEA_{k}}=3mm\end{aligned}</script><p>ä¼°è®¡å€¼æ˜¯æ˜¯éšä¾¿ä¼°è®¡çš„ä¸€ä¸ªå€¼ï¼›ä¼°è®¡è¯¯å·®éšä¾¿ç»™ä¸€ä¸ªæ•°ï¼›æµ‹é‡å€¼æ˜¯å®é™…æµ‹é‡å¾—åˆ°çš„ï¼›ç”±äºæµ‹é‡å·¥å…·ä¸å˜ï¼Œæµ‹é‡è¯¯å·®æ˜¯ä¸€ä¸ªæ’å®šå€¼ã€‚æ¥ä¸‹æ¥è¿›è¡Œé€’å½’ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220414223222370.png" alt="image-20220414223222370"></p><p>è“è‰²æ˜¯æµ‹é‡å€¼ $z_k$ ï¼Œçº¢è‰²ä¸ºä¼°è®¡å€¼ $\hat{x}_k$ ï¼Œå¯ä»¥çœ‹åˆ°ç»è¿‡åå¤è¿­ä»£ï¼Œä¼°è®¡å€¼è¶Šæ¥è¶Šæ¥è¿‘å®é™…å€¼ã€‚è¿™å°±æ˜¯å¡å°”æ›¼æ»¤æ³¢å™¨çš„é€’å½’æ€æƒ³ã€‚</p><h2 id="æ•°å­¦åŸºç¡€"><a href="#æ•°å­¦åŸºç¡€" class="headerlink" title="æ•°å­¦åŸºç¡€"></a>æ•°å­¦åŸºç¡€</h2><h3 id="æ•°æ®èåˆ"><a href="#æ•°æ®èåˆ" class="headerlink" title="æ•°æ®èåˆ"></a>æ•°æ®èåˆ</h3><p>ä¸‹é¢ä¸¾ä¾‹è¯´æ˜æ•°æ®èåˆï¼ˆData Fusionï¼‰</p><p>åˆ†åˆ«ç”¨ä¸¤ä¸ªç§°ç§°ä¸€ä¸ªä¸œè¥¿ï¼Œå¾—åˆ°ä¸¤ä¸ªç»“æœï¼Œåˆ†åˆ«ä¸º</p><script type="math/tex; mode=display">\begin{aligned}z_1=30mm \\z_2=32mm \end{aligned}</script><p>ä¸¤ä¸ªç§°éƒ½æœ‰è¯¯å·®ï¼Œä¸¤ä¸ªç§°çš„æ ‡å‡†å·®ï¼ˆStandard Deviationï¼‰åˆ†åˆ«ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}\sigma_1=2g \\\sigma_2=4g \end{aligned}</script><p>ä»–ä»¬å‡ç¬¦åˆæ­£æ€åˆ†å¸ƒ/é«˜æ–¯åˆ†å¸ƒï¼ˆNatural/Gaussin Distributionï¼‰</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220415103427679.png" alt="image-20220415103427679"></p><p>å¦‚æœç”¨è¿™ä¸¤ä¸ªç»“æœå»ä¼°è®¡çœŸå®å€¼ $\hat{z}=?$ ï¼Œå¯ä»¥ç”¨åˆ°ä¸Šä¸€èŠ‚çš„æ€æƒ³ï¼Œåˆ™</p><script type="math/tex; mode=display">\begin{array}{c}\hat{z} = z_{1} + K(z_2-z_{1}),k\in[0,1] \\k=0,\hat{z}=z_1\\ k=1,\hat{z}=z_2\end{array}</script><p>æ±‚kä½¿å¾— $\sigma_{\hat{z}}$ æœ€å°ï¼Œä¹Ÿå°±æ˜¯ä½¿å¾—æ–¹å·® $Var(\hat{z})$ æœ€å°</p><script type="math/tex; mode=display">\begin{aligned}\sigma_{\hat{z}}^2&=Var(\hat{z})\\                &=Var(z_1 + K(z_2-z_1))\\                &=Var(z_1 -Kz_1+ Kz_2)\\                &=Var((1-K)z_1+ Kz_2)\\                &=Var((1-K)z_1)+Var(Kz_2)\\                &=(1-K)^2Var(z_1)+K^2Var(z_2)\\                &=(1-K)^2\sigma_1^2+K^2\sigma_2^2\\\end{aligned}</script><p>å¯ä»¥çœ‹åˆ°ï¼Œç¬¬å››è¡Œä¸­ $(1-K)z_1$ å’Œ $Kz_2$ æ˜¯äº’ç›¸ç‹¬ç«‹çš„ï¼Œå› ä¸ºä¸¤ä¸ªç§°çš„ç»“æœä¸ä¼šäº’ç›¸å½±å“ï¼Œæ‰€ä»¥ç”±äºæ–¹å·®çš„æ€§è´¨å¯ä»¥å†™æˆä¸¤ä¸ªç‹¬ç«‹çš„æ–¹å·®ã€‚è¦æ±‚è¿™ä¸ªå¼å­çš„æœ€å°å€¼ï¼Œå°±è¦å¯¹Kæ±‚å¯¼å¹¶ä»¤å¯¼æ•°ç­‰äº0ã€‚å¯ä»¥è§£å‡ºKï¼š</p><script type="math/tex; mode=display">\begin{array}{c}\frac{d\sigma_{\hat{z}}^2}{dK}=0\\-2(1-K)\sigma_1^2+2K\sigma_2^2=0\\K=\frac{\sigma_1^2}{\sigma_1^2+\sigma_2^2}=\frac{2^2}{2^2+4^2}=0.2\end{array}</script><p>å°†Kå¸¦å…¥ä¸Šé¢çš„å¼å­ï¼Œå¾—åˆ° $\hat{z}=30.4$ ã€‚æ­¤æ—¶ä¸ºæœ€ä¼˜è§£ã€‚è®¡ç®—æ­¤æ—¶çš„æ ‡å‡†å·® $\sigma_{\hat{z}}=1.79$ ï¼Œç»˜å‡ºæ­£æ€åˆ†å¸ƒå›¾ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220415105843056.png" alt="image-20220415105843056"></p><p>å¾—åˆ°æ¯”ä¸¤ä¸ªå›¾å½¢æ›´é«˜æ›´ç˜¦çš„å›¾å½¢ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«æ•°æ®èåˆã€‚</p><h3 id="åæ–¹å·®çŸ©é˜µ"><a href="#åæ–¹å·®çŸ©é˜µ" class="headerlink" title="åæ–¹å·®çŸ©é˜µ"></a>åæ–¹å·®çŸ©é˜µ</h3><p>åæ–¹å·®çŸ©é˜µï¼ˆCovarince Matrixï¼‰æ˜¯æŠŠæ–¹å·®å’Œåæ–¹å·®åœ¨ä¸€ä¸ªçŸ©é˜µä¸­è¡¨ç¤ºå‡ºæ¥ï¼Œä½“ç°äº†å˜é‡é—´çš„è”åŠ¨å…³ç³»ã€‚ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220415121131214.png" alt="image-20220415121131214"></p><p>ä»¤èº«é«˜ä¸ºxï¼Œä½“é‡ä¸ºyï¼Œå¹´é¾„ä¸ºzï¼Œåˆ†åˆ«è®¡ç®—å¹³å‡å€¼ï¼Œæ–¹å·®å’Œåæ–¹å·®ï¼ˆæ‹¿xä¸¾ä¾‹ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\sigma_x^2&=\frac{1}{3}((179-180.3)^2\\&\qquad+(187-180.3)^2\\&\qquad+(175-180.3)^2)\\&=24.89\\\sigma_x\sigma_y&=\frac{1}{3}((179-180.3)(74-75)\\&\qquad+(187-180.3)(80-75)\\&\qquad+(175-180.3)(71-75))\\&=18.7=\sigma_y\sigma_x\end{aligned}</script><p>è§‚å¯Ÿåæ–¹å·®çš„æ¯ä¸€é¡¹ï¼Œå¦‚æœä¸¤ä¸ªæ‹¬å·å†…éƒ½ä¸ºè´Ÿæ•°ï¼Œç›¸ä¹˜ä¸ºæ­£æ•°ï¼›ä¸¤ä¸ªæ‹¬å·å†…éƒ½ä¸ºæ­£æ•°ï¼Œç›¸ä¹˜ä»ä¸ºæ­£æ•°ï¼›ä½†ä¸€æ­£ä¸€è´Ÿç›¸ä¹˜å¾—åˆ°è´Ÿæ•°ã€‚æ‰€ä»¥æœ€ååŠ åœ¨ä¸€èµ·çš„ç»“æœå¦‚æœæ˜¯æ­£æ•°ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªå˜é‡çš„å˜åŒ–æ–¹å‘æ˜¯ä¸€æ ·çš„ï¼›å¦‚æœæ˜¯è´Ÿæ•°ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªå˜é‡çš„å˜åŒ–æ–¹å‘æ˜¯ç›¸åçš„ã€‚</p><p>åæ–¹å·®çŸ©é˜µè¡¨ç¤ºå½¢å¼ä¸ºï¼š</p><script type="math/tex; mode=display">P = \begin{bmatrix}    \sigma_x^2 & \sigma_x\sigma_y & \sigma_x\sigma_z \\    \sigma_y\sigma_x & \sigma_y^2 & \sigma_y\sigma_z \\    \sigma_z\sigma_x & \sigma_z\sigma_y & \sigma_z^2  \end{bmatrix}</script><p>å¦‚æœéœ€è¦ç¼–ç¨‹å®ç°ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ±‚å¾—Pï¼ˆå…¶ä¸­aä¸ºè¿‡æ¸¡çŸ©é˜µï¼‰</p><script type="math/tex; mode=display">\begin{aligned}a & = \begin{bmatrix}    x_1 & y_1 & z_1 \\    x_2 & y_2 & z_2 \\    x_3 & y_3 & z_3  \end{bmatrix}-\frac{1}{3}\begin{bmatrix}    1 & 1 & 1 \\    1 & 1 & 1 \\    1 & 1 & 1  \end{bmatrix}\begin{bmatrix}    x_1 & y_1 & z_1 \\    x_2 & y_2 & z_2 \\    x_3 & y_3 & z_3  \end{bmatrix}\\P & = \frac{1}{3}a^Ta\end{aligned}</script><p>å¤šå–ä¸€äº›æ•°æ®ï¼Œå¾—åˆ°åæ–¹å·®çŸ©é˜µï¼Œå¯ä»¥åˆ©ç”¨åæ–¹å·®çŸ©é˜µåˆ†æå„ä¸ªæ•°æ®ä¹‹é—´çš„å…³ç³»ï¼›</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220415113508938.png" alt></p><p>ä»åæ–¹å·®çŸ©é˜µä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¯¹è§’çº¿ä¸Šçš„æ•°ä¸ºæ–¹å·®ï¼Œè¿™äº›æ•°æ®æ¯”è¾ƒå¤§ï¼Œè¯´æ˜äº†è¿™äº›å˜é‡ä¹‹é—´è·¨åº¦æ¯”è¾ƒå¤§ã€‚å‰©ä¸‹çš„æ•°æ®ä¸ºåæ–¹å·®ï¼Œä½“é‡å’Œèº«é«˜çš„åæ–¹å·®æ¯”è¾ƒå¤§ï¼Œè¯´æ˜ä»–ä»¬æ˜¯æ­£ç›¸å…³çš„ï¼Œèº«é«˜å¢åŠ ä½“é‡ä¹Ÿå¢åŠ ï¼›è€Œå¹´é¾„å’Œå…¶ä½™ä¸¤è€…çš„åæ–¹å·®æ¯”è¾ƒå°ï¼Œè¯´æ˜ä»–ä»¬ä¹‹é—´çš„ç›¸å…³æ€§æ¯”è¾ƒå°ã€‚</p><h3 id="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"><a href="#çŠ¶æ€ç©ºé—´æ–¹ç¨‹" class="headerlink" title="çŠ¶æ€ç©ºé—´æ–¹ç¨‹"></a>çŠ¶æ€ç©ºé—´æ–¹ç¨‹</h3><p>çŠ¶æ€ç©ºé—´è¡¨è¾¾ï¼ˆState Space Representationï¼‰ï¼Œç°ä»£æ§åˆ¶ç†è®ºå°±æ˜¯ä»¥çŠ¶æ€ç©ºé—´æ–¹ç¨‹ä¸ºåŸºç¡€çš„ã€‚ä»¥å¼¹ç°§æŒ¯åŠ¨é˜»å°¼ç³»ç»Ÿä¸ºä¾‹ï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220415113931219.png" alt="image-20220415113931219"></p><p>åŠ¨æ€æ–¹ç¨‹è¡¨è¾¾å¼ä¸ºï¼š</p><script type="math/tex; mode=display">m\ddot{x}+B\dot{x}+kx=F</script><p>å°†Få®šä¹‰ä¸ºuï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿçš„è¾“å…¥ï¼ˆInputï¼‰ã€‚å°†å…¶è½¬åŒ–æˆçŠ¶æ€ç©ºé—´è¡¨è¾¾å½¢å¼ï¼Œå®šä¹‰ä¸¤ä¸ªçŠ¶æ€ï¼ˆStateï¼‰å˜é‡ $x_1=x$ ï¼Œ $x_2=\dot{x}$ ï¼Œåˆ™</p><script type="math/tex; mode=display">\begin{aligned}\dot{x_1}&=x_2\\\dot{x_2}&=\ddot{x}\\         &=\frac{1}{m}u-\frac{B}{m}\dot{x}-\frac{k}{m}x\\         &=\frac{1}{m}u-\frac{B}{m}x_2-\frac{k}{m}x_1\end{aligned}</script><p>è¿™æ ·å°±ç”¨ä¸¤ä¸ªä¸€é˜¶å¾®åˆ†æ–¹ç¨‹è¡¨è¾¾å‡ºæ¥äº†ã€‚å®šä¹‰ä¸¤ä¸ªæµ‹é‡ï¼ˆMeansurementï¼‰å˜é‡ï¼Œä½ç½® $z_1=x=x_1$ ï¼Œé€Ÿåº¦ $z_2=\dot{x}=x_2$ </p><p>å°†ä¸Šé¢çš„å¼å­æ”¹å†™æˆçŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\begin{aligned}\begin{bmatrix}    \dot{x_1} \\    \dot{x_2} \end{bmatrix} & = \begin{bmatrix}    0            & 1 \\  -\frac{k}{m} & -\frac{B}{m}\end{bmatrix}\begin{bmatrix}    x_1 \\    x_2 \end{bmatrix}+\begin{bmatrix}    0 \\    \frac{1}{m} \end{bmatrix}u\\\begin{bmatrix}    z_1 \\    z_2 \end{bmatrix} & = \begin{bmatrix}    1 & 0 \\  0 & 1\end{bmatrix}\begin{bmatrix}    x_1 \\    x_2 \end{bmatrix}\end{aligned}</script><p>å½’çº³å‡ºçŠ¶æ€ç©ºé—´çš„è¡¨è¾¾å½¢å¼ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}\dot{x}(t)=Ax(t)+Bu(t)\\z(t)=Hx(t)\end{array}</script><p>è¿™æ˜¯ä¸€ç§è¿ç»­çš„è¡¨è¾¾å½¢å¼ï¼Œ $\dot{x}(t)$ ä¸ºxå¯¹æ—¶é—´çš„å¯¼æ•°ï¼Œä½“ç°äº†xéšæ—¶é—´çš„å˜åŒ–ã€‚</p><p>å¦‚æœå†™æˆç¦»æ•£å½¢å¼(æœ¬èŠ‚ä¸æ·±å…¥è®²è§£ç¦»æ•£å‹ï¼Œåªåšäº†è§£)ï¼Œå…¶ä¸­ä¸‹æ ‡ $k-1,k,k+1$ é‡Œé¢çš„1ä»£è¡¨ä¸€ä¸ªæ—¶é—´å•ä½ï¼Œå³ä¸ºé‡‡æ ·æ—¶é—´ï¼ˆSample Timeï¼‰ï¼Œè¿™ç§å½¢å¼ä½“ç°äº†ä¸Šä¸€æ­¥åˆ°è¿™ä¸€æ­¥çš„ä¸€ç§å˜åŒ–ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}x_k=Ax_{k-1}+Bu_{k-1}\\z_k=Hx_k\end{array}</script><p>å¦‚æœå¢åŠ ä¸€äº›å¼€å¤´æåˆ°çš„ä¸ç¡®å®šæ€§ï¼Œå…¶ä¸­ $w_{k-1}$ ä¸ºè¿‡ç¨‹å™ªéŸ³ï¼ˆProcess Noiseï¼‰ï¼Œ $v_k$ ä¸ºæµ‹é‡å™ªéŸ³ï¼ˆMeansurement Noiseï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{array}{l}x_k=Ax_{k-1}+Bu_{k-1}+w_{k-1}\\z_k=Hx_k+v_k\end{array}</script><p>ä¹Ÿå°±æ˜¯è¯´å½“ä¼°è®¡ç»“æœ $x_k$ ä¸å‡†ç¡®ï¼Œæµ‹é‡ç»“æœ $z_k$ ä¹Ÿä¸å‡†ç¡®çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ä¼°è®¡ä¸€ä¸ªç²¾ç¡®çš„ $\hat{x}_k$ ï¼Ÿè¿™å°±æ˜¯å¡å°”æ›¼æ»¤æ³¢å™¨æ‰€è¦è§£å†³çš„é—®é¢˜ã€‚</p><h2 id="å¡å°”æ›¼å¢ç›Šæ•°å­¦æ¨å¯¼"><a href="#å¡å°”æ›¼å¢ç›Šæ•°å­¦æ¨å¯¼" class="headerlink" title="å¡å°”æ›¼å¢ç›Šæ•°å­¦æ¨å¯¼"></a>å¡å°”æ›¼å¢ç›Šæ•°å­¦æ¨å¯¼</h2><p>åœ¨ä¸Šæ–‡çš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹ä¸­ï¼Œ $x_k$ ä¸ºçŠ¶æ€å˜é‡ï¼ŒAä¸ºçŠ¶æ€çŸ©é˜µï¼ŒBä¸ºæ§åˆ¶çŸ©é˜µï¼Œ $u_k$ ä¸ºæ§åˆ¶ï¼Œ $w_{k-1}$ ä¸ºè¿‡ç¨‹å™ªéŸ³ï¼Œ $v_k$ ä¸ºæµ‹é‡å™ªéŸ³ï¼Œå…¶ä¸­å™ªå£°æ˜¯ä¸å¯æµ‹çš„ï¼Œæ˜¯ç³»ç»Ÿä¸ç¡®å®šæ€§çš„è¡¨ç°ã€‚ä½†è¿‡ç¨‹å™ªå£°å¯ä»¥å‡è®¾å…¶ç¬¦åˆæ­£æ€åˆ†å¸ƒ $P(w)\sim N(0,Q)$ ï¼Œå…¶ä¸­0ä¸ºæœŸæœ›ï¼ŒQä¸ºåæ–¹å·®çŸ©é˜µï¼š</p><script type="math/tex; mode=display">\begin{aligned}Q&=E(ww^T)\\ &=E\left(         \begin{bmatrix}            w_1 \\            w_2          \end{bmatrix}         \begin{bmatrix}            w_1 & w_2           \end{bmatrix}     \right)\\ &=E\left(         \begin{bmatrix}            w_1^2  & w_1w_2\\            w_2w_1 & w_2^2         \end{bmatrix}     \right)\\ &=     \begin{bmatrix}       E(w_1^2)  & E(w_1w_2)\\       E(w_2w_1) & E(w_2^2)     \end{bmatrix}\\ &=     \begin{bmatrix}        \sigma_{w_1}^2 & \sigma_{w_1}\sigma_{w_2} \\        \sigma_{w_2}\sigma_{w_1} & \sigma_{w_2}^2     \end{bmatrix}\end{aligned}</script><p>é€šè¿‡Qè¿™ä¸ªåæ–¹å·®çŸ©é˜µå¯ä»¥è¡¨ç¤ºå‡ºè¿‡ç¨‹å™ªå£°çš„æ–¹å·®ï¼Œäº¦å¯ä»¥è¡¨ç¤ºå‡ºè¿‡ç¨‹å™ªå£°ä¹‹é—´çš„å…³ç³»ã€‚</p><p>å¯¹äºæµ‹é‡å™ªå£°ä¹ŸåŒæ ·è®¤ä¸ºç¬¦åˆæ­£æ€åˆ†å¸ƒ $P(v)\sim N(0,R)$ ï¼Œ $R=E(vv^T)$ åŒæ ·ä¸ºåæ–¹å·®çŸ©é˜µï¼Œå½¢åŒQã€‚</p><p>ä½†å»ºæ¨¡çš„æ—¶å€™å™ªéŸ³æ˜¯ä¸çŸ¥é“çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½æµ‹å¾—é™¤æ‰å™ªå£°å…¶ä½™çš„é¡¹ï¼Œè¡¨ç¤ºä¸º $\hat{x}_k^-$ ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼°è®¡å€¼æ‰€ä»¥è¦åŠ ä¸€ä¸ªhatã€‚æ­¤æ—¶æˆ‘ä»¬æ²¡æœ‰åšä»»ä½•å¤„ç†ï¼Œåªæ˜¯æ ¹æ®ä¸Šé¢çš„å¼å­å»æ‰å™ªå£°å¾—æ¥ï¼Œæ‰€ä»¥åœ¨ä¸Šé¢åŠ ä¸€ä¸ªè´Ÿå·ï¼Œä»£è¡¨å…ˆéªŒä¼°è®¡ã€‚</p><script type="math/tex; mode=display">\begin{array}{l}\hat{x}_k^-=A\hat{x}_{k-1}+Bu_{k-1}\\z_k=Hx_k \to \hat{x}_{k_{mea}}=H^{-1}z_k\end{array}</script><p>ä¸Šå¼ä¸­ç¬¬ä¸€è¡Œ $\hat{x}_k^-$ ä¸ºç®—å‡ºæ¥çš„ç»“æœï¼Œç¬¬äºŒè¡Œ $\hat{x}_{k_{mea}}$ ä¸ºæµ‹å‡ºæ¥çš„ç»“æœï¼Œä½†ä»–ä»¬éƒ½ä¸å…·å¤‡æµ‹é‡å™ªå£°è¿™ä¸€é¡¹ï¼Œä»–ä»¬éƒ½æ˜¯ä¸å¤ªå‡†ç¡®çš„ã€‚è¿™æ—¶å¯ä»¥è¿ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨é€šè¿‡ä¸¤ä¸ªä¸å¤ªå‡†ç¡®çš„ç»“æœå¾—åˆ°ä¸€ä¸ªå‡†ç¡®çš„ç»“æœã€‚</p><p>å›å¿†ä¹‹å‰æ•°æ®èåˆçš„æ¦‚å¿µï¼Œå¯¹äºæœ€ç»ˆçš„ä¼°è®¡å€¼ï¼Œ $\hat{x}_k$ ï¼ˆåéªŒä¼°è®¡ï¼‰ å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}\hat{x}_k=\hat{x}_k^- + G(H^{-1}z_k-\hat{x}_k^-),G\in[0,1]\\\end{array}</script><ul><li>å½“ $G=0$ ï¼Œ $\hat{x}_k=\hat{x}_k^-$ ï¼Œæ­¤æ—¶æ›´ç›¸ä¿¡è®¡ç®—ç»“æœ</li><li>å½“ $G=1$ ï¼Œ $\hat{x}_k=H^{-1}z_k$ ï¼Œæ­¤æ—¶æ›´ç›¸ä¿¡æµ‹é‡ç»“æœ</li></ul><p>åœ¨è®¸å¤šæ•™æä¸­ä¼šä»¤ $G=K_kH$ ï¼Œå¡å°”æ›¼æ»¤æ³¢å™¨å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}\hat{x}_k=\hat{x}_k^- + K_k(z_k-H\hat{x}_k^-),K_k\in[0,H^{-1}]\\\end{array}</script><ul><li><p>å½“ $K_k=0$ ï¼Œ $\hat{x}_k=\hat{x}_k^-$ ï¼Œæ­¤æ—¶æ›´ç›¸ä¿¡è®¡ç®—ç»“æœ</p></li><li><p>å½“ $K_k=H^{-1}$ ï¼Œ $\hat{x}_k=H^{-1}z_k$ ï¼Œæ­¤æ—¶æ›´ç›¸ä¿¡æµ‹é‡ç»“æœ</p></li></ul><p>æ¥ä¸‹æ¥çš„ç›®æ ‡å°±æ˜¯<strong>å¯»æ‰¾ $K_k$ ï¼Œä½¿å¾—è¯¯å·®æœ€å°</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿å¾—ä¼°è®¡å€¼ $\hat{x}_k$ è¶‹è¿‘äºå®é™…å€¼ $x_k$ ã€‚å¾ˆæ˜æ˜¾ï¼Œ $K_k$ çš„å–å€¼ä¸<strong>è®¡ç®—è¯¯å·®</strong>å’Œ<strong>æµ‹é‡è¯¯å·®</strong>æ¯æ¯ç›¸å…³ï¼Œå½“æµ‹é‡è¯¯å·®ç‰¹åˆ«å¤§æ—¶ä¼šæ›´ç›¸ä¿¡è®¡ç®—å‡ºæ¥çš„ç»“æœï¼Œå½“è®¡ç®—è¯¯å·®ç‰¹åˆ«å¤§æ—¶ä¼šæ›´ç›¸ä¿¡æµ‹é‡å‡ºæ¥çš„ç»“æœã€‚</p><p>ä»¤è¯¯å·® $e_k=x_k-\hat{x}_k$ ï¼Œå…¶åŒæ ·ç¬¦åˆæ­£æ€åˆ†å¸ƒ $P(e_k)\sim N(0,P)$ </p><script type="math/tex; mode=display">\begin{aligned}P=E(ee^T)=     \begin{bmatrix}        \sigma_{e_1}^2 & \sigma_{e_1}\sigma_{e_2} \\        \sigma_{e_2}\sigma_{e_1} & \sigma_{e_2}^2     \end{bmatrix}\end{aligned}</script><p>å¦‚æœæ–°ä¼°è®¡å‡ºçš„ $x_k$ è·ç¦»å®é™…å€¼è¶Šå°ï¼Œè¯´æ˜è¯¯å·®çš„æ–¹å·®è¶Šå°ï¼Œè¯´æ˜è¶Šæ¥è¿‘æœŸæœ›å€¼0ã€‚è€Œæ–¹å·®ä¹‹å’Œä¸ºPçš„è¿¹ $tr(P)=\sigma_{e_1}^2+\sigma_{e_2}^2$ ï¼Œæ‰€ä»¥è¦æƒ³è®©æ–¹å·®æœ€å°ï¼Œæ¥ä¸‹æ¥çš„ç›®æ ‡å°±å˜æˆäº†é€‰å–åˆé€‚çš„ $K_k$ ï¼Œä½¿å¾—åæ–¹å·®<strong>çŸ©é˜µPçš„è¿¹æœ€å°</strong></p><script type="math/tex; mode=display">\begin{aligned}P&=E\left(ee^T\right)\\ &=E\left( \left(x_k-\hat{x}_k\right)\left(x_k-\hat{x}_k\right)^T \right)\end{aligned}</script><p>ä¸‹é¢æ±‚ $x_k-\hat{x}_k$ ï¼Œå…¶ä¸­çš„ $z_k$ æ˜¯çœŸå®æµ‹é‡çš„ç»“æœï¼Œæ‰€ä»¥ $z_k=Hx_k+v_k$ ã€‚å› ä¸º $e_k=x_k-\hat{x}_k$ ï¼Œæ‰€ä»¥å¯ä»¥å®šä¹‰å…ˆéªŒè¯¯å·® $e_k^-=x_k-\hat{x}_k^-$ </p><script type="math/tex; mode=display">\begin{aligned}x_k-\hat{x}_k&=x_k-(\hat{x}_k^- + K_k(z_k-H\hat{x}_k^-))\\&=(I-K_kH)(x_k-\hat{x}_k^-)-K_kv_k \\&=(I-K_kH)e_k^--K_kv_k\end{aligned}</script><p>å‰æ–‡æåˆ°ï¼Œ $e_k^-$ å’Œ $e_k^-$ çš„æ–¹å·®éƒ½æ˜¯0ï¼Œä¸”ä»¤å…ˆéªŒè¯¯å·®çš„åæ–¹å·®çŸ©é˜µ $P_k^-=E(e_k^-{e_k^-}^T)$ ã€‚æ­¤æ—¶ç¬¬kæ­¥çš„ $P_k$ å¯ä»¥æ•´ç†ä¸º</p><script type="math/tex; mode=display">\begin{aligned}P_k&=E\left( \left(x_k-\hat{x}_k\right)\left(x_k-\hat{x}_k\right)^T \right)\\ &=E\left( \left(\left(I-K_kH\right)e_k^--K_kv_k\right)\left(\left(I-K_kH\right)e_k^--K_kv_k\right)^T \right)\\ &=P_k^--K_kHP_k^--(K_kHP_k^-)^T+K_kHP_k^-H^TK_k^T+K_kRK_k^T\end{aligned}</script><p>æ­¤æ—¶å¯ä»¥è®¡ç®— $P_k$ çš„è¿¹</p><script type="math/tex; mode=display">\begin{aligned}tr(P_k)&=tr(P_k^-)-2tr(K_kHP_k^-)+tr(K_kHP_k^-H^TK_k^T)+tr(K_kRK_k^T)\end{aligned}</script><p>å¯»æ‰¾kä½¿å¾— $tr(P_k)$ æœ‰æœ€å°å€¼ï¼Œå¯¹kæ±‚å¯¼å¹¶å¯»æ‰¾æå€¼ç‚¹ï¼ˆæ±‚å¯¼æ³•åˆ™ç•¥ï¼‰</p><script type="math/tex; mode=display">\begin{aligned}\frac{dtr(P_k)}{dk}=0-2(HP_k^-)^T+2K_kHP_k^-H^T+2K_kR=0\\\end{aligned}</script><script type="math/tex; mode=display">\begin{aligned}K_k=\frac{P_k^-H^T}{HP_k^-H^T+R}\\\end{aligned}</script><p>è‡³æ­¤ï¼Œæˆ‘ä»¬æ¨å‡ºçš„ $K_k$ å°±æ˜¯å¡å°”æ›¼å¢ç›Šã€‚è¿™ä¹Ÿæ˜¯å¡å°”æ›¼æ»¤æ³¢å™¨ä¸­æœ€æ ¸å¿ƒçš„å…¬å¼ã€‚</p><p>å…¶ä¸­çš„Ræ˜¯æµ‹é‡å™ªå£°çš„åæ–¹å·®çŸ©é˜µï¼ŒRçš„å¤§å°ä»£è¡¨äº†æµ‹é‡å™ªå£°æ–¹å·®çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯ æµ‹é‡å™ªå£°çš„å¤§å°ã€‚åˆ†æ $K_k$ ï¼š</p><ul><li>å½“Rå¾ˆå¤§ï¼Œ $K_k\to0$ ï¼Œ $\hat{x}_k=\hat{x}_k^-$ ï¼Œæ­¤æ—¶æ›´ç›¸ä¿¡è®¡ç®—ç»“æœ</li><li>å½“Rå¾ˆå°ï¼Œ $K_k=\frac{P_k^-H^T}{HP_k^-H^T}=H^{-1},\hat{x}_k=H^{-1}z_k$ ï¼Œæ­¤æ—¶æ›´ç›¸ä¿¡æµ‹é‡ç»“æœ</li></ul><h2 id="è¯¯å·®åæ–¹å·®çŸ©é˜µæ•°å­¦æ¨å¯¼"><a href="#è¯¯å·®åæ–¹å·®çŸ©é˜µæ•°å­¦æ¨å¯¼" class="headerlink" title="è¯¯å·®åæ–¹å·®çŸ©é˜µæ•°å­¦æ¨å¯¼"></a>è¯¯å·®åæ–¹å·®çŸ©é˜µæ•°å­¦æ¨å¯¼</h2><p>ç°åœ¨æ¥æ¨å¯¼å¡å°”æ›¼å¢ç›Š $K_k$ ä¸­çš„å…ˆéªŒè¯¯å·®çš„åæ–¹å·®çŸ©é˜µ $P_k^-$ ã€‚</p><p>æ ¹æ®å‰æ–‡çš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°çœŸå®å€¼ $x_k$ ï¼Œå…ˆéªŒä¼°è®¡ $\hat{x}_k^-$ ï¼ŒåéªŒä¼°è®¡ $\hat{x}_k$ ï¼Œå¡å°”æ›¼å¢ç›Š $K_k$ </p><script type="math/tex; mode=display">\begin{aligned}x_k & = Ax_{k-1}+Bu_{k-1}+w_{k-1}\\\hat{x}_k^- & = A\hat{x}_{k-1}+Bu_{k-1}\\\hat{x}_k & = \hat{x}_k^- + K_k(z_k-H\hat{x}_k^-)\\K_k & = \frac{P_k^-H^T}{HP_k^-H^T+R}\end{aligned}</script><p>æ ¹æ® $P_k^-$ çš„å®šä¹‰ï¼Œ $P_k^-=E(e_k^-{e_k^-}^T)$ ï¼Œå…¶ä¸­è¯¯å·®ä¸ºçœŸå®å€¼å‡ä¼°è®¡å€¼ï¼Œ</p><script type="math/tex; mode=display">\begin{aligned}e_k^-&=x_k-\hat{x}_k^-\\     &=Ax_{k-1}+Bu_{k-1}+w_{k-1}-A\hat{x}_{k-1}-Bu_{k-1}\\     &=A(x_{k-1}-\hat{x}_{k-1}^-)+w_{k-1}\\     &=Ae_{k-1}+w_{k-1}\end{aligned}</script><p>åˆ™ $P_k^-$ å¯ä»¥æ•´ç†ä¸ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}P_k^-&=E(e_k^-{e_k^-}^T)\\     &=E\left( (Ae_{k-1}+w_{k-1})(Ae_{k-1}+w_{k-1})^T \right)\\     &=AE(e_{k-1}^-{e_{k-1}^-}^T)A^T+E(w_{k-1}^-{w_{k-1}^-}^T)\\     &=AP_{k-1}A^T+Q\end{aligned}</script><p>æ ¹æ®ä¸Šå¼å°±å¯ä»¥åˆ©ç”¨å¡å°”æ›¼æ»¤æ³¢å™¨ä¼°è®¡çŠ¶æ€å˜é‡çš„å€¼äº†ã€‚åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤</p><ul><li><p>é¢„æµ‹</p><ol><li><p>å…ˆéªŒä¼°è®¡</p><p> $\hat{x}_k^-=A\hat{x}_{k-1}+Bu_{k-1}$</p></li><li><p>å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ</p><p> $P_k^-=AP_{k-1}A^T+Q$</p></li></ol></li><li><p>æ ¡æ­£</p><ol><li><p>å¡å°”æ›¼å¢ç›Š</p><p> $K_k=\frac{P_k^-H^T}{HP_k^-H^T+R}$</p></li><li><p>åéªŒä¼°è®¡</p><p> $\hat{x}_k=\hat{x}_k^- + K_k(z_k-H\hat{x}_k^-)$</p></li></ol></li></ul><p>æ ¹æ®ä»¥ä¸Šå››æ­¥å°±å¯ä»¥å¾—åˆ°æœ€ä¼˜ä¼°è®¡å€¼ï¼Œä¹Ÿå°±æ˜¯åéªŒä¼°è®¡å€¼ $\hat{x}_k$ ã€‚</p><p>å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ $P_k^-$ ä¸­åŒ…å«ä¸Šä¸€æ¬¡çš„ $P_{k-1}^-$ é¡¹ï¼Œæ¯æ¬¡çŸ«æ­£åšéœ€è¦æ›´æ–°å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µã€‚å°†å¡å°”æ›¼å¢ç›Šå¸¦å…¥å¯ä»¥æ±‚å¾—ï¼š</p><script type="math/tex; mode=display">\begin{aligned}P_k&=P_k^--K_kHP_k^--(K_kHP_k^-)^T+K_kHP_k^-H^TK_k^T+K_kRK_k^T\\   &=(I-K_kH)P_k^-\end{aligned}</script><p>æ‰€ä»¥ç¬¬äº”æ­¥ä¸º</p><ol><li><p>æ›´æ–°å…ˆéªŒè¯¯å·®åæ–¹å·®</p><p>$P_k=(I-K_kH)P_k^-$ </p></li></ol><p>ä»¥ä¸Šå°±æ˜¯å®Œæ•´çš„å¡å°”æ›¼æ»¤æ³¢å™¨çš„äº”ä¸ªå…¬å¼ã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡é¢„æµ‹éƒ½ä¼šç”¨åˆ°ä¸Šä¸€æ¬¡çš„ç»“æœï¼Œæ‰€ä»¥åœ¨æœ€å¼€å§‹è¦èµ‹äºˆåˆå€¼ $\hat{x}_0$ å’Œ $P_0$ ï¼Œåˆå€¼çš„é€‰å–ä¼šåœ¨ä¸‹æ–‡æåŠã€‚</p><h2 id="æ‰©å±•å¡å°”æ›¼æ»¤æ³¢"><a href="#æ‰©å±•å¡å°”æ›¼æ»¤æ³¢" class="headerlink" title="æ‰©å±•å¡å°”æ›¼æ»¤æ³¢"></a>æ‰©å±•å¡å°”æ›¼æ»¤æ³¢</h2><p>å‰æ–‡è®²åˆ°ï¼Œå¡å°”æ›¼æ»¤æ³¢å™¨åœ¨çº¿æ€§ç³»ç»Ÿé‡Œå¯ä»¥å¾—åˆ°æœ€ä¼˜ä¼°è®¡å€¼ã€‚å¯¹äºéçº¿æ€§ç³»ç»Ÿï¼Œå¯ä»¥å°†å…¶çº¿æ€§åŒ–å†è¿›è¡Œå¤„ç†ï¼Œè¿™ç§æ»¤æ³¢å™¨å«åšæ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨ï¼ˆExtend Kalman Filterï¼‰ï¼Œç®€ç§°EKFã€‚</p><p>çº¿æ€§ç³»ç»Ÿå¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}x_k=Ax_{k-1}+Bu_{k-1}+w_{k-1}\\z_k=Hx_k+v_k\end{array}</script><p>è€Œéçº¿æ€§ç³»ç»Ÿï¼Œæ— æ³•ç”¨çº¿æ€§çš„çŠ¶æ€ç©ºé—´æ–¹ç¨‹è¡¨è¾¾ï¼Œè€Œæ˜¯å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p><script type="math/tex; mode=display">\begin{array}{l}x_k=f(x_{k-1},u_{k-1},w_{k-1})\\z_k=h(x_k,v_k)\end{array}</script><p>å…¶ä¸­fä¸ºè¿‡ç¨‹æ–¹ç¨‹ï¼Œhä¸ºæµ‹é‡æ–¹ç¨‹ï¼Œè¿™æ˜¯ä¸¤ä¸ªéçº¿æ€§çš„è¡¨è¾¾å½¢å¼ã€‚æ³¨æ„æ— è®ºæ˜¯çº¿æ€§è¿˜æ˜¯éçº¿æ€§ï¼Œè¯¯å·®vå’Œwéƒ½æ˜¯ç¬¦åˆæ­£æ€åˆ†å¸ƒçš„ã€‚ä½†æ­£æ€åˆ†å¸ƒçš„éšæœºå˜é‡é€šè¿‡éçº¿æ€§ç³»ç»Ÿä»¥åå°±ä¸å†æ˜¯æ­£æ€åˆ†å¸ƒçš„äº†ã€‚æ‰€ä»¥å¦‚æœè¿˜æƒ³å¯¹éçº¿æ€§ç³»ç»Ÿè¿›è¡Œå¡å°”æ›¼æ»¤æ³¢ï¼Œéœ€è¦å¯¹å…¶çº¿æ€§åŒ–ï¼ˆLinearizationï¼‰ï¼Œç”¨æ³°å‹’çº§æ•°å±•å¼€ï¼Œä¸èµ˜è¿°è¿‡ç¨‹åªç»™å‡ºç»“è®ºï¼š</p><script type="math/tex; mode=display">\begin{aligned}f(x)=f(x_0)+\frac{\partial f}{\partial x}(x-x_0)\end{aligned}</script><p>å¦‚æœéœ€è¦çº¿æ€§åŒ–ä¸€ä¸ªç³»ç»Ÿï¼Œéœ€è¦æ‰¾åˆ°ä¸€ä¸ªç‚¹ï¼ˆOperating Pointï¼‰ï¼Œåœ¨è¿™ä¸ªç‚¹é™„è¿‘è¿›è¡Œçº¿æ€§åŒ–ã€‚å¯¹äºéçº¿æ€§ç³»ç»Ÿæ¥è¯´æœ€å¥½çš„çº¿æ€§åŒ–çš„ç‚¹å°±æ˜¯å®ƒçš„çœŸå®ç‚¹ï¼Œä½†ç”±äºç³»ç»Ÿæœ‰è¯¯å·®ï¼Œæ— æ³•çŸ¥é“çœŸå®å€¼ï¼Œæ‰€ä»¥æ— æ³•åœ¨çœŸå®ç‚¹è¿›è¡Œçº¿æ€§åŒ–ï¼Œæ‰€ä»¥è¿‡ç¨‹æ–¹ç¨‹ $f(x_k)$ åªèƒ½<strong>åœ¨ $\hat{x}_{k-1}$ é™„è¿‘</strong>ï¼Œä¹Ÿå°±æ˜¯k-1æ—¶åˆ»ï¼ˆä¸Šä¸€æ¬¡ï¼‰çš„åéªŒä¼°è®¡é™„è¿‘è¿›è¡Œçº¿æ€§åŒ–ã€‚</p><p>ç”±äºä¸çŸ¥é“è¯¯å·® $w_{k-1}$ æ˜¯å¤šå°‘ï¼Œæ‰€ä»¥å°†å…¶å‡è®¾ä¸º0ï¼Œå®šä¹‰ $f(\hat{x}_{k-1},u_{k-1},0)=\tilde x_k$ ï¼Œå¯ä»¥å¾—åˆ°</p><script type="math/tex; mode=display">\begin{aligned}x_k & = f(\hat{x}_{k-1},u_{k-1},0)+A_k(x_{k-1}-\hat{x}_{k-1})+W_kw_{k-1}\\A_k &= \frac{\partial f}{\partial x}|_{\hat{x}_{k-1},u_{k-1}}\qquad W_k  = \frac{\partial f}{\partial w}|_{\hat{x}_{k-1},u_{k-1}}\end{aligned}</script><p>ä¾‹ï¼š</p><script type="math/tex; mode=display">\begin{aligned}x_1&=x_1+sinx_2=f_1\\x_2&=x_1^2=f_2\\A_k&=\frac{\partial f}{\partial x}|_{\hat{x_1}_{k-1},\hat{x_2}_{k-1}}\\&=\begin{bmatrix}    \frac{\partial f_1}{\partial x_1} & \frac{\partial f_1}{\partial x_2} \\  \frac{\partial f_2}{\partial x_1} & \frac{\partial f_2}{\partial x_2}\end{bmatrix}|_{\hat{x_1}_{k-1},\hat{x_2}_{k-1}}\\&=\begin{bmatrix}    1 & cosx_2 \\  2x_1 & 0\end{bmatrix}|_{\hat{x_1}_{k-1},\hat{x_2}_{k-1}}\\&=\begin{bmatrix}    1 & cos\hat{x_2}_{k-1} \\  2\hat{x_1}_{k-1} & 0\end{bmatrix}\end{aligned}</script><p>å¯ä»¥çœ‹å‡ºï¼ŒAçŸ©é˜µéšç€Kçš„å˜åŒ–è€Œå˜åŒ–ï¼Œæ‰€ä»¥æ¯æ¬¡è¦é‡æ–°è®¡ç®—AçŸ©é˜µã€‚</p><p>åŒç†å¯¹äºæµ‹é‡æ–¹ç¨‹ï¼Œ $z_k$ <strong>åœ¨ $\tilde x_k$ é™„è¿‘</strong>è¿›è¡Œçº¿æ€§åŒ–ã€‚ç”±äºä¸çŸ¥é“è¯¯å·® $v_k$ ï¼Œæ‰€ä»¥å°†å…¶å‡è®¾ä¸º0ï¼Œå®šä¹‰ $h(\hat{x}_k,0)=\tilde z_k$ </p><script type="math/tex; mode=display">\begin{aligned}z_k&=h(\tilde x,0)+H_k(x_k-\tilde{x}_k)+V_kv_k\\H_k&=\frac{\partial h}{\partial x}|_{\hat{x}_k}\qquad V_k=\frac{\partial h}{\partial v}|_{\hat{x}_k}\\\end{aligned}</script><p>è¿™æ ·å°±æŠŠéçº¿æ€§ç³»ç»Ÿçº¿æ€§åŒ–äº†ï¼š</p><script type="math/tex; mode=display">\begin{aligned}x_k&=\tilde x_k+A_k(x_{k-1}-\hat{x}_{k-1})+W_kw_{k-1}\\z_k&=\tilde z_k+H(x_k-\tilde{x}_k)+Vv_k\end{aligned}</script><p>å…¶ä¸­çš„ $W_kw_{k-1}$ å’Œ $Vv_k$ ä¹Ÿéƒ½æ˜¯æ­£æ€åˆ†å¸ƒï¼ˆ $WQW^T$ ç›¸å½“äºçŸ©é˜µä¸­Wçš„å¹³æ–¹ï¼‰ï¼š</p><script type="math/tex; mode=display">\begin{aligned}P(w) &\sim N(0,R)\\P(Ww_{k-1}) &\sim N(0,WQW^T)\\P(Vv_k) &\sim N(0,VRV^T)\end{aligned}</script><p>å°†å¡å°”æ›¼æ»¤æ³¢å™¨çš„çº¿æ€§åŒ–éƒ¨åˆ†æ›¿æ¢æˆå¯¹åº”éçº¿æ€§çš„éƒ¨åˆ†ï¼Œå°±å¯ä»¥å¾—åˆ°æ‰©å±•å¡å°”æ›¼æ»¤æ³¢å™¨çš„äº”ä¸ªå…¬å¼ï¼š</p><ul><li><p>é¢„æµ‹</p><ol><li><p>å…ˆéªŒä¼°è®¡</p><p> $\hat{x}_k^-=f(\hat{x}_{k-1},u_{k-1},0)$</p></li><li><p>å…ˆéªŒè¯¯å·®åæ–¹å·®çŸ©é˜µ</p><p> $P_k^-=AP_{k-1}A^T+WQW^T$</p></li></ol></li><li><p>æ ¡æ­£</p><ol><li><p>å¡å°”æ›¼å¢ç›Š</p><p> $K_k=\frac{P_k^-H^T}{HP_k^-H^T+VRV^T}$</p></li><li><p>åéªŒä¼°è®¡</p><p> $\hat{x}_k=\hat{x}_k^- + K_k(z_k-h(\hat{x}_k,0))$ </p></li></ol></li></ul><ol><li><p>æ›´æ–°å…ˆéªŒè¯¯å·®åæ–¹å·®</p><p> $P_k=(I-K_kH)P_k^-$ </p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç”µæœº" scheme="https://www.robotsfan.com/categories/%E7%94%B5%E6%9C%BA/"/>
    
    
    <category term="FOC" scheme="https://www.robotsfan.com/tags/FOC/"/>
    
  </entry>
  
  <entry>
    <title>FOCæ§åˆ¶åŸç†â€”â€”Clarkå˜æ¢å’ŒParkå˜æ¢</title>
    <link href="https://www.robotsfan.com/posts/9532f19e.html"/>
    <id>https://www.robotsfan.com/posts/9532f19e.html</id>
    <published>2022-03-23T08:25:00.000Z</published>
    <updated>2022-03-23T08:32:26.615Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="FOCæ§åˆ¶åŸç†â€”â€”Clarkå˜æ¢å’ŒParkå˜æ¢"><a href="#FOCæ§åˆ¶åŸç†â€”â€”Clarkå˜æ¢å’ŒParkå˜æ¢" class="headerlink" title="FOCæ§åˆ¶åŸç†â€”â€”Clarkå˜æ¢å’ŒParkå˜æ¢"></a>FOCæ§åˆ¶åŸç†â€”â€”Clarkå˜æ¢å’ŒParkå˜æ¢</h1><h2 id="Clarkå˜æ¢"><a href="#Clarkå˜æ¢" class="headerlink" title="Clarkå˜æ¢"></a>Clarkå˜æ¢</h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>Clarkå˜æ¢å°±æ˜¯æŠŠä¸‰å‘åæ ‡ç³»å˜æˆç›´è§’åæ ‡ç³»</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323153620081.png" alt="image-20220323153620081"></p><p>å·²çŸ¥ä¸‰å‘åæ ‡ç³» $(I_a,I_b,I_c)$ ï¼Œè¿™ä¸‰ä¸ªåŸºå‘é‡ä¸æ˜¯æ­£äº¤çš„ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶æ­£äº¤åŒ–ä¸ºä¸€ä¸ªç›´è§’åæ ‡ç³»ï¼Œå‘½åä¸º $\alpha-\beta$ åæ ‡ç³»ï¼Œå˜æ¢å…¬å¼ä¸ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}    \begin{aligned}    I_\alpha&=I_a-I_b\text{cos}60-I_c\text{cos}60 \\            &=I_a-\frac{1}{2}I_b-\frac{1}{2}I_c    \end{aligned} \\    \begin{aligned}    I_\beta&=I_b\text{cos}30-I_c\text{cos}30 \\           &=\frac{\sqrt3}{2}I_b-\frac{\sqrt3}{2}I_c    \end{aligned}\end{array}\right.</script><p>å¯ä»¥å°†å…¶æ•´ç†æˆçŸ©é˜µå½¢å¼ï¼š</p><script type="math/tex; mode=display">\left[\begin{array}{c}    I_{\alpha} \\    I_{\beta}\end{array}\right]=\left[\begin{array}{ccc}    1 & -\frac{1}{2}       & -\frac{1}{2} \\    0 & \frac{\sqrt{3}}{2} & -\frac{\sqrt{3}}{2}\end{array}\right]\left[\begin{array}{c}    I_{a} \\    I_{b} \\    I_{c}\end{array}\right]</script><p>ç”±åŸºå°”éœå¤«ç”µæµå®šå¾‹ï¼Œ $I_a+I_b+I_c=0$ ï¼Œæ•…ä¹Ÿå¯æ•´ç†ä¸ºï¼š</p><script type="math/tex; mode=display">\left\{\begin{array}{l}    I_\alpha=\frac{3}{2}I_a \\    I_\beta=\frac{\sqrt3}{2}I_a+\sqrt3I_b\end{array}\right.</script><p>åClarkå˜æ¢åˆ™å°†ä¸‰å‘ä¿¡å·è½¬æ¢ä¸ºä¸¤å‘ä¿¡å·ï¼Œæ ¹æ®ä¸Šå¼å¯ä»¥è§£å¾—</p><script type="math/tex; mode=display">\left[\begin{array}{c}    I_{a} \\    I_{b} \\    I_{c}\end{array}\right]=\left[\begin{array}{ccc}    \frac{2}{3}  & 0       \\    -\frac{1}{3} & \frac{1}{\sqrt{3}} \\    -\frac{1}{3} & -\frac{1}{\sqrt{3}}\end{array}\right]\left[\begin{array}{c}    I_{\alpha} \\    I_{\beta}\end{array}\right]</script><p>ä¹Ÿå¯é€šè¿‡è®¡ç®—Clarkå˜æ¢å¸¸æ•°çŸ©é˜µçš„ä¼ªé€†æ¥ç¡®å®šåClarkå˜æ¢çš„å¸¸æ•°çŸ©é˜µï¼ˆä½¿ç”¨MATLABä¸­çš„ <code>pinv()</code>å‡½æ•°ï¼‰</p><h3 id="Simulinkä»¿çœŸ"><a href="#Simulinkä»¿çœŸ" class="headerlink" title="Simulinkä»¿çœŸ"></a>Simulinkä»¿çœŸ</h3><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323152939436.png" alt="image-20220323152939436"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323150553068.png" alt="image-20220323150553068"></p><p>é€šè¿‡å›¾åƒå¯ä»¥çœ‹åˆ°ï¼Œè¾“å…¥ä¿¡å·çš„å¹…å€¼ä¸º1ï¼Œç»è¿‡Clarkå˜æ¢åçš„å›¾åƒå¹…å€¼å˜ä¸º1.5ï¼Œå³å˜ä¸º $\frac{3}{2}$ å€ï¼›è¿›è¡ŒåClarkå˜æ¢åå¹…å€¼åˆå˜ä¸º1.5ï¼Œå³å˜ä¸º $\frac{2}{3}$ å€ã€‚æ‰€ä»¥è¦è¿›è¡Œç­‰å¹…å€¼å˜æ¢ã€‚ä¿®æ”¹ä»¿çœŸï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323153007076.png" alt="image-20220323153007076"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œç»è¿‡ç­‰å¹…å€¼å˜æ¢åï¼Œå¹…å€¼ç»Ÿä¸€ä¸º1ã€‚</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323151818659.png" alt="image-20220323151818659"></p><h2 id="Parkå˜æ¢"><a href="#Parkå˜æ¢" class="headerlink" title="Parkå˜æ¢"></a>Parkå˜æ¢</h2><h3 id="åŸç†-1"><a href="#åŸç†-1" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>Parkå˜æ¢å¯ä»¥å°†æ­£å¼¦å˜é‡çº¿æ€§åŒ–</p><p>å°† $\alpha-\beta$ åæ ‡ç³»æ—‹è½¬ $\theta$ åº¦å˜ä¸º $d-q$ åæ ‡ç³»ï¼Œ $d$ æŒ‡å‘è½¬å­ä¸­å¿ƒï¼Œ $q$ æŒ‡å‘åˆ‡çº¿æ–¹å‘ï¼Œå…¶ä¸­ $\theta$ æ˜¯è½¬å­å½“å‰çš„è§’åº¦ã€‚å¦‚ä¸‹å›¾</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/v2-d15d057327992a5c50016aea5bb7201b_1440w.jpg" alt="img"></p><p>ä¹Ÿå°±æ˜¯è¯´ $d-q$ åæ ‡ç³»å§‹ç»ˆè·Ÿç€è½¬å­æ—‹è½¬ã€‚</p><p>åˆ™å¯ä»¥å†™å‡º</p><script type="math/tex; mode=display">\left\{\begin{array}{l}I_{d}=I_{\alpha} \cos (\theta)+I_{\beta} \sin (\theta) \\I_{q}=-I_{\alpha} \sin (\theta)+I_{\beta} \cos (\theta)\end{array}\right.</script><p>æ•´ç†æˆçŸ©é˜µå½¢å¼</p><script type="math/tex; mode=display">\left[\begin{array}{l}    I_{d} \\    I_{q}\end{array}\right]=\left[\begin{array}{cc}     \cos \theta & \sin \theta \\    -\sin \theta & \cos \theta\end{array}\right]\left[\begin{array}{l}    I_{\alpha} \\    I_{\beta}\end{array}\right]</script><p>æ‰€ä»¥å¦‚æœ $d$ è½´ä¸º0ï¼Œåˆ™åŠŸç‡å…¨éƒ¨è¾“å‡ºåœ¨ $q$ è½´ä¸Šã€‚</p><p>åŒç†ï¼Œå¯ä»¥æ±‚å¾—åParkå˜æ¢</p><script type="math/tex; mode=display">\left[\begin{array}{l}    I_{\alpha} \\    I_{\beta}\end{array}\right]=\left[\begin{array}{cc}     \cos \theta & -\sin \theta \\     \sin \theta & \cos \theta\end{array}\right]\left[\begin{array}{l}    I_{d} \\    I_{q}\end{array}\right]</script><h3 id="Simulinkä»¿çœŸ-1"><a href="#Simulinkä»¿çœŸ-1" class="headerlink" title="Simulinkä»¿çœŸ"></a>Simulinkä»¿çœŸ</h3><p>åœ¨Clarkå˜æ¢å’Œç­‰å¹…å€¼å˜æ¢çš„åŸºç¡€ä¸Šæ·»åŠ Parkå˜æ¢</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323160805870.png" alt="image-20220323160805870"></p><p>å…³æ³¨Parkéƒ¨åˆ†</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220323160942614.png" alt="image-20220323160942614"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç”µæœº" scheme="https://www.robotsfan.com/categories/%E7%94%B5%E6%9C%BA/"/>
    
    
    <category term="FOC" scheme="https://www.robotsfan.com/tags/FOC/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨äººåŠ¨åŠ›å­¦â€”â€”æ‹‰æ ¼æœ—æ—¥æ³•</title>
    <link href="https://www.robotsfan.com/posts/c0ff5b54.html"/>
    <id>https://www.robotsfan.com/posts/c0ff5b54.html</id>
    <published>2022-03-15T12:30:00.000Z</published>
    <updated>2024-07-17T03:05:31.807Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æœºå™¨äººåŠ¨åŠ›å­¦â€”â€”æ‹‰æ ¼æœ—æ—¥æ³•"><a href="#æœºå™¨äººåŠ¨åŠ›å­¦â€”â€”æ‹‰æ ¼æœ—æ—¥æ³•" class="headerlink" title="æœºå™¨äººåŠ¨åŠ›å­¦â€”â€”æ‹‰æ ¼æœ—æ—¥æ³•"></a>æœºå™¨äººåŠ¨åŠ›å­¦â€”â€”æ‹‰æ ¼æœ—æ—¥æ³•</h1><h2 id="å¼•æ–‡"><a href="#å¼•æ–‡" class="headerlink" title="å¼•æ–‡"></a>å¼•æ–‡</h2><p>æœºå™¨äººåŠ¨åŠ›å­¦æ‰€ç”¨åˆ°çš„è¿åŠ¨å­¦æ–¹ç¨‹æ˜¯ä¸€ç»„å…·æœ‰ä¸‹åˆ—å½¢å¼çš„äºŒé˜¶å¾®åˆ†æ–¹ç¨‹ç»„</p><script type="math/tex; mode=display">\tau = M ( \theta ) \ddot { \theta } + h ( \theta , \dot { \theta } ) \label{1}</script><p>å¼ä¸­ï¼Œå¯¹äºæ‰€æœ‰å…³èŠ‚å‡ä¸ºé©±åŠ¨å…³èŠ‚çš„å¼€å¼è¿åŠ¨é“¾ï¼Œå¹¿ä¹‰åæ ‡ $\theta \in \mathbb{R}^{n}$ è¡¨ç¤ºå…³èŠ‚å˜é‡ï¼›å¹¿ä¹‰åŠ› $\tau \in \mathbb{R}^{n}$ è¡¨ç¤ºåŠ›æˆ–åŠ›çŸ©ï¼Œå¦‚æœ $\theta_i$ æ˜¯æ—‹è½¬å…³èŠ‚ï¼Œåˆ™ $\tau_i$ å¯¹åº”åŠ›çŸ©ï¼›å¦‚æœ $\theta_i$ ä¸ºå¹³åŠ¨å…³èŠ‚ï¼Œåˆ™ $\tau_i$ å¯¹åº”åŠ›ï¼› $M ( \theta )\in \mathbb{R}^{n\times{n}}$ æ˜¯ä¸€ä¸ªå¯¹ç§°ä¸”æ­£å®šçš„è´¨é‡çŸ©é˜µï¼›$h ( \theta , \dot { \theta })\in \mathbb{R}^{n}$ æ˜¯å°†å‘å¿ƒåŠ›ã€ç§‘é‡Œå¥¥åˆ©åŠ›ã€é‡åŠ›å’Œæ‘©æ“¦åŠ›ç­‰é›†åˆåœ¨ä¸€èµ·çš„åŠ›å‘é‡ï¼Œè¯¥å‘é‡å–å†³äº $\theta$ å’Œ $ \dot { \theta}$ è¿™ä¸¤ä¸ªå˜é‡ã€‚</p><p>è¿åŠ¨å­¦åŒæ ·åŒºåˆ†æ­£è¿åŠ¨å­¦å’Œé€†è¿åŠ¨å­¦ï¼Œæ­£å‘åŠ¨åŠ›å­¦é—®é¢˜æ˜¯åœ¨ç»™å®šçŠ¶æ€å˜é‡ $( \theta , \dot { \theta })$ ä»¥åŠå…³èŠ‚åŠ›å’ŒåŠ›çŸ©çš„å‰æä¸‹ç¡®å®šæœºå™¨äººçš„åŠ é€Ÿåº¦ $\ddot { \theta }$ ï¼Œå³</p><script type="math/tex; mode=display">\ddot { \theta } = M ^ { - 1 } ( \theta ) ( \tau - h ( \theta , \dot { \theta } ) )</script><p>é€†åŠ¨åŠ›å­¦é—®é¢˜åˆ™æ˜¯æ‰¾åˆ°å¯¹åº”äºæœºå™¨äººçŠ¶æ€å’ŒæœŸæœ›åŠ é€Ÿåº¦çš„å…³èŠ‚åŠ›å’ŒåŠ›çŸ©$\tau$ï¼Œå³å¼ $\eqref{1}$ </p><p>æœºå™¨äººçš„åŠ¨åŠ›å­¦æ–¹ç¨‹é€šå¸¸å¯ä»¥é€šè¿‡<strong>ç‰›é¡¿-æ¬§æ‹‰å…¬å¼</strong>æˆ–<strong>æ‹‰æ ¼æœ—æ—¥åŠ¨åŠ›å­¦å…¬å¼</strong>å¾—åˆ°ã€‚å¯¹äºç®€å•ç»“æ„çš„æœºå™¨äººï¼Œå¦‚3è‡ªç”±åº¦æˆ–è‡ªç”±åº¦æ›´å°‘çš„æƒ…å½¢ï¼Œæ‹‰æ ¼æœ—æ—¥å½¢å¼ä¸ä»…åœ¨æ¦‚å¿µä¸Šååˆ†ä¼˜é›…ï¼Œå¹¶ä¸”åœ¨å®é™…ä¸­éå¸¸æœ‰æ•ˆã€‚ä½†å¯¹äºè‡ªç”±åº¦æ•°ç›®æ›´å¤šçš„æœºå™¨äººæ¥è®²ï¼Œå…¶è®¡ç®—å¯èƒ½ä¼šå¾ˆå¿«å˜å¾—çƒ¦çã€‚</p><p>ä¸‹æ–‡å°†è®¨è®ºæ‹‰æ ¼æœ—æ—¥åŠ¨åŠ›å­¦å…¬å¼</p><h2 id="æ‹‰æ ¼æœ—æ—¥å‡½æ•°"><a href="#æ‹‰æ ¼æœ—æ—¥å‡½æ•°" class="headerlink" title="æ‹‰æ ¼æœ—æ—¥å‡½æ•°"></a>æ‹‰æ ¼æœ—æ—¥å‡½æ•°</h2><p>åŠ›å­¦ç³»ç»Ÿçš„æ‹‰æ ¼æœ—æ—¥å‡½æ•° ${ \cal L } ( q , \dot { q } )$ å®šä¹‰ä¸ºæ•´ä¸ªç³»ç»Ÿçš„åŠ¨èƒ½ ${ \cal K } ( q , \dot { q } )$ å‡å»åŠ¿èƒ½ ${ \cal P } ( q )$ ï¼Œå¼ä¸­çš„â€”ç»„ç‹¬ç«‹åæ ‡ $q \in \mathbb{R}^{n}$ ç”¨æ¥æè¿°ç³»ç»Ÿçš„ä½å½¢ï¼ˆè¿™ä¸ªåæ ‡ $q$ è¢«ç§°ä¸ºå¹¿ä¹‰åæ ‡ï¼‰</p><script type="math/tex; mode=display">{ \cal L } ( q , \dot { q } ) = { \cal K } ( q , \dot { q } ) - { \cal P } ( q )</script><p>è¿åŠ¨æ–¹ç¨‹ç°åœ¨å¯ä»¥ç”¨æ‹‰æ ¼æœ—æ—¥å‡½æ•°è¡¨ç¤ºå¦‚ä¸‹ï¼ˆæ¨å¯¼è¿‡ç¨‹ç•¥ï¼Œè¯¦è§åŠ¨åŠ›å­¦æ•™æï¼‰</p><script type="math/tex; mode=display">f = \frac { d } { d t } \frac { \partial { \cal L } } { \partial \dot { q } } - \frac { \partial { \cal L } } { \partial q }</script><p>è¿™ä¸ªæ–¹ç¨‹ä¹Ÿç§°ä¸º<strong>å«å¤–åŠ›çš„æ¬§æ‹‰-æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹</strong>ï¼ˆåœ¨æ ‡å‡†å½¢å¼çš„æ¬§æ‹‰-æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹ä¸­ï¼Œå¤–åŠ› $f$ ç­‰äºé›¶ï¼‰</p><h2 id="2R-å¼€é“¾æœºå™¨äººä¸¾ä¾‹"><a href="#2R-å¼€é“¾æœºå™¨äººä¸¾ä¾‹" class="headerlink" title="$2R$ å¼€é“¾æœºå™¨äººä¸¾ä¾‹"></a>$2R$ å¼€é“¾æœºå™¨äººä¸¾ä¾‹</h2><p>ä¸‹é¢ä»¥åœ¨é‡åŠ›ä½œç”¨ä¸‹çš„â€”ä¸ª $2R$ å¼€é“¾æœºå™¨äººä¸ºä¾‹æ¨å¯¼åŠ¨åŠ›å­¦æ–¹ç¨‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/image-20220315193736585.png" alt="image-20220315193736585" style="zoom:80%;"></p><p>å°†å…³èŠ‚åæ ‡ $\theta =(\theta_{1},\theta_{2})$ é€‰åšå¹¿ä¹‰åæ ‡ï¼Œå¹¿ä¹‰åŠ› $\tau =(\tau_{1},\tau_{2})$ åˆ™å¯¹åº”äºå…³èŠ‚åŠ›çŸ©ï¼ˆå› ä¸º $\tau^T\dot{\theta}$ å¯¹åº”äºåŠŸç‡ï¼‰ã€‚æœ¬ä¾‹ä¸­çš„æ‹‰æ ¼æœ—æ—¥å‡½æ•° ${ \cal L } ( q , \dot { q } )$ å¯ä»¥å†™æˆå¦‚ä¸‹åˆ†é‡å½¢å¼:</p><script type="math/tex; mode=display">\mathcal{L}(\theta, \dot{\theta})=\sum_{i=1}^{2}\left(\mathcal{K}_{i}-\mathcal{P}_{i}\right)</script><p>åˆ™æ¬§æ‹‰-æ‹‰æ ¼æœ—æ—¥æ–¹ç¨‹å¯ä»¥å†™æˆå¦‚ä¸‹åˆ†é‡å½¢å¼ï¼ˆ $\tau$ ä¸ºå…³èŠ‚åŠ›å’ŒåŠ›çŸ©å‘é‡ï¼‰:</p><script type="math/tex; mode=display">\tau_i = \frac { d } { d t } \frac { \partial { \cal L } } { \partial \dot { \theta_i } } - \frac { \partial { \cal L } } { \partial \theta_i } \qquad i = 1,2  \label{6}</script><p>ä¸‹é¢æˆ‘ä»¬éœ€è¦è®¡ç®—ä¸¤æ†çš„åŠ¨èƒ½å’ŒåŠ¿èƒ½ï¼ˆè®¤ä¸ºä¸¤æ†å„è‡ªçš„è´¨é‡ $\mathrm { m }1$ å’Œ $\mathrm { m }2$ å‡é›†ä¸­äºå„æ†æœ«ç«¯ï¼‰</p><p>è¿æ†1è´¨å¿ƒçš„ä½ç½®å’Œé€Ÿåº¦:</p><script type="math/tex; mode=display">\begin{array}{l}{\left[\begin{array}{l}x_{1} \\y_{1}\end{array}\right]=\left[\begin{array}{c}L_{1} \cos \theta_{1} \\L_{1} \sin \theta_{1}\end{array}\right]} \\{\left[\begin{array}{c}\dot{x}_{1} \\\dot{y}_{1}\end{array}\right]=\left[\begin{array}{r}-L_{1} \sin \theta_{1} \\L_{1} \cos \theta_{1}\end{array}\right] \dot{\theta}_{1}}\end{array}</script><p>è¿æ†2è´¨å¿ƒçš„ä½ç½®å’Œé€Ÿåº¦:</p><script type="math/tex; mode=display">\begin{array}{l}{\left[\begin{array}{l}x_{2} \\y_{2}\end{array}\right]=\left[\begin{array}{c}L_{1} \cos \theta_{1}+L_{2} \cos \left(\theta_{1}+\theta_{2}\right) \\L_{1} \sin \theta_{1}+L_{2} \sin \left(\theta_{1}+\theta_{2}\right)\end{array}\right]} \\{\left[\begin{array}{l}\dot{x}_{2} \\\dot{y}_{2}\end{array}\right]=\left[\begin{array}{rr}-L_{1} \sin \theta_{1}-L_{2} \sin \left(\theta_{1}+\theta_{2}\right) & -L_{2} \sin \left(\theta_{1}+\theta_{2}\right) \\L_{1} \cos \theta_{1}+L_{2} \cos \left(\theta_{1}+\theta_{2}\right) & L_{2} \cos \left(\theta_{1}+\theta_{2}\right)\end{array}\right]\left[\begin{array}{l}\dot{\theta}_{1} \\\dot{\theta}_{2}\end{array}\right] }\end{array}</script><p>ç”± $\mathcal{K} =\frac{1}{2} \mathfrak{m} v^2 = \frac{1}{2} \mathfrak{m}(\dot{x}^2 + \dot{y}^2)$ ï¼Œè¿æ†çš„åŠ¨èƒ½é¡¹ ${ \cal K }_1$ å’Œ ${ \cal K }_2$ åˆ†åˆ«ä¸º</p><script type="math/tex; mode=display">\begin{aligned}\mathcal{K}_{1} &=\frac{1}{2} \mathfrak{m}_{1}\left(\dot{x}_{1}^{2}+\dot{y}_{1}^{2}\right) \\&=\frac{1}{2} \mathfrak{m}_{1} L_{1}^{2} \dot{\theta}_{1}^{2} \\\mathcal{K}_{2} &=\frac{1}{2} \mathfrak{m}_{2}\left(\dot{x}_{2}^{2}+\dot{y}_{2}^{2}\right) \\&=\frac{1}{2} \mathfrak{m}_{2}\left(\left(L_{1}^{2}+2 L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right) \dot{\theta}_{1}^{2}+2\left(L_{2}^{2}+L_{1} L_{2} \cos \theta_{2}\right) \dot{\theta}_{1} \dot{\theta}_{2}+L_{2}^{2} \dot{\theta}_{2}^{2}\right)\end{aligned}</script><p>åŠ¿èƒ½åªå–å†³äºé«˜åº¦ï¼Œå³ $y$ åæ ‡ã€‚ç”± $\mathcal{P} = \mathfrak{m} g y$ ï¼Œè¿æ†çš„åŠ¿èƒ½é¡¹ ${ \cal P }_1$ å’Œ ${ \cal P }_2$ åˆ†åˆ«ä¸º</p><script type="math/tex; mode=display">\begin{array}{l}\mathcal{P}_{1}=\mathfrak{m}_{1} g y_{1}=\mathfrak{m}_{1} g L_{1} \sin \theta_{1} \\\mathcal{P}_{2}=\mathfrak{m}_{2} g y_{2}=\mathfrak{m}_{2} g\left(L_{1} \sin \theta_{1}+L_{2} \sin \left(\theta_{1}+\theta_{2}\right)\right)\end{array}</script><p>å°†åŠ¨èƒ½é¡¹ä¸åŠ¿èƒ½é¡¹å¸¦å…¥æ‹‰æ ¼æœ—æ—¥å‡½æ•° $\eqref{6}$ å³å¯å¾—åˆ°å¹³é¢ $2R$ è¿åŠ¨é“¾çš„åŠ¨åŠ›å­¦æ–¹ç¨‹:</p><script type="math/tex; mode=display">\left\{\begin{aligned}\tau_{1}=&\left(\mathfrak{m}_{1} L_{1}^{2}+\mathfrak{m}_{2}\left(L_{1}^{2}+2 L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right)\right) \ddot{\theta}_{1} \\&+\mathfrak{m}_{2}\left(L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right) \ddot{\theta}_{2}-\mathfrak{m}_{2} L_{1} L_{2} \sin \theta_{2}\left(2 \dot{\theta}_{1} \dot{\theta}_{2}+\dot{\theta}_{2}^{2}\right) \\&+\left(\mathfrak{m}_{1}+\mathfrak{m}_{2}\right) L_{1} g \cos \theta_{1}+\mathfrak{m}_{2} g L_{2} \cos \left(\theta_{1}+\theta_{2}\right), \\\tau_{2}=& \mathfrak{m}_{2}\left(L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right) \ddot{\theta}_{1}+\mathfrak{m}_{2} L_{2}^{2} \ddot{\theta}_{2}+\mathfrak{m}_{2} L_{1} L_{2} \dot{\theta}_{1}^{2} \sin \theta_{2} \\&+\mathfrak{m}_{2} g L_{2} \cos \left(\theta_{1}+\theta_{2}\right) .\end{aligned}\right.</script><p>å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æ˜¯ä¸€ä¸ªç®€å•çš„ $2R$ æœºå™¨äººï¼Œå…¶é€†è¿åŠ¨å­¦æ–¹ç¨‹ä¹Ÿååˆ†å¤æ‚ã€‚å¯¹ä¸Šè¿°å„é¡¹è¿›è¡Œæ•´ç†ï¼Œå¾—åˆ°å¦‚ä¸‹å½¢å¼çš„æ–¹ç¨‹:</p><script type="math/tex; mode=display">\tau=M(\theta) \ddot{\theta}+\underbrace{c(\theta, \dot{\theta})+g(\theta)}_{h(\theta, \dot{\theta})}</script><p>å¼ä¸­</p><script type="math/tex; mode=display">\begin{aligned}M(\theta) &=\left[\begin{array}{cc}\mathfrak{m}_{1} L_{1}^{2}+\mathfrak{m}_{2}\left(L_{1}^{2}+2 L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right) & \mathfrak{m}_{2}\left(L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right) \\\mathfrak{m}_{2}\left(L_{1} L_{2} \cos \theta_{2}+L_{2}^{2}\right) & \mathfrak{m}_{2}L_{2}^{2} \\\end{array}\right] \\c(\theta, \dot{\theta}) &=\left[\begin{array}{c}-\mathfrak{m}_{2} L_{1} L_{2} \sin \theta_{2}\left(2 \dot{\theta}_{1} \dot{\theta}_{2}+\dot{\theta}_{2}^{2}\right) \\\mathfrak{m}_{2} L_{1} L_{2} \dot{\theta}_{1}^{2} \sin \theta_{2}\end{array}\right] \\g(\theta) &=\left[\begin{array}{c}\left(\mathfrak{m}_{1}+\mathfrak{m}_{2}\right) L_{1} g \cos \theta_{1}+\mathfrak{m}_{2} g L_{2} \cos \left(\theta_{1}+\theta_{2}\right) \\\mathfrak{m}_{2} g L_{2} \cos \left(\theta_{1}+\theta_{2}\right)\end{array}\right]\end{aligned}</script><p>å¼ä¸­ <strong>$M(\theta)$ ä¸ºå¯¹ç§°æ­£å®šçš„è´¨é‡çŸ©é˜µ</strong>ï¼Œ <strong>$c(\theta, \dot{\theta})$ ä¸ºé€Ÿåº¦ä¹˜ç§¯é¡¹ï¼ŒåŒ…å«ç§‘é‡Œå¥¥åˆ©å’Œå‘å¿ƒåŠ›çŸ©çš„å‘é‡</strong>ï¼Œå…¶ä¸­åŒ…å« $\dot{\theta}^2$ çš„äºŒæ¬¡é¡¹ç§°ä¸ºå‘å¿ƒé¡¹ï¼ŒåŒ…å« $\dot{\theta}_{i} \dot{\theta}_{j}(i \ne j)$ çš„äºŒæ¬¡é¡¹åˆ™ç§°ä¸ºç§‘é‡Œå¥¥åˆ©é¡¹ã€‚ <strong>$g(\theta)$ ä¸ºé‡åŠ›é¡¹</strong> ï¼Œå› ä¸ºæ­¤å¤„åŠ¿èƒ½ä»…æ¥è‡ªé‡åŠ›ï¼Œè‹¥æœ«ç«¯æœ‰å¼¹ç°§ï¼Œå¼¹ç°§ä¹Ÿä¼šè´¡çŒ®åŠ¿èƒ½ã€‚è¿™äº›æ­ç¤ºäº†è¿åŠ¨æ–¹ç¨‹æ˜¯ $\ddot{\theta}$ çš„çº¿æ€§å‡½æ•°ã€ $\dot{\theta}$ çš„äºŒæ¬¡å‡½æ•°ã€ $\theta$ çš„ä¸‰è§’å‡½æ•°ã€‚ä¸Šè¿°ç»“è®ºä¸ä»…é€‚ç”¨äº $2R$ å‹æœºå™¨äººï¼Œå¯¹äºåŒ…å«è½¬åŠ¨å…³èŠ‚çš„ä¸²è”è¿åŠ¨é“¾ä¹ŸåŒæ ·é€‚ç”¨ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.robotsfan.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æœºå™¨äºº" scheme="https://www.robotsfan.com/tags/%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
  </entry>
  
  <entry>
    <title>æ ‘è“æ´¾ä½¿ç”¨ä¸²å£</title>
    <link href="https://www.robotsfan.com/posts/dab7fbfc.html"/>
    <id>https://www.robotsfan.com/posts/dab7fbfc.html</id>
    <published>2022-03-15T12:30:00.000Z</published>
    <updated>2024-07-17T03:03:42.467Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ ‘è“æ´¾ä½¿ç”¨ä¸²å£"><a href="#æ ‘è“æ´¾ä½¿ç”¨ä¸²å£" class="headerlink" title="æ ‘è“æ´¾ä½¿ç”¨ä¸²å£"></a>æ ‘è“æ´¾ä½¿ç”¨ä¸²å£</h1><p>æ ‘è“æ´¾é»˜è®¤å°† serial0 æ˜ å°„åˆ° å¤–æ¥GPIOçš„15ã€16è„šã€‚é»˜è®¤å°† serial1 æ˜ å°„åˆ° BTè“ç‰™ä¸Šã€‚æ‰€ä»¥å¦‚æœæƒ³è¦å°† ttyAMA0æ˜ å°„åˆ°å¤–éƒ¨ GPIOä¸Šï¼Œåªéœ€è¦ç¦ç”¨è“ç‰™ï¼Œå¹¶å°† serial0 å’Œserial1 ä»–ä»¬é“¾æ¥çš„å¯¹è±¡äº’æ¢ã€‚</p><p>ä½†æ ‘è“æ´¾4Bçš„æ›´æ”¹æ–¹å¼ä¸æ—§ç‰ˆæœ¬ä¸åŒï¼Œç»ˆç«¯è¾“å…¥<code>ls -l /dev/serial*</code>ï¼Œå‘ç°åªæœ‰serial1-&gt;ttyAMA0ï¼Œæ²¡æœ‰serial0ä¹Ÿæ²¡æœ‰ttyS0ï¼Œæ›´æ²¡æœ‰äºŒè€…çš„æ˜ å°„ã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h2><p><strong>ä¸è¦å»ä¿®æ”¹<code>config.txt</code>é‡Œçš„é…ç½®ï¼ï¼ï¼</strong>ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹<strong>è¯¯äººå­å¼Ÿ</strong>ï¼Œæ­¤æ–‡ä»¶å¼€å¤´å°±æ˜ç¡®å£°æ˜äº†ç¦æ­¢ä¿®æ”¹ï¼Œç”¨æˆ·çš„ä¿®æ”¹å‡è¦æ”¾ç½®åˆ°<code>usercfg.txt</code>ä¸­ï¼æ‰“å¼€<code>config.txt</code>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ–‡ä»¶å¼•ç”¨äº†<code>syscfg.txt</code>ï¼Œè¿™ä¸ªæ–‡ä»¶é‡Œé¢å†™äº†<code>enable_uart=0</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä¾¿åœ¨<code>config.txt</code>ä¸­ä¿®æ”¹äº†<code>enable_uart=1</code>ï¼Œä¸‹é¢è¿˜æ˜¯ä¼šè¢«é‡æ–°èµ‹å€¼ä¸º<code>enable_uart=0</code>ã€‚è€Œ<code>usercfg.txt</code>æ˜¯åœ¨<code>syscfg.txt</code>åå¼•ç”¨çš„ï¼Œæ‰€ä»¥ç”¨æˆ·çš„ä¿®æ”¹é¡¹ä¼šè¦†ç›–ä¸Šé¢çš„æ‰€æœ‰é…ç½®ã€‚</p><p>æ­£ç¡®æ–¹æ³•å¦‚ä¸‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /boot/firmware</span><br><span class="line">sudo vi usercfg.txt</span><br></pre></td></tr></table></figure><p>åœ¨é‡Œé¢æ·»åŠ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">enable_uart=1</span><br><span class="line">dtoverlay=disable-bt</span><br></pre></td></tr></table></figure><p>ä¿å­˜ï¼Œç„¶åç¦ç”¨è·Ÿè“ç‰™æœ‰å…³çš„å¼€æœºå¯åŠ¨é¡¹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">disable</span> bluetooth</span><br></pre></td></tr></table></figure><p>é‡å¯æ ‘è“æ´¾</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure><p>ç„¶åå†æ¬¡<code>ls -l /dev/serial*</code>å°±å¯ä»¥çœ‹åˆ°æ­£ç¡®çš„æ˜ å°„å…³ç³»</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="å…¶ä»–" scheme="https://www.robotsfan.com/categories/%E5%85%B6%E4%BB%96/"/>
    
    
    <category term="æ ‘è“æ´¾" scheme="https://www.robotsfan.com/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"/>
    
  </entry>
  
  <entry>
    <title>OpenCVæ–‡æ¡£çŸ«æ­£</title>
    <link href="https://www.robotsfan.com/posts/c780224b.html"/>
    <id>https://www.robotsfan.com/posts/c780224b.html</id>
    <published>2022-03-14T02:30:00.000Z</published>
    <updated>2022-03-14T02:27:16.557Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="OpenCVæ–‡æ¡£çŸ«æ­£"><a href="#OpenCVæ–‡æ¡£çŸ«æ­£" class="headerlink" title="OpenCVæ–‡æ¡£çŸ«æ­£"></a>OpenCVæ–‡æ¡£çŸ«æ­£</h1><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>å°†ä¸€ä¸ªæ–œç€æ‹æ‘„çš„æ–‡æ¡£çŸ«æ­£æˆæ­£çš„ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/opencv-wendang-image_origin.jpg" alt="opencv-wendang-image_origin"></p><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/opencv-wendang-image_output.jpg" alt="opencv-wendang-image_output"></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><ol><li>è¯»å–åŸå§‹å›¾åƒï¼Œè‹¥å›¾åƒå¤ªå¤§å¯ä»¥å…ˆè¿›è¡Œç¼©æ”¾å¤„ç†ï¼Œå¹¶è·å–åŸå§‹å›¾åƒçš„å®½å’Œé«˜</li><li>å¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†å¾—åˆ°è¾¹ç¼˜ï¼Œä¾æ¬¡è¿›è¡Œç°åº¦å¤„ç†ã€é«˜æ–¯æ¨¡ç³Šã€è¾¹ç¼˜æ£€æµ‹ã€è†¨èƒ€ã€è…èš€ã€‚</li><li>æ‰¾åˆ°æœ€å¤§çš„è½®å»“ï¼Œå¹¶æå–è§’ç‚¹<ol><li>è¿›è¡Œé™å™ªå¤„ç†ï¼šæ£€æµ‹è½®å»“é¢ç§¯ï¼Œåªä¿ç•™å¤§äºé˜ˆå€¼é¢ç§¯çš„è½®å»“</li><li>è®¡ç®—æ¯ä¸ªè½®å»“çš„å‘¨é•¿ï¼Œä½¿ç”¨DPç®—æ³•è®¡ç®—å‡ºè½®å»“ç‚¹çš„ä¸ªæ•°ï¼Œè§„åˆ™ä¸ºå‘¨é•¿*0.02</li><li>æ‰¾åˆ°å›¾åƒä¸­é¢ç§¯æœ€å¤§çš„ï¼Œä¸”è§’ç‚¹ä¸º4çš„è½®å»“</li></ol></li><li>å°†æ‰¾åˆ°çš„å››ä¸ªè§’ç‚¹æ’åˆ—æˆä¸€ä¸ªå›ºå®šçš„é¡ºåºï¼Œæ’åˆ—åçš„é¡ºåºä¸ºï¼šå·¦ä¸Šè§’-å³ä¸Šè§’-å·¦ä¸‹è§’-å³ä¸‹è§’<ol><li>å°†æ¯ä¸ªç‚¹çš„xyåæ ‡å€¼ç›¸åŠ (x+y)ï¼Œå·¦ä¸Šè§’çš„ç‚¹çš„åæ ‡å’Œåº”è¯¥æ˜¯æœ€å°çš„ï¼Œå³ä¸‹è§’çš„ç‚¹çš„åæ ‡å’Œåº”è¯¥æ˜¯æœ€å¤§çš„</li><li>å°†æ¯ä¸ªç‚¹çš„xyåæ ‡å€¼ç›¸å‡(x-y)ï¼Œå·¦ä¸‹è§’çš„ç‚¹çš„åæ ‡å·®åº”è¯¥æ˜¯æœ€å°çš„ï¼Œå³ä¸Šè§’çš„ç‚¹çš„åæ ‡å·®åº”è¯¥æ˜¯æœ€å¤§çš„</li><li>é‡æ–°æ’åˆ—å››ä¸ªè§’ç‚¹</li></ol></li><li>è¿›è¡Œé€è§†å˜æ¢<ol><li>æ ¹æ®å˜æ¢å‰åŠå˜æ¢åçš„å››ä¸ªè§’ç‚¹ï¼Œåˆ›å»ºå˜æ¢çŸ©é˜µ</li><li>æ ¹æ®å˜æ¢çŸ©é˜µå¯¹å›¾åƒè¿›è¡Œé€è§†å˜æ¢</li></ol></li><li>è‹¥é€è§†å˜æ¢åæœ‰ä¸€äº›æ¯›è¾¹ï¼ŒæŒ‰éœ€è¦è¿›è¡Œè£å‰ªï¼Œè£å‰ªåé‡æ–°è°ƒæ•´æ¯”ä¾‹<ol><li>åˆ›å»ºä¸€ä¸ªçŸ©å½¢ç”¨æ¥è£å‰ªï¼Œå¹¶è®¾å®šå››å‘¨è£å‰ª5åƒç´ </li><li>è£å‰ªåé‡æ–°è°ƒæ•´å›¾åƒå®½é«˜</li></ol></li><li>æ˜¾ç¤ºå˜æ¢åå›¾åƒ</li></ol><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ä»£ç ä¸­å‡æœ‰è¯¦ç»†æ³¨é‡Šï¼Œè¯·ä»”ç»†é˜…è¯»</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/imgproc.hpp&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€äº›å®šä¹‰</span></span><br><span class="line">Mat image_origin,     <span class="comment">// åŸå§‹å›¾åƒ</span></span><br><span class="line">image_gray,       <span class="comment">// ç°åº¦å¤„ç†åçš„å›¾åƒ</span></span><br><span class="line">image_blur,       <span class="comment">// é«˜æ–¯æ¨¡ç³Šå¤„ç†åçš„å›¾åƒ</span></span><br><span class="line">image_canny,      <span class="comment">// è¾¹ç¼˜æ£€æµ‹åçš„å›¾åƒ</span></span><br><span class="line">image_dilate,     <span class="comment">// è†¨èƒ€åçš„å›¾åƒ</span></span><br><span class="line">image_erode,      <span class="comment">// è…èš€åçš„å›¾åƒ</span></span><br><span class="line">image_preprocess, <span class="comment">// é¢„å¤„ç†åçš„å›¾åƒ</span></span><br><span class="line">image_trans,      <span class="comment">// é€è§†å˜æ¢åçš„å›¾åƒ</span></span><br><span class="line">image_crop;      <span class="comment">// è£å‰ªåçš„å›¾åƒ</span></span><br><span class="line"></span><br><span class="line">vector&lt;Point&gt; origin_points,  <span class="comment">// é‡æ–°æ’åˆ—å‰çš„è§’ç‚¹</span></span><br><span class="line">  reorder_points; <span class="comment">// é‡æ–°æ’åˆ—åçš„è§’ç‚¹</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">int</span> origin_width = <span class="number">0</span>, origin_height = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å‡½æ•°åŠŸèƒ½ï¼šé¢„å¤„ç†ï¼Œä¾æ¬¡è¿›è¡Œç°åº¦å¤„ç†ã€é«˜æ–¯æ¨¡ç³Šã€è¾¹ç¼˜æ£€æµ‹ã€è†¨èƒ€ã€è…èš€ã€‚</span></span><br><span class="line"><span class="comment"> * è¾“å…¥ï¼šå›¾åƒï¼Œæ˜¯å¦æ˜¾ç¤º(0-ä¸æ˜¾ç¤º 1-æ˜¾ç¤ºæ¯ä¸€æ­¥å¤„ç†åçš„å›¾åƒ 2-åªæ˜¾ç¤ºæœ€ç»ˆå›¾åƒ)</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function">Mat <span class="title">PreProcess</span><span class="params">(<span class="keyword">const</span> Mat&amp; image, <span class="keyword">int</span> display)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// ç°åº¦å¤„ç†</span></span><br><span class="line"><span class="built_in">cvtColor</span>(image, image_gray, COLOR_BGR2GRAY);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜æ–¯æ¨¡ç³Š</span></span><br><span class="line"><span class="built_in">GaussianBlur</span>(image_gray, image_blur, <span class="built_in">Size</span>(<span class="number">3</span>, <span class="number">3</span>), <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾¹ç¼˜æ£€æµ‹(è¾¹ç¼˜æ£€æµ‹å‰å¯¹å›¾åƒè¿›è¡Œä¸€æ¬¡é«˜æ–¯æ¨¡ç³Š)</span></span><br><span class="line"><span class="built_in">Canny</span>(image_blur, image_canny, <span class="number">50</span>, <span class="number">150</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è†¨èƒ€å’Œè…èš€(æœ‰æ—¶è¿›è¡Œè¾¹ç¼˜æ£€æµ‹çš„æ—¶å€™ï¼Œæ²¡æœ‰è¢«å®Œå…¨å¡«å……ï¼Œæˆ–è€…æ— æ³•æ­£ç¡®æ£€æµ‹ï¼Œå¯ä»¥ç”¨è†¨èƒ€å’Œè…èš€)</span></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªç”¨äºè†¨èƒ€å’Œè…èš€çš„å†…æ ¸ï¼Œåé¢çš„æ•°å­—è¶Šå¤§è†¨èƒ€çš„è¶Šå¤š(æ•°å­—è¦ç”¨å¥‡æ•°)</span></span><br><span class="line">Mat kernel = <span class="built_in">getStructuringElement</span>(MORPH_RECT, <span class="built_in">Size</span>(<span class="number">3</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment">// è†¨èƒ€</span></span><br><span class="line"><span class="built_in">dilate</span>(image_canny, image_dilate, kernel);</span><br><span class="line"><span class="comment">// è…èš€</span></span><br><span class="line"><span class="comment">//erode(image_dilate, image_erode, kernel);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ˜¾ç¤ºé¢„å¤„ç†æ•ˆæœ</span></span><br><span class="line"><span class="keyword">if</span>(display == <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;ç°åº¦å¤„ç†åçš„å›¾åƒ&quot;</span>, image_gray);</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;é«˜æ–¯æ¨¡ç³Šåçš„å›¾åƒ&quot;</span>, image_blur);</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;è¾¹ç¼˜æ£€æµ‹åçš„å›¾åƒ&quot;</span>, image_canny);</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;è†¨èƒ€åçš„å›¾åƒ&quot;</span>, image_dilate);</span><br><span class="line"><span class="comment">//imshow(&quot;è…èš€åçš„å›¾åƒ&quot;, image_erode);</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(display == <span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;é¢„å¤„ç†åçš„å›¾åƒ&quot;</span>, image_dilate);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> image_dilate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å‡½æ•°åŠŸèƒ½ï¼šæ‰¾åˆ°é¢ç§¯æœ€å¤§çš„è½®å»“</span></span><br><span class="line"><span class="comment"> * è¾“å…¥ï¼šæºå›¾åƒ</span></span><br><span class="line"><span class="comment"> * è¾“å‡ºï¼šæœ€å¤§è½®å»“çš„å››ä¸ªè§’ç‚¹æ•°ç»„</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function">vector&lt;Point&gt; <span class="title">GetMaxContour</span><span class="params">(<span class="keyword">const</span> Mat&amp; img_input)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * contoursæ˜¯ä¸€ä¸ªåŒé‡å‘é‡ï¼Œå‘é‡å†…æ¯ä¸ªå…ƒç´ ä¿å­˜äº†ä¸€ç»„ç”±è¿ç»­çš„Pointç‚¹æ„æˆçš„ç‚¹çš„é›†åˆçš„å‘é‡ï¼Œæ¯ä¸€ç»„Pointç‚¹é›†å°±æ˜¯ä¸€ä¸ªè½®å»“ã€‚æœ‰å¤šå°‘è½®å»“ï¼Œå‘é‡contourså°±æœ‰å¤šå°‘å…ƒç´ ã€‚</span></span><br><span class="line"><span class="comment"> * ç›¸å½“äºåˆ›å»ºäº†è¿™æ ·ä¸€ä¸ªå‘é‡&#123;&#123;Point(),Point()&#125;,&#123;&#125;,&#123;&#125;&#125;</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line">vector&lt;vector&lt;Point&gt;&gt; contours;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * hierarchyå‘é‡å†…æ¯ä¸ªå…ƒç´ ä¿å­˜äº†ä¸€ä¸ªåŒ…å«4ä¸ªintæ•´å‹çš„æ•°ç»„ã€‚å‘é‡hiararchyå†…çš„å…ƒç´ å’Œè½®å»“å‘é‡contourså†…çš„å…ƒç´ æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå‘é‡çš„å®¹é‡ç›¸åŒã€‚</span></span><br><span class="line"><span class="comment"> * hierarchyå‘é‡å†…æ¯ä¸€ä¸ªå…ƒç´ çš„4ä¸ªintå‹å˜é‡â€”â€”hierarchy[i][0] ~ hierarchy[i][3]ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬iä¸ªè½®å»“çš„åä¸€ä¸ªè½®å»“ã€å‰ä¸€ä¸ªè½®å»“ã€çˆ¶è½®å»“ã€å†…åµŒè½®å»“çš„ç´¢å¼•ç¼–å·ã€‚</span></span><br><span class="line"><span class="comment"> * å¦‚æœå½“å‰è½®å»“æ²¡æœ‰å¯¹åº”çš„åä¸€ä¸ªè½®å»“ã€å‰ä¸€ä¸ªè½®å»“ã€çˆ¶è½®å»“æˆ–å†…åµŒè½®å»“çš„è¯ï¼Œåˆ™hierarchy[i][0] ~ hierarchy[i][3]çš„ç›¸åº”ä½è¢«è®¾ç½®ä¸ºé»˜è®¤å€¼-1ã€‚</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line">vector&lt;Vec4i&gt; hierarchy;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * findContoursæ‰¾åˆ°è½®å»“</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šå•é€šé“å›¾åƒçŸ©é˜µï¼Œå¯ä»¥æ˜¯ç°åº¦å›¾ï¼Œä½†æ›´å¸¸ç”¨çš„æ˜¯äºŒå€¼å›¾åƒï¼Œä¸€èˆ¬æ˜¯ç»è¿‡Cannyã€æ‹‰æ™®æ‹‰æ–¯ç­‰è¾¹ç¼˜æ£€æµ‹ç®—å­å¤„ç†è¿‡çš„äºŒå€¼å›¾åƒï¼›</span></span><br><span class="line"><span class="comment"> * ç¬¬äºŒä¸ªå‚æ•°ï¼šcontours ï¼ˆå‰æ–‡ä»‹ç»è¿‡ï¼‰</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šhierarchyï¼ˆå‰æ–‡ä»‹ç»è¿‡ï¼‰</span></span><br><span class="line"><span class="comment"> * ç¬¬å››ä¸ªå‚æ•°ï¼šè½®å»“çš„æ£€ç´¢æ¨¡å¼</span></span><br><span class="line"><span class="comment"> * å–å€¼ä¸€ï¼šCV_RETR_EXTERNAL åªæ£€æµ‹æœ€å¤–å›´è½®å»“ï¼ŒåŒ…å«åœ¨å¤–å›´è½®å»“å†…çš„å†…å›´è½®å»“è¢«å¿½ç•¥</span></span><br><span class="line"><span class="comment"> * å–å€¼äºŒï¼šCV_RETR_LIST     æ£€æµ‹æ‰€æœ‰çš„è½®å»“ï¼ŒåŒ…æ‹¬å†…å›´ã€å¤–å›´è½®å»“ï¼Œä½†æ˜¯æ£€æµ‹åˆ°çš„è½®å»“ä¸å»ºç«‹ç­‰çº§å…³ç³»ï¼Œå½¼æ­¤ä¹‹é—´ç‹¬ç«‹ï¼Œæ²¡æœ‰ç­‰çº§å…³ç³»ï¼Œè¿™å°±æ„å‘³ç€è¿™ä¸ªæ£€ç´¢æ¨¡å¼ä¸‹ä¸å­˜åœ¨çˆ¶è½®å»“æˆ–å†…åµŒè½®å»“ï¼Œæ‰€ä»¥hierarchyå‘é‡å†…æ‰€æœ‰å…ƒç´ çš„ç¬¬3ã€ç¬¬4ä¸ªåˆ†é‡éƒ½ä¼šè¢«ç½®ä¸º-1ï¼Œå…·ä½“ä¸‹æ–‡ä¼šè®²åˆ°</span></span><br><span class="line"><span class="comment"> * å–å€¼ä¸‰ï¼šCV_RETR_CCOMP    æ£€æµ‹æ‰€æœ‰çš„è½®å»“ï¼Œä½†æ‰€æœ‰è½®å»“åªå»ºç«‹ä¸¤ä¸ªç­‰çº§å…³ç³»ï¼Œå¤–å›´ä¸ºé¡¶å±‚ï¼Œè‹¥å¤–å›´å†…çš„å†…å›´è½®å»“è¿˜åŒ…å«äº†å…¶ä»–çš„è½®å»“ä¿¡æ¯ï¼Œåˆ™å†…å›´å†…çš„æ‰€æœ‰è½®å»“å‡å½’å±äºé¡¶å±‚</span></span><br><span class="line"><span class="comment"> * å–å€¼å››ï¼šCV_RETR_TREE     æ£€æµ‹æ‰€æœ‰è½®å»“ï¼Œæ‰€æœ‰è½®å»“å»ºç«‹ä¸€ä¸ªç­‰çº§æ ‘ç»“æ„ã€‚å¤–å±‚è½®å»“åŒ…å«å†…å±‚è½®å»“ï¼Œå†…å±‚è½®å»“è¿˜å¯ä»¥ç»§ç»­åŒ…å«å†…åµŒè½®å»“ã€‚</span></span><br><span class="line"><span class="comment"> * ç¬¬äº”ä¸ªå‚æ•°ï¼šè½®å»“çš„è¿‘ä¼¼æ–¹æ³•</span></span><br><span class="line"><span class="comment"> * å–å€¼ä¸€ï¼šCV_CHAIN_APPROX_NONE   ä¿å­˜ç‰©ä½“è¾¹ç•Œä¸Šæ‰€æœ‰è¿ç»­çš„è½®å»“ç‚¹åˆ°contourså‘é‡å†…</span></span><br><span class="line"><span class="comment"> * å–å€¼äºŒï¼šCV_CHAIN_APPROX_SIMPLE ä»…ä¿å­˜è½®å»“çš„æ‹ç‚¹ä¿¡æ¯ï¼ŒæŠŠæ‰€æœ‰è½®å»“æ‹ç‚¹å¤„çš„ç‚¹ä¿å­˜å…¥contourså‘é‡å†…ï¼Œæ‹ç‚¹ä¸æ‹ç‚¹ä¹‹é—´ç›´çº¿æ®µä¸Šçš„ä¿¡æ¯ç‚¹ä¸äºˆä¿ç•™</span></span><br><span class="line"><span class="comment"> * å–å€¼ä¸‰å’Œå››ï¼šCV_CHAIN_APPROX_TC89_L1ï¼ŒCV_CHAIN_APPROX_TC89_KCOSä½¿ç”¨teh-Chinl chain è¿‘ä¼¼ç®—æ³•</span></span><br><span class="line"><span class="comment"> * ç¬¬å…­ä¸ªå‚æ•°ï¼šPointåç§»é‡ï¼Œæ‰€æœ‰çš„è½®å»“ä¿¡æ¯ç›¸å¯¹äºåŸå§‹å›¾åƒå¯¹åº”ç‚¹çš„åç§»é‡ï¼Œç›¸å½“äºåœ¨æ¯ä¸€ä¸ªæ£€æµ‹å‡ºçš„è½®å»“ç‚¹ä¸ŠåŠ ä¸Šè¯¥åç§»é‡ï¼Œä¸”Pointå¯ä»¥æ˜¯è´Ÿå€¼ã€‚ä¸å¡«ä¸ºé»˜è®¤ä¸åç§»Point()</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="built_in">findContours</span>(img_input, contours, hierarchy, RETR_EXTERNAL, CHAIN_APPROX_SIMPLE);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * drawContoursç»˜å‡ºè½®å»“</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæŒ‡æ˜åœ¨å“ªå¹…å›¾åƒä¸Šç»˜åˆ¶è½®å»“ã€‚imageä¸ºä¸‰é€šé“æ‰èƒ½æ˜¾ç¤ºè½®å»“</span></span><br><span class="line"><span class="comment"> * ç¬¬äºŒä¸ªå‚æ•°ï¼šcontours</span></span><br><span class="line"><span class="comment"> * ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæŒ‡å®šç»˜åˆ¶å“ªæ¡è½®å»“ï¼Œå¦‚æœæ˜¯-1ï¼Œåˆ™ç»˜åˆ¶å…¶ä¸­çš„æ‰€æœ‰è½®å»“</span></span><br><span class="line"><span class="comment"> * ç¬¬å››ä¸ªå‚æ•°ï¼šè½®å»“çº¿é¢œè‰²</span></span><br><span class="line"><span class="comment"> * ç¬¬äº”ä¸ªå‚æ•°ï¼šè½®å»“çº¿çš„å®½åº¦ï¼Œå¦‚æœæ˜¯-1ï¼ˆFILLEDï¼‰ï¼Œåˆ™ä¸ºå¡«å……</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="comment">//// ä¸å…¨è¾“å‡ºï¼Œåœ¨ä¸‹æ–‡åªè¾“å‡ºè§’ç‚¹</span></span><br><span class="line"><span class="comment">//drawContours(image, contours, -1, Scalar(255, 0, 255), 2);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è½®å»“ï¼Œå¤§å°ä¸contoursç›¸åŒï¼Œä½†å†…å±‚å‘é‡ä¸­åªæœ‰è§’ç‚¹ï¼ˆä¾‹å¦‚ä¸‰è§’å½¢å°±æ˜¯3ï¼Œå››è¾¹å½¢å°±æ˜¯4ï¼Œåœ†å½¢å¯èƒ½ä¸ƒå…«ä¸ªï¼‰</span></span><br><span class="line">vector&lt;vector&lt;Point&gt;&gt; <span class="built_in">corners_contours</span>(contours.<span class="built_in">size</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è¾¹ç•Œæ¡†ï¼Œå¤§å°ä¸contoursç›¸åŒ</span></span><br><span class="line"><span class="function">vector&lt;Rect&gt; <span class="title">bounding_box</span><span class="params">(contours.size())</span></span>;</span><br><span class="line"></span><br><span class="line">vector&lt;Point&gt; biggest_contours;</span><br><span class="line"><span class="keyword">double</span> max_area = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; contours.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// æ£€æµ‹è½®å»“é¢ç§¯</span></span><br><span class="line"><span class="keyword">double</span> contour_area = <span class="built_in">contourArea</span>(contours[i]);</span><br><span class="line"><span class="comment">//cout &lt;&lt; area &lt;&lt; endl;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾å›¾åƒä¸­æœ‰å™ªå£°ï¼Œéœ€è¦å°†å…¶è¿‡æ»¤ï¼Œåªä¿ç•™é¢ç§¯å¤§äº1000çš„è½®å»“</span></span><br><span class="line"><span class="keyword">if</span> (contour_area &gt; <span class="number">1000</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// è®¡ç®—æ¯ä¸ªè½®å»“çš„å‘¨é•¿</span></span><br><span class="line"><span class="keyword">double</span> contour_perimeter = <span class="built_in">arcLength</span>(contours[i], <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨DPç®—æ³•è®¡ç®—å‡ºè½®å»“ç‚¹çš„ä¸ªæ•°ï¼Œè§„åˆ™ä¸ºå‘¨é•¿*0.02</span></span><br><span class="line"><span class="built_in">approxPolyDP</span>(contours[i], corners_contours[i], <span class="number">0.02</span> * contour_perimeter, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰¾åˆ°å›¾åƒä¸­é¢ç§¯æœ€å¤§çš„ï¼Œä¸”è§’ç‚¹ä¸º4çš„è½®å»“</span></span><br><span class="line"><span class="keyword">if</span> (contour_area &gt; max_area &amp;&amp; corners_contours[i].<span class="built_in">size</span>() == <span class="number">4</span> ) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//drawContours(image_origin, conPoly, i, Scalar(255, 0, 255), 5);</span></span><br><span class="line">biggest_contours = &#123; corners_contours[i][<span class="number">0</span>],corners_contours[i][<span class="number">1</span>] ,corners_contours[i][<span class="number">2</span>] ,corners_contours[i][<span class="number">3</span>] &#125;;</span><br><span class="line">max_area = contour_area;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//// åªç»˜åˆ¶è§’ç‚¹ä¹‹é—´çš„è¾¹æ¡†çº¿ï¼ŒDebugç”¨ï¼Œå–æ¶ˆæ³¨é‡Šå¯ä»¥çœ‹åˆ°æ£€æµ‹å‡ºçš„æ‰€æœ‰è¾¹ç•Œæ¡†</span></span><br><span class="line"><span class="comment">//drawContours(image_origin, corners_contours, i, Scalar(255, 0, 255), 2);</span></span><br><span class="line"><span class="comment">//rectangle(image_origin, bounding_box[i].tl(), bounding_box[i].br(), Scalar(0, 255, 0), 5);</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”å›æœ€å¤§çš„è½®å»“</span></span><br><span class="line"><span class="keyword">return</span> biggest_contours;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å‡½æ•°åŠŸèƒ½ï¼šç»˜åˆ¶ä¸€äº›ç‚¹</span></span><br><span class="line"><span class="comment"> * è¾“å…¥ï¼šç‚¹é›†ï¼Œé¢œè‰²</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DrawPoints</span><span class="params">(vector&lt;Point&gt; points, <span class="keyword">const</span> Scalar&amp; color)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; points.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">circle</span>(image_origin, points[i], <span class="number">10</span>, color, FILLED);</span><br><span class="line"><span class="built_in">putText</span>(image_origin, <span class="built_in">to_string</span>(i), points[i], FONT_HERSHEY_PLAIN, <span class="number">4</span>, color, <span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å‡½æ•°åŠŸèƒ½ï¼šé‡æ–°æ’åˆ—å››ä¸ªè§’ç‚¹çš„é¡ºåº</span></span><br><span class="line"><span class="comment"> * æœ€ç»ˆé¡ºåºä¸ºï¼š 0  1</span></span><br><span class="line"><span class="comment"> *   2  3</span></span><br><span class="line"><span class="comment"> *   æ•°ç»„ä¸­ä¸ºå·¦ä¸Šè§’-å³ä¸Šè§’-å·¦ä¸‹è§’-å³ä¸‹è§’</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function">vector&lt;Point&gt; <span class="title">ReorderPoints</span><span class="params">(vector&lt;Point&gt; points)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">vector&lt;Point&gt; newPoints;</span><br><span class="line">vector&lt;<span class="keyword">int</span>&gt;  sumPoints, subPoints;</span><br><span class="line"></span><br><span class="line"><span class="comment">// OpenCVä¸­å·¦ä¸Šé¡¶ç‚¹ä¸º(0,0)ï¼Œå³ä¸ºxè½´æ­£å‘ï¼Œä¸‹ä¸ºyè½´æ­£å‘ã€‚</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">// å°†æ¯ä¸ªç‚¹çš„xyåæ ‡å€¼ç›¸åŠ (x+y)ï¼Œå·¦ä¸Šè§’çš„ç‚¹çš„åæ ‡å’Œåº”è¯¥æ˜¯æœ€å°çš„ï¼Œå³ä¸‹è§’çš„ç‚¹çš„åæ ‡å’Œåº”è¯¥æ˜¯æœ€å¤§çš„</span></span><br><span class="line">sumPoints.<span class="built_in">push_back</span>(points[i].x + points[i].y);</span><br><span class="line"><span class="comment">// å°†æ¯ä¸ªç‚¹çš„xyåæ ‡å€¼ç›¸å‡(x-y)ï¼Œå·¦ä¸‹è§’çš„ç‚¹çš„åæ ‡å·®åº”è¯¥æ˜¯æœ€å°çš„ï¼Œå³ä¸Šè§’çš„ç‚¹çš„åæ ‡å·®åº”è¯¥æ˜¯æœ€å¤§çš„</span></span><br><span class="line">subPoints.<span class="built_in">push_back</span>(points[i].x - points[i].y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é‡æ–°æ’åˆ—</span></span><br><span class="line">newPoints.<span class="built_in">push_back</span>(points[<span class="built_in">min_element</span>(sumPoints.<span class="built_in">begin</span>(), sumPoints.<span class="built_in">end</span>()) - sumPoints.<span class="built_in">begin</span>()]); <span class="comment">// 0 å’Œçš„æœ€å°å€¼</span></span><br><span class="line">newPoints.<span class="built_in">push_back</span>(points[<span class="built_in">max_element</span>(subPoints.<span class="built_in">begin</span>(), subPoints.<span class="built_in">end</span>()) - subPoints.<span class="built_in">begin</span>()]); <span class="comment">// 1 å·®çš„æœ€å¤§å€¼</span></span><br><span class="line">newPoints.<span class="built_in">push_back</span>(points[<span class="built_in">min_element</span>(subPoints.<span class="built_in">begin</span>(), subPoints.<span class="built_in">end</span>()) - subPoints.<span class="built_in">begin</span>()]); <span class="comment">// 2 å·®çš„æœ€å°å€¼</span></span><br><span class="line">newPoints.<span class="built_in">push_back</span>(points[<span class="built_in">max_element</span>(sumPoints.<span class="built_in">begin</span>(), sumPoints.<span class="built_in">end</span>()) - sumPoints.<span class="built_in">begin</span>()]); <span class="comment">// 3 å’Œçš„æœ€å¤§å€¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> newPoints;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * å‡½æ•°åŠŸèƒ½ï¼š</span></span><br><span class="line"><span class="comment"> * è¾“å…¥ï¼šæºå›¾åƒï¼Œå››ä¸ªè§’ç‚¹çš„é›†åˆ(è§’ç‚¹çš„é¡ºåºä¸ºï¼Œå·¦ä¸Šè§’-å³ä¸Šè§’-å·¦ä¸‹è§’-å³ä¸‹è§’)ï¼Œè¾“å‡ºçš„å®½ï¼Œè¾“å‡ºçš„é«˜</span></span><br><span class="line"><span class="comment"> * è¾“å‡ºï¼šé€è§†å˜æ¢åçš„å›¾åƒ</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="function">Mat <span class="title">PerspectiveTrans</span><span class="params">(<span class="keyword">const</span> Mat&amp; img, vector&lt;Point&gt; points, <span class="keyword">float</span> width, <span class="keyword">float</span> height )</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// å‰é¢ç»è¿‡é‡æ–°æ’åˆ—ï¼Œå››ä¸ªè§’ç‚¹çš„é¡ºåºä¸ºï¼šå·¦ä¸Šè§’-å³ä¸Šè§’-å·¦ä¸‹è§’-å³ä¸‹è§’</span></span><br><span class="line">Point2f src[<span class="number">4</span>] = &#123; points[<span class="number">0</span>],points[<span class="number">1</span>],points[<span class="number">2</span>],points[<span class="number">3</span>] &#125;;</span><br><span class="line"><span class="comment">// å˜æ¢åçš„å››ä¸ªè§’ç‚¹</span></span><br><span class="line">Point2f dst[<span class="number">4</span>] = &#123; &#123;<span class="number">0.0f</span>,<span class="number">0.0f</span>&#125;,&#123;width,<span class="number">0.0f</span>&#125;,&#123;<span class="number">0.0f</span>,height&#125;,&#123;width,height&#125; &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå˜æ¢çŸ©é˜µ</span></span><br><span class="line">Mat matrix = <span class="built_in">getPerspectiveTransform</span>(src, dst);</span><br><span class="line"><span class="comment">// é€è§†å˜æ¢</span></span><br><span class="line"><span class="built_in">warpPerspective</span>(img, image_trans, matrix, <span class="built_in">Point</span>(width, height));</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> image_trans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">// 1.è¯»å–åŸå§‹å›¾åƒ</span></span><br><span class="line">string path = <span class="string">&quot;res/image_origin.jpg&quot;</span>;</span><br><span class="line">image_origin = <span class="built_in">imread</span>(path);</span><br><span class="line"></span><br><span class="line"><span class="comment">//// è‹¥å›¾åƒå¤ªå¤§å¯ä»¥å…ˆè¿›è¡Œç¼©æ”¾å¤„ç†</span></span><br><span class="line"><span class="comment">//resize(image_origin, image_origin, Size(), 0.5, 0.5);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–åŸå§‹å›¾åƒçš„å®½å’Œé«˜</span></span><br><span class="line">origin_width  = image_origin.<span class="built_in">size</span>().width;</span><br><span class="line">origin_height = image_origin.<span class="built_in">size</span>().height;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.å¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†å¾—åˆ°è¾¹ç¼˜ï¼Œä¾æ¬¡è¿›è¡Œç°åº¦å¤„ç†ã€é«˜æ–¯æ¨¡ç³Šã€è¾¹ç¼˜æ£€æµ‹ã€è†¨èƒ€ã€è…èš€ã€‚</span></span><br><span class="line">image_preprocess = <span class="built_in">PreProcess</span>(image_origin, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.æ‰¾åˆ°æœ€å¤§çš„è½®å»“ï¼Œå¹¶æå–è§’ç‚¹</span></span><br><span class="line">origin_points = <span class="built_in">GetMaxContour</span>(image_preprocess);</span><br><span class="line"><span class="comment">//DrawPoints(origin_points, Scalar(0, 0, 255)); // çº¢è‰²</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶å‘ç°ï¼Œè§’ç‚¹çš„é¡ºåºä¸å›ºå®šï¼Œä¸ºäº†åé¢è¿›è¡Œé€è§†å˜æ¢æ—¶ä¸ä»£ç ä¸­å˜æ¢åç‚¹é›†çš„é¡ºåºç›¸åŒï¼Œéœ€è¦å°†å…¶æ’åˆ—æˆä¸€ä¸ªå›ºå®šçš„é¡ºåºï¼Œæ’åˆ—åçš„é¡ºåºä¸ºï¼šå·¦ä¸Šè§’-å³ä¸Šè§’-å·¦ä¸‹è§’-å³ä¸‹è§’</span></span><br><span class="line">reorder_points = <span class="built_in">ReorderPoints</span>(origin_points);</span><br><span class="line"><span class="comment">//DrawPoints(reorder_points, Scalar(0, 255, 0)); //ç»¿è‰²</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.é€è§†å˜æ¢</span></span><br><span class="line">image_trans = <span class="built_in">PerspectiveTrans</span>(image_origin, reorder_points, origin_width, origin_height);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€è§†å˜æ¢åæœ‰ä¸€äº›æ¯›è¾¹ï¼Œè‹¥éœ€è¦å¯ä»¥è¿›è¡Œè£å‰ª</span></span><br><span class="line"><span class="comment">// å››å‘¨è£å‰ª5åƒç´ </span></span><br><span class="line"><span class="keyword">int</span> cropVal= <span class="number">5</span>;</span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªçŸ©å½¢ç”¨æ¥è£å‰ª</span></span><br><span class="line"><span class="function">Rect <span class="title">roi</span><span class="params">(cropVal, cropVal, origin_width - (<span class="number">2</span> * cropVal), origin_height - (<span class="number">2</span> * cropVal))</span></span>;</span><br><span class="line">image_crop = <span class="built_in">image_trans</span>(roi);</span><br><span class="line"><span class="comment">// è£å‰ªåé‡æ–°è°ƒæ•´æ¯”ä¾‹</span></span><br><span class="line"><span class="built_in">resize</span>(image_crop, image_crop, <span class="built_in">Size</span>(origin_width, origin_height));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5.æ˜¾ç¤ºå¹¶è¾“å‡ºå˜æ¢åå›¾åƒ</span></span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;æºå›¾åƒ&quot;</span>, image_origin);</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;æœ€ç»ˆå›¾åƒ&quot;</span>, image_crop);</span><br><span class="line">    </span><br><span class="line"><span class="built_in">imwrite</span>(<span class="string">&quot;res/image_output.jpg&quot;</span>, image_crop);</span><br><span class="line"></span><br><span class="line"><span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="https://fan-ziqi.oss-cn-beijing.aliyuncs.com/img/opencv-wendang-image.jpg" alt="opencv-wendang-image"></p><h2 id><a href="#" class="headerlink" title=" "></a> </h2>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="OpenCV" scheme="https://www.robotsfan.com/categories/OpenCV/"/>
    
    
    <category term="OpenCV" scheme="https://www.robotsfan.com/tags/OpenCV/"/>
    
  </entry>
  
</feed>
