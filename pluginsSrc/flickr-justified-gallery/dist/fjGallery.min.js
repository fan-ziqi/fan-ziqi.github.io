/*!
 * Name    : Flickr's Justified Gallery [fjGallery]
 * Version : 2.0.0
 * Author  : nK <https://nkdev.info>
 * GitHub  : https://github.com/nk-o/flickr-justified-gallery
 */!function(){var i=[,function(t,e,i){i="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};t.exports=i},function(t,e,i){"use strict";i.r(e);var a=i(3),s=i(7),n=i(4),o=i.n(n),n=i(5),u=i.n(n),c=i(1);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e,t){var i,n=Object.keys(e);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(e),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)),n}function h(n){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach(function(t){var e,i;e=n,t=o[i=t],i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=[],g=(0,s.default)(function(){d.forEach(function(t){t.resize()})});function p(t,e){function i(){c()}function n(){c()}function o(){0<t.naturalWidth&&c()}var r,a=!1,s=!1,c=function(){a?e(a):(a={width:t.naturalWidth,height:t.naturalHeight},e(a),clearInterval(r),s&&l())},l=function(){s=!1,t.removeEventListener("load",i),t.removeEventListener("error",n)};o(),a||(s=!0,t.addEventListener("load",i),t.addEventListener("error",n),r=setInterval(o,100))}c.window.addEventListener("resize",g),c.window.addEventListener("orientationchange",g),c.window.addEventListener("load",g),o()(function(){g()});var y=0,w=function(){function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r);var i=this;i.instanceID=y++,i.$container=t,i.images=[],i.defaults={itemSelector:".fj-gallery-item",imageSelector:"img",gutter:10,rowHeight:320,rowHeightTolerance:.25,maxRowsCount:Number.POSITIVE_INFINITY,lastRow:"left",transitionDuration:"0.3s",calculateItemsHeight:!1,resizeDebounce:100,isRtl:"rtl"===i.css(i.$container,"direction"),onInit:null,onDestroy:null,onAppendImages:null,onBeforeJustify:null,onJustify:null};var n=i.$container.dataset||{},o={};Object.keys(n).forEach(function(t){var e=t.substr(0,1).toLowerCase()+t.substr(1);e&&void 0!==i.defaults[e]&&(o[e]=n[t])}),i.options=h(h(h({},i.defaults),o),e),i.pureOptions=h({},i.options),i.resize=(0,a.debounce)(i.options.resizeDebounce,i.resize),i.justify=(0,s.default)(i.justify.bind(i)),i.init()}var t,e,i;return t=r,(e=[{key:"css",value:function(e,i){return"string"==typeof i?c.window.getComputedStyle(e).getPropertyValue(i):(Object.keys(i).forEach(function(t){e.style[t]=i[t]}),e)}},{key:"applyTransition",value:function(t,e){this.onTransitionEnd(t)(),this.css(t,{"transition-property":e.join(", "),"transition-duration":this.options.transitionDuration}),t.addEventListener("transitionend",this.onTransitionEnd(t,e),!1)}},{key:"onTransitionEnd",value:function(t){var e=this;return function(){e.css(t,{"transition-property":"","transition-duration":""}),t.removeEventListener("transitionend",e.onTransitionEnd(t))}}},{key:"addToFjGalleryList",value:function(){d.push(this),g()}},{key:"removeFromFjGalleryList",value:function(){var i=this;d.forEach(function(t,e){t.instanceID===i.instanceID&&d.splice(e,1)})}},{key:"init",value:function(){var t=this;t.appendImages(t.$container.querySelectorAll(t.options.itemSelector)),t.addToFjGalleryList(),t.options.onInit&&t.options.onInit.call(t)}},{key:"appendImages",value:function(t){var n=this;(t=c.window.jQuery&&t instanceof c.window.jQuery?t.get():t)&&t.length&&(t.forEach(function(t){var i;!t||t.fjGalleryImage||!t.querySelector||(i=t.querySelector(n.options.imageSelector))&&(t.fjGalleryImage=n,(t={$item:t,$image:i,width:parseFloat(i.getAttribute("width"))||!1,height:parseFloat(i.getAttribute("height"))||!1,loadSizes:function(){var e=this;p(i,function(t){e.width===t.width&&e.height===t.height||(e.width=t.width,e.height=t.height,n.resize())})}}).loadSizes(),n.images.push(t))}),n.options.onAppendImages&&n.options.onAppendImages.call(n,[t]),n.justify())}},{key:"justify",value:function(){var i=this,e=[];i.justifyCount=(i.justifyCount||0)+1,i.options.onBeforeJustify&&i.options.onBeforeJustify.call(i),i.images.forEach(function(t){t.width&&t.height&&e.push(t.width/t.height)});var n={containerWidth:i.$container.getBoundingClientRect().width,containerPadding:{top:parseFloat(i.css(i.$container,"padding-top"))||0,right:parseFloat(i.css(i.$container,"padding-right"))||0,bottom:parseFloat(i.css(i.$container,"padding-bottom"))||0,left:parseFloat(i.css(i.$container,"padding-left"))||0},boxSpacing:i.options.gutter,targetRowHeight:i.options.rowHeight,targetRowHeightTolerance:i.options.rowHeightTolerance,maxNumRows:i.options.maxRowsCount,showWidows:"hide"!==i.options.lastRow},o=u()(e,n);if(o.widowCount&&("center"===i.options.lastRow||"right"===i.options.lastRow)){var t=o.boxes[o.boxes.length-1],r=n.containerWidth-t.width-t.left;"center"===i.options.lastRow&&(r/=2),"right"===i.options.lastRow&&(r-=n.containerPadding.right);for(var a=1;a<=o.widowCount;a++)o.boxes[o.boxes.length-a].left=o.boxes[o.boxes.length-a].left+r}i.options.isRtl&&o.boxes.forEach(function(t,e){o.boxes[e].left=n.containerWidth-o.boxes[e].left-o.boxes[e].width-n.containerPadding.right+n.containerPadding.left});var s=0,c=0,l={};i.images.forEach(function(t,e){o.boxes[s]&&t.width&&t.height?(i.options.calculateItemsHeight&&void 0===l[o.boxes[s].top]&&Object.keys(l).length&&(c+=l[Object.keys(l).pop()]-o.boxes[e-1].height),i.options.transitionDuration&&1<i.justifyCount&&i.applyTransition(t.$item,["transform"]),i.css(t.$item,{display:"",position:"absolute",transform:"translateX(".concat(o.boxes[s].left,"px) translateY(").concat(o.boxes[s].top+c,"px) translateZ(0)"),width:"".concat(o.boxes[s].width,"px")}),i.options.calculateItemsHeight&&(e=t.$item.getBoundingClientRect(),(void 0===l[o.boxes[s].top]||l[o.boxes[s].top]<e.height)&&(l[o.boxes[s].top]=e.height)),s++):i.css(t.$item,{display:"none"})}),i.options.calculateItemsHeight&&Object.keys(l).length&&(c+=l[Object.keys(l).pop()]-o.boxes[o.boxes.length-1].height),i.options.transitionDuration&&i.applyTransition(i.$container,["height"]),i.css(i.$container,{height:"".concat(o.containerHeight+c,"px")}),i.options.onJustify&&i.options.onJustify.call(i)}},{key:"updateOptions",value:function(t){this.options=h(h({},this.options),t),this.justify()}},{key:"destroy",value:function(){var e=this;e.removeFromFjGalleryList(),e.justifyCount=0,e.options.onDestroy&&e.options.onDestroy.call(e),e.css(e.$container,{height:"",transition:""}),e.images.forEach(function(t){e.css(t.$item,{position:"",transform:"",transition:"",width:"",height:""})}),e.images.forEach(function(t){delete t.$item.fjGalleryImage}),delete e.$container.fjGallery}},{key:"resize",value:function(){this.justify()}}])&&f(t.prototype,e),i&&f(t,i),r}(),o=function(t){("object"===("undefined"==typeof HTMLElement?"undefined":l(HTMLElement))?t instanceof HTMLElement:t&&"object"===l(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)&&(t=[t]);for(var e,i=arguments[1],n=Array.prototype.slice.call(arguments,2),o=t.length,r=0;r<o;r++)if("object"===l(i)||void 0===i?t[r].fjGallery||(t[r].fjGallery=new w(t[r],i)):t[r].fjGallery&&(e=t[r].fjGallery[i].apply(t[r].fjGallery,n)),void 0!==e)return e;return t};o.constructor=w,e.default=o},function(t,e,i){"use strict";function n(a,s,c,l){var u,h=!1,f=0;function d(){u&&clearTimeout(u)}function t(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=this,o=Date.now()-f;function r(){f=Date.now(),c.apply(n,e)}h||(l&&!u&&r(),d(),void 0===l&&a<o?r():!0!==s&&(u=setTimeout(l?function(){u=void 0}:r,void 0===l?a-o:a)))}return"boolean"!=typeof s&&(l=c,c=s,s=void 0),t.cancel=function(){d(),h=!0},t}function o(t,e,i){return void 0===i?n(t,e,!1):n(t,i,!1!==e)}i.r(e),i.d(e,{debounce:function(){return o},throttle:function(){return n}})},function(t){t.exports=function(t){"complete"===document.readyState||"interactive"===document.readyState?t.call():document.attachEvent?document.attachEvent("onreadystatechange",function(){"interactive"===document.readyState&&t.call()}):document.addEventListener&&document.addEventListener("DOMContentLoaded",t)}},function(t,e,i){"use strict";
/*!
 * Copyright 2019 SmugMug, Inc.
 * Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
 * @license
 */var n=i(6);function f(t,e){var i;return!1!==t.fullWidthBreakoutRowCadence&&(e._rows.length+1)%t.fullWidthBreakoutRowCadence==0&&(i=!0),new n({top:e._containerHeight,left:t.containerPadding.left,width:t.containerWidth-t.containerPadding.left-t.containerPadding.right,spacing:t.boxSpacing.horizontal,targetRowHeight:t.targetRowHeight,targetRowHeightTolerance:t.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*t.targetRowHeight,edgeCaseMaxRowHeight:2*t.targetRowHeight,rightToLeft:!1,isBreakoutRow:i,widowLayoutStyle:t.widowLayoutStyle})}function d(t,e,i){return e._rows.push(i),e._layoutItems=e._layoutItems.concat(i.getItems()),e._containerHeight+=i.height+t.boxSpacing.vertical,i.items}t.exports=function(t,e){var i,n,o,r,a,s={},c={},l={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:!1,showWidows:!0,fullWidthBreakoutRowCadence:!1,widowLayoutStyle:"left"},u={},h={};return e=e||{},s=Object.assign(l,e),u.top=isNaN(parseFloat(s.containerPadding.top))?s.containerPadding:s.containerPadding.top,u.right=isNaN(parseFloat(s.containerPadding.right))?s.containerPadding:s.containerPadding.right,u.bottom=isNaN(parseFloat(s.containerPadding.bottom))?s.containerPadding:s.containerPadding.bottom,u.left=isNaN(parseFloat(s.containerPadding.left))?s.containerPadding:s.containerPadding.left,h.horizontal=isNaN(parseFloat(s.boxSpacing.horizontal))?s.boxSpacing:s.boxSpacing.horizontal,h.vertical=isNaN(parseFloat(s.boxSpacing.vertical))?s.boxSpacing:s.boxSpacing.vertical,s.containerPadding=u,s.boxSpacing=h,c._layoutItems=[],c._awakeItems=[],c._inViewportItems=[],c._leadingOrphans=[],c._trailingOrphans=[],c._containerHeight=s.containerPadding.top,c._rows=[],c._orphans=[],s._widowCount=0,i=s,n=c,t=t.map(function(t){return t.width&&t.height?{aspectRatio:t.width/t.height}:{aspectRatio:t}}),a=[],i.forceAspectRatio&&t.forEach(function(t){t.forcedAspectRatio=!0,t.aspectRatio=i.forceAspectRatio}),t.some(function(t,e){if(isNaN(t.aspectRatio))throw new Error("Item "+e+" has an invalid aspect ratio");if(r=r||f(i,n),o=r.addItem(t),r.isLayoutComplete()){if(a=a.concat(d(i,n,r)),n._rows.length>=i.maxNumRows)return!(r=null);if(r=f(i,n),!o&&(o=r.addItem(t),r.isLayoutComplete())){if(a=a.concat(d(i,n,r)),n._rows.length>=i.maxNumRows)return!(r=null);r=f(i,n)}}}),r&&r.getItems().length&&i.showWidows&&(n._rows.length?(t=n._rows[n._rows.length-1].isBreakoutRow?n._rows[n._rows.length-1].targetRowHeight:n._rows[n._rows.length-1].height,r.forceComplete(!1,t)):r.forceComplete(!1),a=a.concat(d(i,n,r)),i._widowCount=r.getItems().length),n._containerHeight=n._containerHeight-i.boxSpacing.vertical,n._containerHeight=n._containerHeight+i.containerPadding.bottom,{containerHeight:n._containerHeight,widowCount:i._widowCount,boxes:n._layoutItems}}},function(t){(t.exports=function(t){this.top=t.top,this.left=t.left,this.width=t.width,this.spacing=t.spacing,this.targetRowHeight=t.targetRowHeight,this.targetRowHeightTolerance=t.targetRowHeightTolerance,this.minAspectRatio=this.width/t.targetRowHeight*(1-t.targetRowHeightTolerance),this.maxAspectRatio=this.width/t.targetRowHeight*(1+t.targetRowHeightTolerance),this.edgeCaseMinRowHeight=t.edgeCaseMinRowHeight,this.edgeCaseMaxRowHeight=t.edgeCaseMaxRowHeight,this.widowLayoutStyle=t.widowLayoutStyle,this.isBreakoutRow=t.isBreakoutRow,this.items=[],this.height=0}).prototype={addItem:function(t){var e,i,n=this.items.concat(t),o=this.width-(n.length-1)*this.spacing,r=n.reduce(function(t,e){return t+e.aspectRatio},0),a=o/this.targetRowHeight;return this.isBreakoutRow&&0===this.items.length&&1<=t.aspectRatio?(this.items.push(t),this.completeLayout(o/t.aspectRatio,"justify"),!0):r<this.minAspectRatio?(this.items.push(Object.assign({},t)),!0):!(r>this.maxAspectRatio)||0===this.items.length?(this.items.push(Object.assign({},t)),this.completeLayout(o/r,"justify"),!0):(e=this.width-(this.items.length-1)*this.spacing,i=this.items.reduce(function(t,e){return t+e.aspectRatio},0),n=e/this.targetRowHeight,Math.abs(r-a)>Math.abs(i-n)?(this.completeLayout(e/i,"justify"),!1):(this.items.push(Object.assign({},t)),this.completeLayout(o/r,"justify"),!0))},isLayoutComplete:function(){return 0<this.height},completeLayout:function(t,e){var i,n,o,r,a,s=this.left,c=this.width-(this.items.length-1)*this.spacing;(void 0===e||["justify","center","left"].indexOf(e)<0)&&(e="left"),n=Math.max(this.edgeCaseMinRowHeight,Math.min(t,this.edgeCaseMaxRowHeight)),i=t!==n?c/(this.height=n)/(c/t):(this.height=t,1),this.items.forEach(function(t){t.top=this.top,t.width=t.aspectRatio*this.height*i,t.height=this.height,t.left=s,s+=t.width+this.spacing},this),"justify"===e?(s-=this.spacing+this.left,o=(s-this.width)/this.items.length,r=this.items.map(function(t,e){return Math.round((e+1)*o)}),1===this.items.length?this.items[0].width-=Math.round(o):this.items.forEach(function(t,e){0<e?(t.left-=r[e-1],t.width-=r[e]-r[e-1]):t.width-=r[e]})):"center"===e&&(a=(this.width-s)/2,this.items.forEach(function(t){t.left+=a+this.spacing},this))},forceComplete:function(t,e){"number"==typeof e?this.completeLayout(e,this.widowLayoutStyle):this.completeLayout(this.targetRowHeight,this.widowLayoutStyle)},getItems:function(){return this.items}}},function(t,e,i){"use strict";i.r(e);e.default=function(n){function t(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];o=e,r=r||requestAnimationFrame(function(){r=null,n.apply(void 0,o)})}var o,r=null;return t.cancel=function(){r&&(cancelAnimationFrame(r),r=null)},t}}],n={};function c(t){var e=n[t];if(void 0!==e)return e.exports;e=n[t]={exports:{}};return i[t](e,e.exports,c),e.exports}c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,{a:e}),e},c.d=function(t,e){for(var i in e)c.o(e,i)&&!c.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var l={};!function(){"use strict";c.r(l);var e=c(1),i=c(2);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var t,o,r,a,s=e.window.fjGallery;e.window.fjGallery=i.default,e.window.fjGallery.noConflict=function(){return e.window.fjGallery=s,this},void 0!==e.jQuery&&(t=e.window.fjGallery.constructor.prototype.init,e.window.fjGallery.constructor.prototype.init=function(){this.jQcontainer=(0,e.jQuery)(this.$container),this.jQcontainer.data("fjGallery",this),t&&t.call(this)},o=e.window.fjGallery.constructor.prototype.destroy,e.window.fjGallery.constructor.prototype.destroy=function(){this.jQcontainer&&this.jQcontainer.removeData("fjGallery"),o&&o.call(this)},(r=function(){var t=arguments||[];Array.prototype.unshift.call(t,this);t=i.default.apply(e.window,t);return"object"!==n(t)?t:this}).constructor=i.default.constructor,a=e.jQuery.fn.fjGallery,e.jQuery.fn.fjGallery=r,e.jQuery.fn.fjGallery.noConflict=function(){return e.jQuery.fn.fjGallery=a,this})}()}();
//# sourceMappingURL=fjGallery.min.js.map
